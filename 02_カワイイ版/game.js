// 1. DOMË¶ÅÁ¥†„ÅÆÂèñÂæó
const splashScreen = document.getElementById('splash-screen');
const titleScreen = document.getElementById('title-screen');
const ruleScreen = document.getElementById('rule-screen');
const gameWrapper = document.getElementById('game-wrapper');
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');
const audienceSelector = document.getElementById('audience-selector');
const speedSelector = document.getElementById('speed-selector');
const startBtn = document.getElementById('start-btn');
const questionElement = document.getElementById('question');
const answersElement = document.getElementById('answers');
const helpBtn = document.getElementById('help-btn');
const backToTitleBtn = document.getElementById('back-to-title-btn');
const uiContainer = document.getElementById('ui-container');
const helpCount = document.getElementById('help-count');

// 2. „Ç™„Éº„Éá„Ç£„Ç™Ë¶ÅÁ¥†„ÅÆ‰ΩúÊàê
const sounds = {
    opening: new Audio('„Ç™„Éº„Éó„Éã„É≥„Ç∞„Ç´„ÉØ„Ç§„Ç§.mp3'),
    bgm: new Audio('POPBGM.mp3'),
    ending: new Audio('„Ç®„É≥„Éá„Ç£„É≥„Ç∞„Ç´„ÉØ„Ç§„Ç§.mp3'),
    cursor: new Audio('„Ç´„Éº„ÇΩ„É´ÁßªÂãï11.mp3'),
    decision: new Audio('Ê±∫ÂÆö„Éú„Çø„É≥„ÇíÊäº„Åô.mp3'),
    correct: new Audio('„ÇØ„Ç§„Ç∫Ê≠£Ëß£1.mp3'),
    wrong: new Audio('„ÇØ„Ç§„Ç∫‰∏çÊ≠£Ëß£1.mp3'),
    help: new Audio('„Åä„Åü„Åô„Åë.mp3'),
    clear: new Audio('Â§ßÂã¢„ÅßÊãçÊâã.mp3'),
    congrats: new Audio('„Äå„Åä„ÇÅ„Åß„Å®„ÅÜ„Äç.mp3'),
    lineClear: new Audio('ÊîªÊíÉ2.mp3')
};
sounds.opening.loop = true;
sounds.bgm.loop = true;
sounds.ending.loop = true;

// 3. „Ç≤„Éº„É†„ÅÆÂÆöÊï∞„Å®Ë®≠ÂÆö
const COLS = 10;
const ROWS = 20;
const BLOCK_SIZE = 25;
// „Éë„Çπ„ÉÜ„É´„Ç´„É©„ÉºÔºàÂèØÊÑõ„ÅÑ„Éê„Éº„Ç∏„Éß„É≥Ôºâ
const COLORS = [null, '#FF8FA0', '#C8C8FF', '#70E870', '#FFB880', '#60C0F0', '#D080D0', '#E8D850'];
const SHAPES = [[], [[1, 1, 1, 1]], [[1, 1], [1, 1]], [[0, 1, 0], [1, 1, 1]], [[0, 0, 1], [1, 1, 1]], [[1, 0, 0], [1, 1, 1]], [[0, 1, 1], [1, 1, 0]], [[1, 1, 0], [0, 1, 1]]];
const speedSettings = { easy: 1200, normal: 800, hard: 500, extra: 350 };
const MIN_DROP_INTERVAL = 150; // „Çπ„Éî„Éº„Éâ„ÅÆ‰∏ãÈôêÔºà„Åì„Çå‰ª•‰∏äÈÄü„Åè„Å™„Çâ„Å™„ÅÑÔºâ

// Êïµ„Ç≠„É£„É©Ë®≠ÂÆöÔºàÂèØÊÑõ„ÅÑ„Éê„Éº„Ç∏„Éß„É≥Ôºâ
const enemySettings = {
    easy: { name: '„Åµ„Çè„Åµ„Çè„ÅÜ„Åï„Åé', emoji: 'üê∞', maxHp: 50 },
    normal: { name: '„Åç„Çâ„Åç„Çâ„Å≠„Åì', emoji: 'üê±', maxHp: 100 },
    hard: { name: '„Å´„Çì„Åé„Çá„Å≤„ÇÅ', emoji: 'üßú‚Äç‚ôÄÔ∏è', maxHp: 150 },
    extra: { name: '„ÇÜ„ÇÅ„ÇÜ„ÇÅ„É¶„Éã„Ç≥„Éº„É≥', emoji: 'ü¶Ñ', maxHp: 200 }
};
const allQuizzes = {
    lowerElem: [
        // ÁÆóÊï∞ÔºàË∂≥„ÅóÁÆó„ÉªÂºï„ÅçÁÆó„ÅÆ„ÅøÔºâ
        { q: '1+1=?', o: ['1', '2', '3'], a: '2' },
        { q: '2+3=?', o: ['4', '5', '6'], a: '5' },
        { q: '5+4=?', o: ['8', '9', '10'], a: '9' },
        { q: '3+6=?', o: ['8', '9', '10'], a: '9' },
        { q: '7+2=?', o: ['8', '9', '10'], a: '9' },
        { q: '10-3=?', o: ['6', '7', '8'], a: '7' },
        { q: '8-5=?', o: ['2', '3', '4'], a: '3' },
        { q: '9-4=?', o: ['4', '5', '6'], a: '5' },
        { q: '6-2=?', o: ['3', '4', '5'], a: '4' },
        { q: '10-7=?', o: ['2', '3', '4'], a: '3' },
        // Êº¢Â≠ó„ÅÆË™≠„Åø
        { q: '„ÄåÂ±±„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„ÇÑ„Åæ', '„Åã„Çè', '„ÅÜ„Åø'], a: '„ÇÑ„Åæ' },
        { q: '„ÄåÂ∑ù„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„ÇÑ„Åæ', '„Åã„Çè', '„ÅÜ„Åø'], a: '„Åã„Çè' },
        { q: '„ÄåÊú®„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„Åç', '„ÅØ„Å™', '„Åè„Åï'], a: '„Åç' },
        { q: '„ÄåËä±„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„Åç', '„ÅØ„Å™', '„Åè„Åï'], a: '„ÅØ„Å™' },
        { q: '„ÄåÁ©∫„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„Åù„Çâ', '„ÅÜ„Åø', '„ÇÑ„Åæ'], a: '„Åù„Çâ' },
        { q: '„ÄåÈõ®„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„ÅÇ„ÇÅ', '„ÇÜ„Åç', '„Åã„Åú'], a: '„ÅÇ„ÇÅ' },
        { q: '„ÄåÁä¨„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„ÅÑ„Å¨', '„Å≠„Åì', '„Å®„Çä'], a: '„ÅÑ„Å¨' },
        { q: '„ÄåÁå´„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„ÅÑ„Å¨', '„Å≠„Åì', '„Å®„Çä'], a: '„Å≠„Åì' },
        // „Å©„ÅÜ„Å∂„Å§
        { q: '„ÉØ„É≥„ÉØ„É≥„Å®„Å™„ÅèÂãïÁâ©„ÅØÔºü', o: ['„Å≠„Åì', '„ÅÑ„Å¨', '„Å®„Çä'], a: '„ÅÑ„Å¨' },
        { q: '„Éã„É£„Éº„Å®„Å™„ÅèÂãïÁâ©„ÅØÔºü', o: ['„ÅÑ„Å¨', '„Å≠„Åì', '„ÅÜ„Åó'], a: '„Å≠„Åì' },
        { q: '„É¢„Éº„Å®„Å™„ÅèÂãïÁâ©„ÅØÔºü', o: ['„ÅÜ„Åæ', '„Å∂„Åü', '„ÅÜ„Åó'], a: '„ÅÜ„Åó' },
        { q: 'È¶ñ„ÅåÈï∑„ÅÑÂãïÁâ©„ÅØÔºü', o: ['„Çæ„Ç¶', '„Ç≠„É™„É≥', '„É©„Ç§„Ç™„É≥'], a: '„Ç≠„É™„É≥' },
        { q: 'Èºª„ÅåÈï∑„ÅÑÂãïÁâ©„ÅØÔºü', o: ['„Ç≠„É™„É≥', '„Çæ„Ç¶', '„Çµ„É´'], a: '„Çæ„Ç¶' },
        { q: 'ÁôΩ„Å®Èªí„ÅÆ„ÇØ„Éû„ÅØÔºü', o: ['„Ç∑„É≠„ÇØ„Éû', '„Éë„É≥„ÉÄ', '„Éí„Ç∞„Éû'], a: '„Éë„É≥„ÉÄ' },
        // „ÅÑ„Çç
        { q: '„Çä„Çì„Åî„ÅØ‰ΩïËâ≤Ôºü', o: ['„ÅÇ„Åä', '„ÅÇ„Åã', '„Åç„ÅÑ„Çç'], a: '„ÅÇ„Åã' },
        { q: '„Éê„Éä„Éä„ÅØ‰ΩïËâ≤Ôºü', o: ['„ÅÇ„Åã', '„Åç„ÅÑ„Çç', '„Åø„Å©„Çä'], a: '„Åç„ÅÑ„Çç' },
        { q: 'Ëëâ„Å£„Å±„ÅØ‰ΩïËâ≤Ôºü', o: ['„ÅÇ„Åã', '„Åç„ÅÑ„Çç', '„Åø„Å©„Çä'], a: '„Åø„Å©„Çä' },
        { q: 'Á©∫„ÅØ‰ΩïËâ≤Ôºü', o: ['„ÅÇ„Åä', '„ÅÇ„Åã', '„Åç„ÅÑ„Çç'], a: '„ÅÇ„Åä' },
        { q: 'Èõ™„ÅØ‰ΩïËâ≤Ôºü', o: ['„ÅÇ„Åä', '„Åó„Çç', '„Åç„ÅÑ„Çç'], a: '„Åó„Çç' },
        { q: 'Ê∂àÈò≤Ëªä„ÅØ‰ΩïËâ≤Ôºü', o: ['„Åó„Çç', '„ÅÇ„Åä', '„ÅÇ„Åã'], a: '„ÅÇ„Åã' },
        // „Åõ„ÅÑ„Åã„Å§„ÉªÁü•Ë≠ò„ÇØ„Ç§„Ç∫
        { q: '1ÈÄ±Èñì„ÅØ‰ΩïÊó•Ôºü', o: ['5Êó•', '7Êó•', '10Êó•'], a: '7Êó•' },
        { q: '1Âπ¥„ÅØ‰ΩïÊúà„Åæ„Åß„ÅÇ„ÇãÔºü', o: ['10Êúà', '12Êúà', '14Êúà'], a: '12Êúà' },
        { q: '1Êó•„ÅØ‰ΩïÊôÇÈñìÔºü', o: ['12ÊôÇÈñì', '24ÊôÇÈñì', '30ÊôÇÈñì'], a: '24ÊôÇÈñì' },
        { q: '„ÅäÊ≠£Êúà„ÅØ‰ΩïÊúàÔºü', o: ['1Êúà', '4Êúà', '12Êúà'], a: '1Êúà' },
        { q: '„ÇØ„É™„Çπ„Éû„Çπ„ÅØ‰ΩïÊúàÔºü', o: ['1Êúà', '10Êúà', '12Êúà'], a: '12Êúà' },
        { q: '„Åì„Å©„ÇÇ„ÅÆÊó•„ÅØ‰ΩïÊúàÔºü', o: ['3Êúà', '5Êúà', '7Êúà'], a: '5Êúà' },
        { q: '„Å≤„Å™„Åæ„Å§„Çä„ÅØ‰ΩïÊúàÔºü', o: ['3Êúà', '5Êúà', '7Êúà'], a: '3Êúà' },
        { q: '„Åü„Å™„Å∞„Åü„ÅØ‰ΩïÊúàÔºü', o: ['5Êúà', '7Êúà', '9Êúà'], a: '7Êúà' },
        { q: '‰ø°Âè∑„ÅÆ„Äå„Å®„Åæ„Çå„Äç„ÅØ‰ΩïËâ≤Ôºü', o: ['„ÅÇ„Åä', '„Åç„ÅÑ„Çç', '„ÅÇ„Åã'], a: '„ÅÇ„Åã' },
        { q: 'Ëôπ„ÅØ‰ΩïËâ≤„ÅÇ„ÇãÔºü', o: ['5Ëâ≤', '7Ëâ≤', '10Ëâ≤'], a: '7Ëâ≤' },
        { q: '„ÅäÊúà„Åï„Åæ„ÅåÂá∫„Çã„ÅÆ„ÅØ„ÅÑ„Å§Ôºü', o: ['„ÅÇ„Åï', '„Å≤„Çã', '„Çà„Çã'], a: '„Çà„Çã' },
        { q: 'Â§™ÈôΩ„ÅåÊòá„Çã„ÅÆ„ÅØ„Å©„Å£„Å°Ôºü', o: ['„Å≤„Åå„Åó', '„Å´„Åó'], a: '„Å≤„Åå„Åó' },
        { q: '„Éü„ÉÑ„Éê„ÉÅ„Åå‰Ωú„ÇãÁîò„ÅÑ„ÇÇ„ÅÆ„ÅØÔºü', o: ['„Åï„Å®„ÅÜ', '„ÅØ„Å°„Åø„Å§', '„Ç∏„É£„É†'], a: '„ÅØ„Å°„Åø„Å§' },
        { q: 'Áâõ„Åã„Çâ„Å®„Çå„ÇãÁôΩ„ÅÑÈ£≤„ÅøÁâ©„ÅØÔºü', o: ['„Åä„Å°„ÇÉ', '„Åé„ÇÖ„ÅÜ„Å´„ÇÖ„ÅÜ', '„Ç∏„É•„Éº„Çπ'], a: '„Åé„ÇÖ„ÅÜ„Å´„ÇÖ„ÅÜ' },
        { q: '„Çµ„É≥„Çø„Åï„Çì„Åå‰πó„Å£„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„ÅØÔºü', o: ['„Åè„Çã„Åæ', '„Åù„Çä', '„Å≤„Åì„ÅÜ„Åç'], a: '„Åù„Çä' },
        { q: '„Éë„É≥„ÅØ„Éë„É≥„Åß„ÇÇÈ£ü„Åπ„Çâ„Çå„Å™„ÅÑ„Éë„É≥„ÅØÔºü', o: ['„Éï„É©„Ç§„Éë„É≥', '„ÅÇ„Çì„Éë„É≥', '„É°„É≠„É≥„Éë„É≥'], a: '„Éï„É©„Ç§„Éë„É≥' },
        // „ÅÇ„ÅÑ„Åï„Å§
        { q: 'ÊúùËµ∑„Åç„Åü„Çâ‰Ωï„Å¶Ë®Ä„ÅÜÔºü', o: ['„Åä„ÅØ„Çà„ÅÜ', '„Åì„Çì„Å´„Å°„ÅØ', '„Åä„ÇÑ„Åô„Åø'], a: '„Åä„ÅØ„Çà„ÅÜ' },
        { q: 'Â§úÂØù„ÇãÂâç„Å´‰Ωï„Å¶Ë®Ä„ÅÜÔºü', o: ['„Åä„ÅØ„Çà„ÅÜ', '„Åï„Çà„ÅÜ„Å™„Çâ', '„Åä„ÇÑ„Åô„Åø'], a: '„Åä„ÇÑ„Åô„Åø' },
        { q: '„ÅîÈ£Ø„ÇíÈ£ü„Åπ„ÇãÂâç„Å´‰Ωï„Å¶Ë®Ä„ÅÜÔºü', o: ['„ÅÑ„Åü„Å†„Åç„Åæ„Åô', '„Åî„Å°„Åù„ÅÜ„Åï„Åæ', '„Åä„ÅØ„Çà„ÅÜ'], a: '„ÅÑ„Åü„Å†„Åç„Åæ„Åô' },
        { q: '„ÅîÈ£Ø„ÇíÈ£ü„Åπ„ÅüÂæå„Å´‰Ωï„Å¶Ë®Ä„ÅÜÔºü', o: ['„ÅÑ„Åü„Å†„Åç„Åæ„Åô', '„Åî„Å°„Åù„ÅÜ„Åï„Åæ', '„Åï„Çà„ÅÜ„Å™„Çâ'], a: '„Åî„Å°„Åù„ÅÜ„Åï„Åæ' },
        { q: '‰∫∫„Å´‰Ωï„Åã„Åó„Å¶„ÇÇ„Çâ„Å£„Åü„Çâ‰Ωï„Å¶Ë®Ä„ÅÜÔºü', o: ['„Åî„ÇÅ„Çì„Å≠', '„ÅÇ„Çä„Åå„Å®„ÅÜ', '„Åï„Çà„ÅÜ„Å™„Çâ'], a: '„ÅÇ„Çä„Åå„Å®„ÅÜ' },
        // ÈõëÂ≠¶„ÇØ„Ç§„Ç∫
        { q: '‰∫∫Èñì„ÅÆÁõÆ„ÅØ„ÅÑ„Åè„Å§Ôºü', o: ['1„Å§', '2„Å§', '3„Å§'], a: '2„Å§' },
        { q: '‰∫∫Èñì„ÅÆËÄ≥„ÅØ„ÅÑ„Åè„Å§Ôºü', o: ['1„Å§', '2„Å§', '4„Å§'], a: '2„Å§' },
        { q: '‰∫∫Èñì„ÅÆÊâã„ÅÆÊåá„ÅØ‰ΩïÊú¨Ôºü', o: ['5Êú¨', '8Êú¨', '10Êú¨'], a: '5Êú¨' },
        { q: '„Çø„Ç≥„ÅÆË∂≥„ÅØ‰ΩïÊú¨Ôºü', o: ['6Êú¨', '8Êú¨', '10Êú¨'], a: '8Êú¨' },
        { q: '„Ç´„Éñ„Éà„É†„Ç∑„ÅÆË∂≥„ÅØ‰ΩïÊú¨Ôºü', o: ['4Êú¨', '6Êú¨', '8Êú¨'], a: '6Êú¨' },
        { q: '„Åü„Åæ„Åî„ÇíÁî£„ÇÄÂãïÁâ©„ÅØÔºü', o: ['„Ç§„Éå', '„Éç„Ç≥', '„Éã„ÉØ„Éà„É™'], a: '„Éã„ÉØ„Éà„É™' },
        { q: '„ÉÅ„Éº„Ç∫„ÅØ‰Ωï„Åã„Çâ„Åß„Åç„Å¶„ÇãÔºü', o: ['„Åü„Åæ„Åî', '„Åé„ÇÖ„ÅÜ„Å´„ÇÖ„ÅÜ', '„Åì„ÇÄ„Åé'], a: '„Åé„ÇÖ„ÅÜ„Å´„ÇÖ„ÅÜ' },
        { q: '„Åä„Å®„ÅÜ„Åµ„ÅØ‰Ωï„Åã„Çâ„Åß„Åç„Å¶„ÇãÔºü', o: ['„Åä„Åì„ÇÅ', '„Å†„ÅÑ„Åö', '„Åì„ÇÄ„Åé'], a: '„Å†„ÅÑ„Åö' },
        { q: '„Éë„É≥„ÅØ‰Ωï„Åã„Çâ„Åß„Åç„Å¶„ÇãÔºü', o: ['„Åä„Åì„ÇÅ', '„Å†„ÅÑ„Åö', '„Åì„ÇÄ„Åé'], a: '„Åì„ÇÄ„Åé' },
        { q: '„Ç´„Ç®„É´„ÅÆÂ≠ê„Å©„ÇÇ„ÅØ‰ΩïÔºü', o: ['„Åä„Åü„Åæ„Åò„ÇÉ„Åè„Åó', '„Çà„ÅÜ„Å°„ÇÖ„ÅÜ', '„Å≤„Çà„Åì'], a: '„Åä„Åü„Åæ„Åò„ÇÉ„Åè„Åó' },
        { q: '„ÉÅ„Éß„Ç¶„ÉÅ„Éß„ÅÆÂ≠ê„Å©„ÇÇ„ÅØ‰ΩïÔºü', o: ['„Åä„Åü„Åæ„Åò„ÇÉ„Åè„Åó', '„ÅÑ„ÇÇ„ÇÄ„Åó', '„Å≤„Çà„Åì'], a: '„ÅÑ„ÇÇ„ÇÄ„Åó' },
        { q: 'Êó•Êú¨„ÅÆÂõΩÊóó„ÅÆËâ≤„ÅØÔºü', o: ['Èùí„Å®ÁôΩ', 'Ëµ§„Å®ÁôΩ', 'Ëµ§„Å®Èùí'], a: 'Ëµ§„Å®ÁôΩ' },
        { q: '„ÅäÁÆ∏„ÅØ‰ΩïÊú¨„Åß‰Ωø„ÅÜÔºü', o: ['1Êú¨', '2Êú¨', '3Êú¨'], a: '2Êú¨' },
        { q: 'ÊïëÊÄ•Ëªä„ÅØ‰ΩïËâ≤Ôºü', o: ['Ëµ§', 'ÁôΩ', 'Èùí'], a: 'ÁôΩ' },
        { q: '„Éë„Éà„Ç´„Éº„ÅØ‰ΩïËâ≤„Å®‰ΩïËâ≤Ôºü', o: ['Ëµ§„Å®ÁôΩ', 'ÁôΩ„Å®Èªí', 'Èùí„Å®ÁôΩ'], a: 'ÁôΩ„Å®Èªí' },
        { q: 'Ê∞∑„ÅØ‰Ωï„ÅåÂõ∫„Åæ„Å£„Åü„ÇÇ„ÅÆÔºü', o: ['„Åø„Åö', '„Åè„ÅÜ„Åç', '„Åó„Åä'], a: '„Åø„Åö' },
        { q: 'Èõ≤„ÅØ‰Ωï„Åã„Çâ„Åß„Åç„Å¶„ÇãÔºü', o: ['„Åë„ÇÄ„Çä', '„Åø„Åö', '„Çè„Åü'], a: '„Åø„Åö' },
        { q: '‰∏ÄÁï™Â§ß„Åç„ÅÑÂãïÁâ©„ÅØÔºü', o: ['„Çæ„Ç¶', '„ÇØ„Ç∏„É©', '„Ç≠„É™„É≥'], a: '„ÇØ„Ç∏„É©' },
        { q: '‰∏ÄÁï™Ë∂≥„ÅåÈÄü„ÅÑÂãïÁâ©„ÅØÔºü', o: ['„É©„Ç§„Ç™„É≥', '„Ç¶„Éû', '„ÉÅ„Éº„Çø„Éº'], a: '„ÉÅ„Éº„Çø„Éº' },
        { q: '„Éà„Éû„Éà„ÅØÈáéËèúÔºüÊûúÁâ©Ôºü', o: ['„ÇÑ„Åï„ÅÑ', '„Åè„Å†„ÇÇ„ÅÆ'], a: '„ÇÑ„Åï„ÅÑ' },
        { q: '„Çπ„Ç§„Ç´„ÅØÈáéËèúÔºüÊûúÁâ©Ôºü', o: ['„ÇÑ„Åï„ÅÑ', '„Åè„Å†„ÇÇ„ÅÆ'], a: '„ÇÑ„Åï„ÅÑ' },
        { q: '„Éö„É≥„ÇÆ„É≥„ÅØÈ£õ„Åπ„ÇãÔºüÈ£õ„Åπ„Å™„ÅÑÔºü', o: ['„Å®„Åπ„Çã', '„Å®„Åπ„Å™„ÅÑ'], a: '„Å®„Åπ„Å™„ÅÑ' },
        { q: '„ÉÄ„ÉÅ„Éß„Ç¶„ÅØÈ£õ„Åπ„ÇãÔºüÈ£õ„Åπ„Å™„ÅÑÔºü', o: ['„Å®„Åπ„Çã', '„Å®„Åπ„Å™„ÅÑ'], a: '„Å®„Åπ„Å™„ÅÑ' },
        { q: '„Éõ„Çø„É´„ÅåÂÖâ„Çã„ÅÆ„ÅØ„Å©„ÅìÔºü', o: ['„ÅÇ„Åü„Åæ', '„Åä„Å™„Åã', '„Åä„Åó„Çä'], a: '„Åä„Åó„Çä' },
        // ËøΩÂä†ÂïèÈ°åÔºà20ÂïèÔºâ
        { q: '4+5=?', o: ['8', '9', '10'], a: '9' },
        { q: '6+3=?', o: ['8', '9', '10'], a: '9' },
        { q: '2+7=?', o: ['8', '9', '10'], a: '9' },
        { q: '8+1=?', o: ['8', '9', '10'], a: '9' },
        { q: '7-3=?', o: ['3', '4', '5'], a: '4' },
        { q: '9-6=?', o: ['2', '3', '4'], a: '3' },
        { q: '„Ç≥„Ç±„Ç≥„ÉÉ„Ç≥„Éº„Å®„Å™„ÅèÂãïÁâ©„ÅØÔºü', o: ['„ÅÇ„Å≤„Çã', '„Å´„Çè„Å®„Çä', '„Åô„Åö„ÇÅ'], a: '„Å´„Çè„Å®„Çä' },
        { q: '„Éî„Éß„É≥„Éî„Éß„É≥Ë∑≥„Å≠„ÇãÂãïÁâ©„ÅØÔºü', o: ['„Ç´„Ç®„É´', '„Ç´„É°', '„Éò„Éì'], a: '„Ç´„Ç®„É´' },
        { q: 'Êµ∑„Å´‰Ωè„ÇÄÂ§ß„Åç„Å™ÂãïÁâ©„ÅØÔºü', o: ['„ÇØ„Ç∏„É©', '„É©„Ç§„Ç™„É≥', '„Éà„É©'], a: '„ÇØ„Ç∏„É©' },
        { q: '„Åó„Å£„ÅΩ„Åå„Åµ„Åï„Åµ„Åï„Å™ÂãïÁâ©„ÅØÔºü', o: ['„É™„Çπ', '„Ç´„É°', '„Ç´„Ç®„É´'], a: '„É™„Çπ' },
        { q: '„ÅäÊòº„Åî„ÅØ„Çì„ÇíÈ£ü„Åπ„ÇãÊôÇÈñì„ÅØÔºü', o: ['„ÅÇ„Åï', '„Å≤„Çã', '„Çà„Çã'], a: '„Å≤„Çã' },
        { q: 'Ëµ§„ÅÑÊûúÁâ©„ÅØÔºü', o: ['„Éê„Éä„Éä', '„ÅÑ„Å°„Åî', '„Å∂„Å©„ÅÜ'], a: '„ÅÑ„Å°„Åî' },
        { q: 'ÈªÑËâ≤„ÅÑÊûúÁâ©„ÅØÔºü', o: ['„Çä„Çì„Åî', '„É¨„É¢„É≥', '„Å∂„Å©„ÅÜ'], a: '„É¨„É¢„É≥' },
        { q: '„ÄåÊúà„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„Å§„Åç', '„Åª„Åó', '„Åù„Çâ'], a: '„Å§„Åç' },
        { q: '„ÄåÁÅ´„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„Åø„Åö', '„Å≤', '„Å§„Å°'], a: '„Å≤' },
        { q: '„ÄåÊ∞¥„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„Åø„Åö', '„Å≤', '„Åã„Åú'], a: '„Åø„Åö' },
        { q: '„ÄåÂúü„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„Å§„Å°', '„ÅÑ„Åó', '„Åô„Å™'], a: '„Å§„Å°' },
        { q: '„ÄåÈáë„Äç„ÅÆË™≠„ÅøÊñπ„ÅØÔºü', o: ['„Åç„Çì', '„Åé„Çì', '„Å©„ÅÜ'], a: '„Åç„Çì' },
        { q: '„Éñ„Éº„Éñ„Éº„Å®„Å™„ÅèÂãïÁâ©„ÅØÔºü', o: ['„ÅÜ„Åó', '„Å∂„Åü', '„Å≤„Å§„Åò'], a: '„Å∂„Åü' },
        { q: '„É°„Çß„Éº„Å®„Å™„ÅèÂãïÁâ©„ÅØÔºü', o: ['„ÅÜ„Åó', '„Å∂„Åü', '„Å≤„Å§„Åò'], a: '„Å≤„Å§„Åò' },
        // „Å™„Åû„Å™„Åû
        { q: 'ÂÜ∑ËîµÂ∫´„ÅÆ‰∏≠„Å´„ÅÑ„ÇãÂãïÁâ©„ÅØÔºü', o: ['„Çæ„Ç¶', '„ÇØ„Éû', '„Éà„É©'], a: '„Çæ„Ç¶' },
        { q: 'È£ü„Åπ„Çã„Å®ÂÆâÂøÉ„Åô„Çã„Ç±„Éº„Ç≠„ÅØÔºü', o: ['„Ç∑„Éß„Éº„Éà„Ç±„Éº„Ç≠', '„Éõ„ÉÉ„Éà„Ç±„Éº„Ç≠', '„ÉÅ„Éº„Ç∫„Ç±„Éº„Ç≠'], a: '„Éõ„ÉÉ„Éà„Ç±„Éº„Ç≠' },
        { q: 'ÂÖ¨Âúí„Åß„ÅÑ„Å§„ÇÇ„Éñ„É©„Éñ„É©„Åó„Å¶„ÅÑ„Çã‰∫∫Ê∞óËÄÖ„ÅØÔºü', o: ['„Ç∑„Éº„ÇΩ„Éº', '„Åô„Åπ„Çä„Å†„ÅÑ', '„Éñ„É©„É≥„Ç≥'], a: '„Éñ„É©„É≥„Ç≥' },
    ],
    upperElem: [
        // ÁÆóÊï∞„ÉªË®àÁÆó
        { q: '7√ó8=?', o: ['54', '56', '58', '64'], a: '56' },
        { q: '9√ó6=?', o: ['45', '54', '56', '63'], a: '54' },
        { q: '8√ó7=?', o: ['54', '56', '58', '64'], a: '56' },
        { q: '6√ó7=?', o: ['36', '42', '48', '54'], a: '42' },
        { q: '9√ó9=?', o: ['72', '81', '90', '99'], a: '81' },
        { q: '72√∑8=?', o: ['7', '8', '9', '10'], a: '9' },
        { q: '56√∑7=?', o: ['6', '7', '8', '9'], a: '8' },
        { q: '45√∑9=?', o: ['4', '5', '6', '7'], a: '5' },
        { q: '63√∑7=?', o: ['7', '8', '9', '10'], a: '9' },
        { q: '48√∑6=?', o: ['6', '7', '8', '9'], a: '8' },
        { q: '25+38=?', o: ['53', '63', '73', '83'], a: '63' },
        { q: '100-36=?', o: ['54', '64', '74', '84'], a: '64' },
        { q: '150+250=?', o: ['300', '400', '500', '600'], a: '400' },
        { q: '1000-350=?', o: ['550', '650', '750', '850'], a: '650' },
        { q: '12√ó5=?', o: ['50', '60', '70', '80'], a: '60' },
        { q: '100√∑4=?', o: ['20', '25', '30', '35'], a: '25' },
        // ÁêÜÁßë
        { q: 'Ê§çÁâ©„ÅåÂÖâ„ÅßÊ†ÑÈ§ä„Çí‰Ωú„Çã„Åì„Å®„Çí‰Ωï„Å®„ÅÑ„ÅÜÔºü', o: ['ÂëºÂê∏', 'ÂÖâÂêàÊàê', 'Ê∂àÂåñ', 'Áô∫ÈÖµ'], a: 'ÂÖâÂêàÊàê' },
        { q: 'Ê∞¥„ÅåÊ∞∑„Å´„Å™„ÇãÊ∏©Â∫¶„ÅØÔºü', o: ['-10Â∫¶', '0Â∫¶', '10Â∫¶', '100Â∫¶'], a: '0Â∫¶' },
        { q: 'Ê∞¥„ÅåÊ≤∏È®∞„Åô„ÇãÊ∏©Â∫¶„ÅØÔºü', o: ['50Â∫¶', '80Â∫¶', '100Â∫¶', '120Â∫¶'], a: '100Â∫¶' },
        { q: 'Êúà„ÅÆË°®Èù¢„Å´„ÅÇ„ÇãÁ©¥„Çí‰Ωï„Å®„ÅÑ„ÅÜÔºü', o: ['„ÇØ„É¨„Éº„Çø„Éº', '„Éû„Ç∞„Éû', 'ÁÅ´Â±±', 'Êµ∑'], a: '„ÇØ„É¨„Éº„Çø„Éº' },
        { q: 'Âú∞ÁêÉ„ÅÆË°õÊòü„ÅØÔºü', o: ['Â§™ÈôΩ', 'Êúà', 'ÁÅ´Êòü', 'ÈáëÊòü'], a: 'Êúà' },
        { q: 'ÊòÜËô´„ÅÆË∂≥„ÅØ‰ΩïÊú¨Ôºü', o: ['4Êú¨', '6Êú¨', '8Êú¨', '10Êú¨'], a: '6Êú¨' },
        { q: 'È≠ö„ÅØ„Å©„Åì„ÅßÊÅØ„Çí„Åô„ÇãÔºü', o: ['ËÇ∫', '„Åà„Çâ', 'ÁöÆ„Åµ', 'Âè£'], a: '„Åà„Çâ' },
        { q: '‰∏ÄÁï™Êòº„ÅåÈï∑„ÅÑÂ≠£ÁØÄ„ÅØÔºü', o: ['Êò•', 'Â§è', 'Áßã', 'ÂÜ¨'], a: 'Â§è' },
        // Á§æ‰ºö„ÉªÂú∞ÁêÜ
        { q: 'Êó•Êú¨„Åß‰∏ÄÁï™È´ò„ÅÑÂ±±„ÅØÔºü', o: ['ÂØåÂ£´Â±±', 'ÂåóÂ≤≥', 'Êßç„É∂Â≤≥', 'ÁôΩÂ±±'], a: 'ÂØåÂ£´Â±±' },
        { q: 'Êó•Êú¨„Åß‰∏ÄÁï™Èï∑„ÅÑÂ∑ù„ÅØÔºü', o: ['Âà©Ê†πÂ∑ù', '‰ø°ÊøÉÂ∑ù', 'Áü≥Áã©Â∑ù', 'Â§öÊë©Â∑ù'], a: '‰ø°ÊøÉÂ∑ù' },
        { q: 'Êó•Êú¨„Åß‰∏ÄÁï™Â§ß„Åç„ÅÑÊπñ„ÅØÔºü', o: ['Èúû„É∂Êµ¶', 'ÁêµÁê∂Êπñ', 'Ê¥ûÁà∫Êπñ', 'Ë´èË®™Êπñ'], a: 'ÁêµÁê∂Êπñ' },
        { q: 'Êó•Êú¨„ÅÆÈ¶ñÈÉΩ„ÅØÔºü', o: ['Â§ßÈò™', '‰∫¨ÈÉΩ', 'Êù±‰∫¨', 'ÂêçÂè§Â±ã'], a: 'Êù±‰∫¨' },
        { q: 'Êó•Êú¨„ÅÆÈÉΩÈÅìÂ∫úÁúå„ÅØ„ÅÑ„Åè„Å§Ôºü', o: ['43', '45', '47', '50'], a: '47' },
        { q: 'ÂåóÊµ∑ÈÅì„ÅÆÁúåÂ∫ÅÊâÄÂú®Âú∞„ÅØÔºü', o: ['ÂáΩÈ§®', 'Êó≠Â∑ù', 'Êú≠Âπå', 'ÈáßË∑Ø'], a: 'Êú≠Âπå' },
        { q: 'Ê≤ñÁ∏ÑÁúå„ÅÆÁúåÂ∫ÅÊâÄÂú®Âú∞„ÅØÔºü', o: ['Áü≥Âû£', 'ÈÇ£Ë¶á', 'ÂêçË≠∑', 'ÂÆÆÂè§'], a: 'ÈÇ£Ë¶á' },
        // ÂõΩË™û„ÉªÊº¢Â≠ó
        { q: '„ÄåÁä¨„ÇÇÊ≠©„Åë„Å∞„Äá„Äá„Å´ÂΩì„Åü„Çã„Äç', o: ['Áü≥', 'Ê£í', 'Â£Å', '‰∫∫'], a: 'Ê£í' },
        { q: '„ÄåÊó©Ëµ∑„Åç„ÅØ‰∏âÊñá„ÅÆ„Äá„Äá„Äç', o: ['Êêç', 'Âæó', 'ÊØí', 'Áõä'], a: 'Âæó' },
        // Ëã±Ë™û
        { q: '„ÄåApple„Äç„ÅØÊó•Êú¨Ë™û„ÅßÔºü', o: ['„Åø„Åã„Çì', '„Çä„Çì„Åî', '„Å∂„Å©„ÅÜ', '„ÇÇ„ÇÇ'], a: '„Çä„Çì„Åî' },
        { q: '„ÄåDog„Äç„ÅØÊó•Êú¨Ë™û„ÅßÔºü', o: ['Áå´', 'Áä¨', 'È≥•', 'È≠ö'], a: 'Áä¨' },
        { q: '„ÄåCat„Äç„ÅØÊó•Êú¨Ë™û„ÅßÔºü', o: ['Áå´', 'Áä¨', 'È≥•', 'È≠ö'], a: 'Áå´' },
        { q: '„ÄåRed„Äç„ÅØ‰ΩïËâ≤Ôºü', o: ['Èùí', 'Ëµ§', 'ÈªÑ', 'Á∑ë'], a: 'Ëµ§' },
        { q: '„ÄåBlue„Äç„ÅØ‰ΩïËâ≤Ôºü', o: ['Èùí', 'Ëµ§', 'ÈªÑ', 'Á∑ë'], a: 'Èùí' },
        { q: '„ÄåMonday„Äç„ÅØ‰ΩïÊõúÊó•Ôºü', o: ['ÊúàÊõúÊó•', 'ÁÅ´ÊõúÊó•', 'Ê∞¥ÊõúÊó•', 'Êó•ÊõúÊó•'], a: 'ÊúàÊõúÊó•' },
        { q: '„ÄåSunday„Äç„ÅØ‰ΩïÊõúÊó•Ôºü', o: ['ÊúàÊõúÊó•', 'ÂúüÊõúÊó•', 'ÈáëÊõúÊó•', 'Êó•ÊõúÊó•'], a: 'Êó•ÊõúÊó•' },
        { q: 'Êï∞Â≠ó„ÅÆ„Äå5„Äç„ÅØËã±Ë™û„ÅßÔºü', o: ['Three', 'Four', 'Five', 'Six'], a: 'Five' },
        // ËøΩÂä†ÂïèÈ°åÔºà20ÂïèÔºâ
        { q: '144√∑12=?', o: ['10', '11', '12', '13'], a: '12' },
        { q: '25√ó4=?', o: ['90', '100', '110', '120'], a: '100' },
        { q: '81√∑9=?', o: ['8', '9', '10', '11'], a: '9' },
        { q: '15√ó6=?', o: ['80', '90', '100', '110'], a: '90' },
        { q: 'Ê§çÁâ©„ÅåËÇ≤„Å§„ÅÆ„Å´ÂøÖË¶Å„Å™„ÇÇ„ÅÆ„ÅØÔºü', o: ['Ê∞¥„Å®ÂÖâ', 'Áü≥„Å®Á†Ç', 'È¢®„Å®Èõ≤', 'Â°©„Å®Á†ÇÁ≥ñ'], a: 'Ê∞¥„Å®ÂÖâ' },
        { q: 'Â§™ÈôΩÁ≥ª„Åß‰∏ÄÁï™Â§ß„Åç„ÅÑÊÉëÊòü„ÅØÔºü', o: ['Âú∞ÁêÉ', 'Êú®Êòü', 'ÂúüÊòü', 'ÁÅ´Êòü'], a: 'Êú®Êòü' },
        { q: 'Ëô´„ÇÅ„Åå„Å≠„ÅßÂ§™ÈôΩ„ÅÆÂÖâ„ÇíÈõÜ„ÇÅ„Çã„Å®Ôºü', o: ['ÂÜ∑„Åü„Åè„Å™„Çã', 'ÁÜ±„Åè„Å™„Çã', 'Â§â„Çè„Çâ„Å™„ÅÑ', 'Ê∂à„Åà„Çã'], a: 'ÁÜ±„Åè„Å™„Çã' },
        { q: 'Á£ÅÁü≥„Å´„Åè„Å£„Å§„Åè„ÅÆ„ÅØÔºü', o: ['ÈâÑ', '„Éó„É©„Çπ„ÉÅ„ÉÉ„ÇØ', 'Êú®', '„Ç¨„É©„Çπ'], a: 'ÈâÑ' },
        { q: 'Âú∞Âõ≥„ÅßÂåó„ÅØ„Å©„ÅÆÊñπÂêëÔºü', o: ['‰∏ä', '‰∏ã', 'Âè≥', 'Â∑¶'], a: '‰∏ä' },
        { q: '‰∏ÄÂπ¥„Åß‰∏ÄÁï™Êòº„ÅåÈï∑„ÅÑÊó•„ÅØÔºü', o: ['Êò•ÂàÜ', 'Â§èËá≥', 'ÁßãÂàÜ', 'ÂÜ¨Ëá≥'], a: 'Â§èËá≥' },
        { q: '„ÄåËµ∞„Çã„Äç„ÅÆÂèçÂØæ„ÅØÔºü', o: ['Ê≠¢„Åæ„Çã', 'Ê≠©„Åè', 'È£õ„Å∂', 'Ê≥≥„Åê'], a: 'Ê≠¢„Åæ„Çã' },
        { q: '„ÄåÂ§ß„Åç„ÅÑ„Äç„ÅÆÂèçÂØæ„ÅØÔºü', o: ['Â∞è„Åï„ÅÑ', '‰Ωé„ÅÑ', 'Â∞ë„Å™„ÅÑ', 'ËªΩ„ÅÑ'], a: 'Â∞è„Åï„ÅÑ' },
        { q: '„ÄåÈÄü„ÅÑ„Äç„ÅÆÂèçÂØæ„ÅØÔºü', o: ['ÈÅÖ„ÅÑ', 'Âº±„ÅÑ', 'ËªΩ„ÅÑ', 'Êöó„ÅÑ'], a: 'ÈÅÖ„ÅÑ' },
        { q: '„ÄåÊúù„Äç„ÅÆÂèçÂØæ„ÅØÔºü', o: ['Â§ú', 'Êòº', 'Â§ïÊñπ', 'Êòé„ÅëÊñπ'], a: 'Â§ú' },
        { q: '„ÄåÂßã„Åæ„Çä„Äç„ÅÆÂèçÂØæ„ÅØÔºü', o: ['ÁµÇ„Çè„Çä', 'ÈÄî‰∏≠', '‰ºë„Åø', 'Á∂ö„Åç'], a: 'ÁµÇ„Çè„Çä' },
        { q: '„ÄåYellow„Äç„ÅØ‰ΩïËâ≤Ôºü', o: ['Èùí', 'Ëµ§', 'ÈªÑ', 'Á∑ë'], a: 'ÈªÑ' },
        { q: '„ÄåGreen„Äç„ÅØ‰ΩïËâ≤Ôºü', o: ['Èùí', 'Ëµ§', 'ÈªÑ', 'Á∑ë'], a: 'Á∑ë' },
        { q: '„ÄåSaturday„Äç„ÅØ‰ΩïÊõúÊó•Ôºü', o: ['ÊúàÊõúÊó•', 'ÂúüÊõúÊó•', 'ÈáëÊõúÊó•', 'Êó•ÊõúÊó•'], a: 'ÂúüÊõúÊó•' },
        { q: 'Êï∞Â≠ó„ÅÆ„Äå10„Äç„ÅØËã±Ë™û„ÅßÔºü', o: ['Eight', 'Nine', 'Ten', 'Eleven'], a: 'Ten' },
        // Èù¢ÁôΩÈõëÂ≠¶„ÇØ„Ç§„Ç∫ÔºàÂ∞èÂ≠¶ÁîüÂêë„ÅëÔºâ
        { q: '„Éë„É≥„ÉÄ„ÅÆ„Åó„Å£„ÅΩ„ÅØ‰ΩïËâ≤Ôºü', o: ['Èªí', 'ÁôΩ', 'Ëå∂Ëâ≤', '„Éî„É≥„ÇØ'], a: 'ÁôΩ' },
        { q: '„É©„ÇØ„ÉÄ„ÅÆ„Åì„Å∂„Å´„ÅØ‰Ωï„ÅåÂÖ•„Å£„Å¶„ÅÑ„ÇãÔºü', o: ['Ê∞¥', 'ËÑÇËÇ™', 'Á©∫Ê∞ó', 'È™®'], a: 'ËÑÇËÇ™' },
        { q: '„Çµ„Ç§„Ç≥„É≠„ÅÆ1„ÅÆÂèçÂØæÂÅ¥„ÅØ‰ΩïÔºü', o: ['2', '4', '5', '6'], a: '6' },
        { q: '„Ç≠„É™„É≥„ÅØ1Êó•‰ΩïÂàÜ„Åè„Çâ„ÅÑÂØù„ÇãÔºü', o: ['Á¥Ñ20ÂàÜ', 'Á¥Ñ2ÊôÇÈñì', 'Á¥Ñ5ÊôÇÈñì', 'Á¥Ñ8ÊôÇÈñì'], a: 'Á¥Ñ20ÂàÜ' },
        { q: '„Ç∑„É≠„ÇØ„Éû„ÅÆËÇå„ÅØ‰ΩïËâ≤Ôºü', o: ['ÁôΩ', 'Èªí', '„Éî„É≥„ÇØ', 'Ëå∂Ëâ≤'], a: 'Èªí' },
        { q: '„Çø„Ç≥„ÅÆË∂≥„ÅØ‰ΩïÊú¨Ôºü', o: ['6Êú¨', '8Êú¨', '10Êú¨', '12Êú¨'], a: '8Êú¨' },
        { q: '„Ç§„Ç´„ÅÆË∂≥„ÅØ‰ΩïÊú¨Ôºü', o: ['6Êú¨', '8Êú¨', '10Êú¨', '12Êú¨'], a: '10Êú¨' },
        { q: '„Éè„ÉÅ„Éü„ÉÑ„ÅØËÖê„ÇãÔºüËÖê„Çâ„Å™„ÅÑÔºü', o: ['„Åô„ÅêËÖê„Çã', '1Âπ¥„ÅßËÖê„Çã', '10Âπ¥„ÅßËÖê„Çã', 'ËÖê„Çâ„Å™„ÅÑ'], a: 'ËÖê„Çâ„Å™„ÅÑ' },
        { q: '„Éö„É≥„ÇÆ„É≥„ÅØÈ≥•ÔºüÈ≠öÔºü', o: ['È≥•', 'È≠ö', 'Âì∫‰π≥È°û', '‰∏°ÁîüÈ°û'], a: 'È≥•' },
        { q: '„Ç≥„Ç¢„É©„ÅØ1Êó•‰ΩïÊôÇÈñìÂØù„ÇãÔºü', o: ['Á¥Ñ8ÊôÇÈñì', 'Á¥Ñ12ÊôÇÈñì', 'Á¥Ñ18ÊôÇÈñì', 'Á¥Ñ22ÊôÇÈñì'], a: 'Á¥Ñ22ÊôÇÈñì' },
    ],
    adult: [
        // ‰∏ÄËà¨Â∏∏Ë≠ò
        { q: '1Âπ¥„ÅØ‰ΩïÊó•ÔºüÔºàÂπ≥Âπ¥Ôºâ', o: ['360Êó•', '365Êó•', '366Êó•', '370Êó•'], a: '365Êó•' },
        { q: '1ÊôÇÈñì„ÅØ‰ΩïÂàÜÔºü', o: ['30ÂàÜ', '60ÂàÜ', '100ÂàÜ', '120ÂàÜ'], a: '60ÂàÜ' },
        { q: '1„Ç≠„É≠„ÅØ‰Ωï„É°„Éº„Éà„É´Ôºü', o: ['100m', '500m', '1000m', '10000m'], a: '1000m' },
        { q: 'Êó•Êú¨„ÅÆÈÉΩÈÅìÂ∫úÁúå„ÅØ„ÅÑ„Åè„Å§Ôºü', o: ['43', '45', '47', '50'], a: '47' },
        { q: 'Âπ≤ÊîØ„ÅØÂÖ®ÈÉ®„Åß‰ΩïÁ®ÆÈ°ûÔºü', o: ['10', '12', '14', '16'], a: '12' },
        { q: '1„ÉÄ„Éº„Çπ„ÅØ‰ΩïÂÄãÔºü', o: ['6ÂÄã', '10ÂÄã', '12ÂÄã', '24ÂÄã'], a: '12ÂÄã' },
        // Ë®àÁÆó
        { q: '25+75=?', o: ['90', '100', '110', '120'], a: '100' },
        { q: '1000-350=?', o: ['550', '650', '750', '850'], a: '650' },
        { q: '12√ó8=?', o: ['86', '96', '106', '116'], a: '96' },
        { q: '144√∑12=?', o: ['10', '11', '12', '13'], a: '12' },
        { q: '500ÂÜÜ„ÅÆ20%„ÅØÔºü', o: ['50ÂÜÜ', '100ÂÜÜ', '150ÂÜÜ', '200ÂÜÜ'], a: '100ÂÜÜ' },
        { q: 'ÊôÇÈÄü60km„Åß2ÊôÇÈñìËµ∞„Çã„Å®‰ΩïkmÔºü', o: ['100km', '120km', '140km', '160km'], a: '120km' },
        // Êó•Êú¨„ÅÆÂú∞ÁêÜ
        { q: 'Êó•Êú¨„Åß‰∏ÄÁï™È´ò„ÅÑÂ±±„ÅØÔºü', o: ['ÂØåÂ£´Â±±', 'ÂåóÂ≤≥', 'Êßç„É∂Â≤≥', 'ÁôΩÂ±±'], a: 'ÂØåÂ£´Â±±' },
        { q: 'Êó•Êú¨„Åß‰∏ÄÁï™Â§ß„Åç„ÅÑÈÉΩÈÅìÂ∫úÁúå„ÅØÔºü', o: ['ÂåóÊµ∑ÈÅì', 'Â≤©ÊâãÁúå', 'Èï∑ÈáéÁúå', 'Êñ∞ÊΩüÁúå'], a: 'ÂåóÊµ∑ÈÅì' },
        { q: 'Êó•Êú¨„Åß‰∏ÄÁï™Â∞è„Åï„ÅÑÁúå„ÅØÔºü', o: ['Ê≤ñÁ∏ÑÁúå', 'Êù±‰∫¨ÈÉΩ', 'È¶ôÂ∑ùÁúå', 'Â§ßÈò™Â∫ú'], a: 'È¶ôÂ∑ùÁúå' },
        { q: 'Êó•Êú¨„ÅÆÈ¶ñÈÉΩ„ÅØÔºü', o: ['Â§ßÈò™', '‰∫¨ÈÉΩ', 'Êù±‰∫¨', 'ÂêçÂè§Â±ã'], a: 'Êù±‰∫¨' },
        { q: '„Çø„Ç§„ÅÆÈ¶ñÈÉΩ„ÅØÔºü', o: ['„Éè„Éé„Ç§', '„Éê„É≥„Ç≥„ÇØ', '„Éû„Éã„É©', '„Ç∏„É£„Ç´„É´„Çø'], a: '„Éê„É≥„Ç≥„ÇØ' },
        // ‰∏ñÁïå
        { q: 'Ëá™Áî±„ÅÆÂ•≥Á•û„Åå„ÅÇ„ÇãÂõΩ„ÅØÔºü', o: ['„Ç§„ÇÆ„É™„Çπ', '„Éï„É©„É≥„Çπ', '„Ç¢„É°„É™„Ç´', '„Ç§„Çø„É™„Ç¢'], a: '„Ç¢„É°„É™„Ç´' },
        { q: '„Éî„É©„Éü„ÉÉ„Éâ„Åå„ÅÇ„ÇãÂõΩ„ÅØÔºü', o: ['„Ç§„É≥„Éâ', '„ÇÆ„É™„Ç∑„É£', '„Ç®„Ç∏„Éó„Éà', '„Ç§„Çø„É™„Ç¢'], a: '„Ç®„Ç∏„Éó„Éà' },
        { q: '‰∏ñÁïå„Åß‰∏ÄÁï™‰∫∫Âè£„ÅåÂ§ö„ÅÑÂõΩ„ÅØÔºü', o: ['„Ç§„É≥„Éâ', '‰∏≠ÂõΩ', '„Ç¢„É°„É™„Ç´', '„Ç§„É≥„Éâ„Éç„Ç∑„Ç¢'], a: '„Ç§„É≥„Éâ' },
        { q: '„Éë„Çπ„Çø„ÅÆÁô∫Á••ÂõΩ„ÅØÔºü', o: ['„Éï„É©„É≥„Çπ', '„Çπ„Éö„Ç§„É≥', '„Ç§„Çø„É™„Ç¢', '„ÇÆ„É™„Ç∑„É£'], a: '„Ç§„Çø„É™„Ç¢' },
        { q: '„Ç´„É¨„Éº„ÅÆÁô∫Á••ÂõΩ„ÅØÔºü', o: ['Êó•Êú¨', '„Ç§„ÇÆ„É™„Çπ', '„Ç§„É≥„Éâ', '„Çø„Ç§'], a: '„Ç§„É≥„Éâ' },
        // „Çπ„Éù„Éº„ÉÑ
        { q: '„Çµ„ÉÉ„Ç´„Éº„ÅØ1„ÉÅ„Éº„É†‰Ωï‰∫∫Ôºü', o: ['9‰∫∫', '10‰∫∫', '11‰∫∫', '12‰∫∫'], a: '11‰∫∫' },
        { q: 'ÈáéÁêÉ„ÅØ1„ÉÅ„Éº„É†‰Ωï‰∫∫Ôºü', o: ['8‰∫∫', '9‰∫∫', '10‰∫∫', '11‰∫∫'], a: '9‰∫∫' },
        { q: '„Éê„Çπ„Ç±„ÉÉ„Éà„Éú„Éº„É´„ÅØ1„ÉÅ„Éº„É†‰Ωï‰∫∫Ôºü', o: ['4‰∫∫', '5‰∫∫', '6‰∫∫', '7‰∫∫'], a: '5‰∫∫' },
        { q: '„Ç™„É™„É≥„Éî„ÉÉ„ÇØ„ÅØ‰ΩïÂπ¥„Åî„Å®Ôºü', o: ['2Âπ¥', '3Âπ¥', '4Âπ¥', '5Âπ¥'], a: '4Âπ¥' },
        // È£ü„ÅπÁâ©
        { q: '„Éì„Éº„É´„ÅÆ‰∏ªÂéüÊñô„ÅØÔºü', o: ['Á±≥', 'È∫¶', '„Å®„ÅÜ„ÇÇ„Çç„Åì„Åó', 'Ëäã'], a: 'È∫¶' },
        { q: 'Á¥çË±Ü„ÅØ‰Ωï„Åã„Çâ„Åß„Åç„ÇãÔºü', o: ['Â∞èÈ∫¶', 'Â§ßË±Ü', 'Á±≥', '„Å®„ÅÜ„ÇÇ„Çç„Åì„Åó'], a: 'Â§ßË±Ü' },
        { q: '„É©„Éº„É°„É≥„ÅÆ„Äå„Å®„Çì„Åì„Å§„Äç„ÅØ‰Ωï„ÅÆÈ™®Ôºü', o: ['Áâõ', 'È∂è', 'Ë±ö', 'È≠ö'], a: 'Ë±ö' },
        { q: '„ÉØ„Ç§„É≥„ÅØ‰Ωï„Åã„Çâ„Åß„Åç„ÇãÔºü', o: ['„Çä„Çì„Åî', '„Å∂„Å©„ÅÜ', '„Ç™„É¨„É≥„Ç∏', '„ÇÇ„ÇÇ'], a: '„Å∂„Å©„ÅÜ' },
        // ÁîüÊ¥ª
        { q: 'Ë≠¶ÂØü„ÅÆÈõªË©±Áï™Âè∑„ÅØÔºü', o: ['110', '119', '118', '117'], a: '110' },
        { q: 'ÊïëÊÄ•Ëªä„ÅÆÈõªË©±Áï™Âè∑„ÅØÔºü', o: ['110', '119', '118', '117'], a: '119' },
        { q: 'Êó•Êú¨„ÅßËªä„ÅØÈÅìË∑Ø„ÅÆ„Å©„Å°„ÇâÂÅ¥„ÇíËµ∞Ë°å„Åô„ÇãÔºü', o: ['Â∑¶ÂÅ¥', 'Âè≥ÂÅ¥', '‰∏≠Â§Æ', 'Ê±∫„Åæ„Çä„Å™„Åó'], a: 'Â∑¶ÂÅ¥' },
        { q: 'Ê∂àË≤ªÁ®é„ÅØ‰Ωï%Ôºü', o: ['5%', '8%', '10%', '15%'], a: '10%' },
        // ÂãïÁâ©
        { q: '„Éë„É≥„ÉÄ„ÅÆ‰∏ªÈ£ü„ÅØÔºü', o: ['ËÇâ', 'Á´π', 'ÊûúÁâ©', 'È≠ö'], a: 'Á´π' },
        { q: '‰∏ñÁïåÊúÄÂ§ß„ÅÆÂãïÁâ©„ÅØÔºü', o: ['„Ç¢„Éï„É™„Ç´„Çæ„Ç¶', '„Ç∑„É≠„Éä„Ç¨„Çπ„ÇØ„Ç∏„É©', '„Ç≠„É™„É≥', '„Ç∏„É≥„Éô„Ç®„Ç∂„É°'], a: '„Ç∑„É≠„Éä„Ç¨„Çπ„ÇØ„Ç∏„É©' },
        { q: 'ÁöáÂ∏ù„Éö„É≥„ÇÆ„É≥„ÅßÂçµ„ÇíÊ∏©„ÇÅ„Çã„ÅÆ„ÅØ„Ç™„ÇπÔºü„É°„ÇπÔºü', o: ['„Ç™„Çπ', '„É°„Çπ', '‰∏°Êñπ', 'Ê∏©„ÇÅ„Å™„ÅÑ'], a: '„Ç™„Çπ' },
        { q: '„Çø„Ç≥„ÅÆË∂≥„ÅØ‰ΩïÊú¨Ôºü', o: ['6Êú¨', '8Êú¨', '10Êú¨', '12Êú¨'], a: '8Êú¨' },
        // ËøΩÂä†ÂïèÈ°åÔºà20ÂïèÔºâ
        { q: '„Äå‰∏âÊ®©ÂàÜÁ´ã„Äç„ÅÆ‰∏âÊ®©„Åß„Å™„ÅÑ„ÇÇ„ÅÆ„ÅØÔºü', o: ['Á´ãÊ≥ï', 'Ë°åÊîø', 'Âè∏Ê≥ï', 'ÁµåÊ∏à'], a: 'ÁµåÊ∏à' },
        { q: '„Éé„Éº„Éô„É´Ë≥û„ÇíÂâµË®≠„Åó„ÅüÂõΩ„ÅØÔºü', o: ['„Ç¢„É°„É™„Ç´', '„Çπ„Ç¶„Çß„Éº„Éá„É≥', '„Ç§„ÇÆ„É™„Çπ', '„Éâ„Ç§„ÉÑ'], a: '„Çπ„Ç¶„Çß„Éº„Éá„É≥' },
        { q: '„ÄåÊ∫êÊ∞èÁâ©Ë™û„Äç„ÅÆ‰ΩúËÄÖ„ÅØÔºü', o: ['Ê∏ÖÂ∞ëÁ¥çË®Ä', 'Á¥´ÂºèÈÉ®', 'ÂíåÊ≥âÂºèÈÉ®', 'Â∞èÈáéÂ∞èÁî∫'], a: 'Á¥´ÂºèÈÉ®' },
        { q: '‰∫∫‰Ωì„ÅßÊúÄ„ÇÇÂ§ß„Åç„ÅÑËáìÂô®„ÅØÔºü', o: ['ÂøÉËáì', 'ËÇùËáì', 'ËÉÉ', 'ËÖ∏'], a: 'ËÇùËáì' },
        { q: '‰∏ñÁïå„Åß‰∏ÄÁï™Â§ß„Åç„ÅÑÂõΩ„ÅØÔºü', o: ['‰∏≠ÂõΩ', '„Ç¢„É°„É™„Ç´', '„É≠„Ç∑„Ç¢', '„Ç´„Éä„ÉÄ'], a: '„É≠„Ç∑„Ç¢' },
        { q: '„Ç®„ÉÉ„Éï„Çß„É´Â°î„Åå„ÅÇ„ÇãÂõΩ„ÅØÔºü', o: ['„Ç§„Çø„É™„Ç¢', '„Éï„É©„É≥„Çπ', '„Éâ„Ç§„ÉÑ', '„Çπ„Éö„Ç§„É≥'], a: '„Éï„É©„É≥„Çπ' },
        { q: '‰∏ñÁïå‰∏ÄÈï∑„ÅÑÂ∑ù„ÅØÔºü', o: ['„Ç¢„Éû„Çæ„É≥Â∑ù', '„Éä„Ç§„É´Â∑ù', 'Èï∑Ê±ü', '„Éü„Ç∑„Ç∑„ÉÉ„ÉîÂ∑ù'], a: '„Éä„Ç§„É´Â∑ù' },
        { q: 'H2O„Å®„ÅØ‰ΩïÔºü', o: ['Ê∞¥', 'Â°©', 'Á†ÇÁ≥ñ', 'ÈÖ∏Á¥†'], a: 'Ê∞¥' },
        { q: 'Âú∞ÁêÉ„ÅÆË°õÊòü„ÅØÔºü', o: ['Â§™ÈôΩ', 'Êúà', 'ÁÅ´Êòü', 'ÈáëÊòü'], a: 'Êúà' },
        { q: 'ÂÖÉÁ¥†Ë®òÂè∑„ÄåAu„Äç„ÅØ‰ΩïÔºü', o: ['ÈäÄ', 'Èáë', 'ÈäÖ', 'ÈâÑ'], a: 'Èáë' },
        { q: 'Èñ¢„É∂Âéü„ÅÆÊà¶„ÅÑ„ÅØË•øÊö¶‰ΩïÂπ¥Ôºü', o: ['1500Âπ¥', '1600Âπ¥', '1700Âπ¥', '1800Âπ¥'], a: '1600Âπ¥' },
        { q: 'ÊòéÊ≤ªÁ∂≠Êñ∞„ÅØ‰Ωï‰∏ñÁ¥ÄÔºü', o: ['17‰∏ñÁ¥Ä', '18‰∏ñÁ¥Ä', '19‰∏ñÁ¥Ä', '20‰∏ñÁ¥Ä'], a: '19‰∏ñÁ¥Ä' },
        { q: 'ÈéñÂõΩ„ÇíË°å„Å£„ÅüÂ∞ÜËªç„ÅØÔºü', o: ['Âæ≥Â∑ùÂÆ∂Â∫∑', 'Âæ≥Â∑ùÂÆ∂ÂÖâ', 'Âæ≥Â∑ùÂêâÂÆó', 'Âæ≥Â∑ùÁ∂±Âêâ'], a: 'Âæ≥Â∑ùÂÆ∂ÂÖâ' },
        { q: 'Âπ≥ÂÆâ‰∫¨„Åå„ÅÇ„Å£„ÅüÂ†¥ÊâÄ„ÅØÔºü', o: ['Â•àËâØ', '‰∫¨ÈÉΩ', 'Â§ßÈò™', 'ÈéåÂÄâ'], a: '‰∫¨ÈÉΩ' },
        { q: '1„Éù„É≥„Éâ„ÅØÁ¥Ñ‰Ωï„Ç∞„É©„É†Ôºü', o: ['250g', '350g', '450g', '550g'], a: '450g' },
        { q: '1„Ç§„É≥„ÉÅ„ÅØÁ¥Ñ‰ΩïcmÔºü', o: ['1.5cm', '2.0cm', '2.5cm', '3.0cm'], a: '2.5cm' },
        { q: 'Á¥ÖËå∂„ÅÆÁî£Âú∞„Å®„Åó„Å¶ÊúâÂêç„Å™ÂõΩ„ÅØÔºü', o: ['„Ç§„É≥„Éâ', '„Éñ„É©„Ç∏„É´', '„Ç®„ÉÅ„Ç™„Éî„Ç¢', '„Éô„Éà„Éä„É†'], a: '„Ç§„É≥„Éâ' },
        { q: '„Ç≥„Éº„Éí„Éº„ÅÆÁî£Âú∞„Å®„Åó„Å¶ÊúâÂêç„Å™ÂõΩ„ÅØÔºü', o: ['„Ç§„É≥„Éâ', '„Éñ„É©„Ç∏„É´', '‰∏≠ÂõΩ', '„É°„Ç≠„Ç∑„Ç≥'], a: '„Éñ„É©„Ç∏„É´' },
        { q: '„Éê„É¨„Éº„Éú„Éº„É´„ÅØ1„ÉÅ„Éº„É†‰Ωï‰∫∫Ôºü', o: ['5‰∫∫', '6‰∫∫', '7‰∫∫', '8‰∫∫'], a: '6‰∫∫' },
        { q: '„É©„Ç∞„Éì„Éº„ÅØ1„ÉÅ„Éº„É†‰Ωï‰∫∫Ôºü', o: ['11‰∫∫', '13‰∫∫', '15‰∫∫', '17‰∫∫'], a: '15‰∫∫' },
        // Èù¢ÁôΩÈõëÂ≠¶„ÇØ„Ç§„Ç∫Ôºà„Éà„É™„Éì„Ç¢Ôºâ
        { q: '„É≠„Éº„Éû„Å´„ÅÇ„Çã„ÄåÁúüÂÆü„ÅÆÂè£„Äç„ÅÆÊ≠£‰Ωì„ÅØÔºü', o: ['Â§ßÁêÜÁü≥„ÅÆÂΩ´Âàª', '„Éû„É≥„Éõ„Éº„É´„ÅÆËìã', '‰∫ïÊà∏„ÅÆËìã', 'Á•ûÊÆø„ÅÆ‰∏ÄÈÉ®'], a: '„Éû„É≥„Éõ„Éº„É´„ÅÆËìã' },
        { q: '„Éë„É≥„ÉÄ„ÅÆ„Åó„Å£„ÅΩ„ÅØ‰ΩïËâ≤Ôºü', o: ['Èªí', 'ÁôΩ', 'Ëå∂Ëâ≤', 'ÁÅ∞Ëâ≤'], a: 'ÁôΩ' },
        { q: '„É©„ÇØ„ÉÄ„ÅÆ„Åì„Å∂„ÅÆ‰∏≠Ë∫´„ÅØÔºü', o: ['Ê∞¥', 'ËÑÇËÇ™', 'Á©∫Ê∞ó', 'Á≠ãËÇâ'], a: 'ËÑÇËÇ™' },
        { q: '„Éë„É≥„ÉÄ„ÅÆÊåá„ÅØ‰ΩïÊú¨Ôºü', o: ['5Êú¨', '6Êú¨', '7Êú¨', '8Êú¨'], a: '7Êú¨' },
        { q: '„Çµ„Ç§„Ç≥„É≠„ÅÆ1„ÅÆÂèçÂØæÂÅ¥„ÅØÔºü', o: ['4', '5', '6', '2'], a: '6' },
        { q: '„Ç≠„É™„É≥„ÅÆÁù°Áú†ÊôÇÈñì„ÅØ1Êó•Á¥Ñ‰ΩïÂàÜÔºü', o: ['Á¥Ñ20ÂàÜ', 'Á¥Ñ2ÊôÇÈñì', 'Á¥Ñ6ÊôÇÈñì', 'Á¥Ñ10ÊôÇÈñì'], a: 'Á¥Ñ20ÂàÜ' },
        { q: '„Ç¥„É™„É©„ÅÆË°ÄÊ∂≤Âûã„ÅØÂÖ®ÈÉ®‰ΩïÂûãÔºü', o: ['AÂûã', 'BÂûã', 'OÂûã', 'ABÂûã'], a: 'BÂûã' },
        { q: '„Ç´„Çø„ÉÑ„É†„É™„ÅÆÊ≠Ø„ÅØÁ¥Ñ‰ΩïÊú¨Ôºü', o: ['Á¥Ñ100Êú¨', 'Á¥Ñ2000Êú¨', 'Á¥Ñ1‰∏áÊú¨', 'Á¥Ñ2‰∏áÊú¨'], a: 'Á¥Ñ2‰∏áÊú¨' },
        { q: '‰∏ñÁïå‰∏ÄÈ´ò‰æ°„Å™„Ç≥„Éº„Éí„ÉºË±Ü„ÅØ‰Ωï„ÅÆÁ≥û„Åã„ÇâÊé°ÂèñÔºü', o: ['Ë±°', '„Ç∏„É£„Ç≥„Ç¶„Éç„Ç≥', '„Ç≥„Ç¶„É¢„É™', '„Çµ„É´'], a: '„Ç∏„É£„Ç≥„Ç¶„Éç„Ç≥' },
        { q: 'ÁèæÂ≠ò„Åô„Çã‰∏ñÁïåÊúÄÂè§„ÅÆÂØøÂè∏Â±ã„Åå„ÅÇ„ÇãÁúå„ÅØÔºü', o: ['Êù±‰∫¨ÈÉΩ', 'Â§ßÈò™Â∫ú', 'Â•àËâØÁúå', '‰∫¨ÈÉΩÂ∫ú'], a: 'Â•àËâØÁúå' },
        { q: '‰∏ñÁïåÂàù„ÅÆÂõûËª¢ÂØøÂè∏Â∫ó„Åå„Ç™„Éº„Éó„É≥„Åó„ÅüÂ†¥ÊâÄ„ÅØÔºü', o: ['Êù±‰∫¨', 'Â§ßÈò™', 'ÂåóÊµ∑ÈÅì', 'Á¶èÂ≤°'], a: 'Â§ßÈò™' },
        { q: '„Ç∑„É≠„ÇØ„ÉûÔºà„Éõ„ÉÉ„Ç≠„Éß„ÇØ„Ç∞„ÉûÔºâ„ÅÆËÇå„ÅÆËâ≤„ÅØÔºü', o: ['ÁôΩ', 'Èªí', '„Éî„É≥„ÇØ', 'Ëå∂Ëâ≤'], a: 'Èªí' },
        { q: '„Éï„É©„Éü„É≥„Ç¥„ÅåÁâáË∂≥„ÅßÁ´ã„Å§ÁêÜÁî±„ÅØÔºü', o: ['„Éê„É©„É≥„Çπ„ÅåËâØ„ÅÑ', '‰ΩìÊ∏©„Çí‰øù„Å§', '„Ç´„ÉÉ„Ç≥„ÅÑ„ÅÑ„Åã„Çâ', 'Êïµ„Åã„ÇâË∫´„ÇíÂÆà„Çã'], a: '‰ΩìÊ∏©„Çí‰øù„Å§' },
        { q: '„ÅäÂØøÂè∏„ÅÆ„Äå‰∏ÄË≤´„Äç„ÅÆÁî±Êù•„ÅØÔºü', o: ['Èáç„Åï', '„ÅäÈáë„ÅÆÂçò‰Ωç', 'È≠ö„ÅÆÊï∞„ÅàÊñπ', 'ËÅ∑‰∫∫„ÅÆÊäÄ'], a: '„ÅäÈáë„ÅÆÂçò‰Ωç' },
        { q: 'ÈÉµ‰æø„Éù„Çπ„Éà„ÅåËµ§„ÅÑÁêÜÁî±„ÅØÔºü', o: ['ÊÉÖÁÜ±„ÅÆËâ≤', 'ÁõÆÁ´ã„Å§„Åã„Çâ', '„Ç§„ÇÆ„É™„Çπ„ÅÆÁúü‰ºº', 'ÁÅ´‰∫ã„Å®ÈñìÈÅï„Åà„Å™„ÅÑ'], a: '„Ç§„ÇÆ„É™„Çπ„ÅÆÁúü‰ºº' },
        // ‰∏ÄËà¨Â∏∏Ë≠ò„ÇØ„Ç§„Ç∫ÔºàËøΩÂä†Ôºâ
        { q: '‰∏ñÁïå‰∏âÂ§ßÁèçÂë≥„ÅØ„Äå„Ç≠„É£„Éì„Ç¢„Äç„Äå„Éà„É™„É•„Éï„Äç„Å®„ÇÇ„ÅÜ1„Å§„ÅØÔºü', o: ['„Ç¢„É≥„ÉÅ„Éß„Éì', '„Éï„Ç©„Ç¢„Ç∞„É©', '„Éû„ÉÑ„Çø„Ç±', '„Ç§„ÇØ„É©'], a: '„Éï„Ç©„Ç¢„Ç∞„É©' },
        { q: '60Ê≠≥„ÅØÈÇÑÊö¶„ÄÇ„Åß„ÅØ70Ê≠≥„ÅØÔºü', o: ['Âè§Â∏å', 'ÂÇòÂØø', 'ÂçíÂØø', 'ÁôΩÂØø'], a: 'Âè§Â∏å' },
        { q: '5Êúà„ÅØ„ÄåÁöêÊúà„Äç„ÄÅ12Êúà„ÅØ„ÄåÂ∏´Ëµ∞„Äç„ÄÇ„Åß„ÅØ9Êúà„ÅØÔºü', o: ['Èï∑Êúà', 'ÈúúÊúà', 'Â¶ÇÊúà', 'Âº•Áîü'], a: 'Èï∑Êúà' },
        { q: 'ÂàùÂ§¢„ÅßÁ∏ÅËµ∑„ÅåËâØ„ÅÑ„Å®„Åï„Çå„ÇãÈ£ü„ÅπÁâ©„ÅØÔºü', o: ['Ëë°ËêÑ', 'ËåÑÂ≠ê', 'ËìÆÊ†π', 'Â§ßÊ†π'], a: 'ËåÑÂ≠ê' },
        { q: 'Êó•Êú¨„ÅÆÂàù‰ª£ÂÜÖÈñ£Á∑èÁêÜÂ§ßËá£„ÅØÔºü', o: ['Â§ßÈöàÈáç‰ø°', '‰ºäËó§ÂçöÊñá', 'Â±±ÁúåÊúâÊúã', 'ÈªíÁî∞Ê∏ÖÈöÜ'], a: '‰ºäËó§ÂçöÊñá' },
        { q: '„Ç§„ÇÆ„É™„Çπ„ÅÆ„ÅäÈáë„ÅÆÂçò‰Ωç„ÅØÔºü', o: ['„Éâ„É´', '„É´„Éî„Éº', '„Éù„É≥„Éâ', '„É¶„Éº„É≠'], a: '„Éù„É≥„Éâ' },
        { q: 'Ê¨°„ÅÆ„ÅÜ„Å°„Äå‰π≥Ë£ΩÂìÅ„Äç„Åß„ÅØ„Å™„ÅÑ„ÇÇ„ÅÆ„ÅØÔºü', o: ['„Éû„Éº„Ç¨„É™„É≥', '„Éê„Çø„Éº', '„ÉÅ„Éº„Ç∫', '„É®„Éº„Ç∞„É´„Éà'], a: '„Éû„Éº„Ç¨„É™„É≥' },
        { q: 'Ê¨°„ÅÆ„ÅÜ„Å°„ÄåÂì∫‰π≥È°û„Äç„Åß„ÅØ„Å™„ÅÑ„ÅÆ„ÅØÔºü', o: ['„Ç§„É´„Ç´', '„Çµ„É°', '„Ç∑„É£„ÉÅ', '„ÇØ„Ç∏„É©'], a: '„Çµ„É°' },
        { q: '„Çπ„Éû„Éº„Éà„Éï„Ç©„É≥„ÅÆ„Äå„Çπ„Éû„Éº„Éà„Äç„ÅÆÊÑèÂë≥„ÅØÔºü', o: ['Ë≥¢„ÅÑ', 'ÈÄü„ÅÑ', 'Â∞è„Åï„ÅÑ', 'ËñÑ„ÅÑ'], a: 'Ë≥¢„ÅÑ' },
        { q: 'Êó•Êú¨„ÅßÁ•ùÊó•„Åå1Êó•„ÇÇ„Å™„ÅÑÊúà„ÅØ„ÅÑ„Åè„Å§Ôºü', o: ['1„Å§', '2„Å§', '3„Å§', '4„Å§'], a: '2„Å§' },
    ],
    extra: [
        // ÁßëÂ≠¶
        { q: 'Ê∞¥„ÅÆÂåñÂ≠¶Âºè„ÅØÔºü', o: ['H2O', 'CO2', 'NaCl', 'O2'], a: 'H2O' },
        { q: 'ÂÖâ„ÅÆÈÄü„Åï„ÅØÁßíÈÄüÁ¥Ñ‰ΩïkmÔºü', o: ['3‰∏ákm', '30‰∏ákm', '300‰∏ákm', '3000‰∏ákm'], a: '30‰∏ákm' },
        { q: 'DNA„ÅÆÊ≠£ÂºèÂêçÁß∞„ÅØÔºü', o: ['„Éá„Ç™„Ç≠„Ç∑„É™„ÉúÊ†∏ÈÖ∏', '„É™„ÉúÊ†∏ÈÖ∏', '„Ç¢„Éü„ÉéÈÖ∏', '„Çø„É≥„Éë„ÇØË≥™'], a: '„Éá„Ç™„Ç≠„Ç∑„É™„ÉúÊ†∏ÈÖ∏' },
        { q: 'ÂÖÉÁ¥†Ë®òÂè∑„ÄåAu„Äç„ÅØ‰ΩïÔºü', o: ['ÈäÄ', 'Èáë', 'ÈäÖ', 'ÈâÑ'], a: 'Èáë' },
        { q: 'ÂÖÉÁ¥†Ë®òÂè∑„ÄåFe„Äç„ÅØ‰ΩïÔºü', o: ['ÈäÄ', 'Èáë', 'ÈäÖ', 'ÈâÑ'], a: 'ÈâÑ' },
        { q: 'Áµ∂ÂØæÈõ∂Â∫¶„ÅØÁ¥Ñ‰ΩïÂ∫¶Ôºü', o: ['-100Â∫¶', '-173Â∫¶', '-273Â∫¶', '-373Â∫¶'], a: '-273Â∫¶' },
        // Ë®àÁÆó
        { q: '17√ó19=?', o: ['303', '313', '323', '333'], a: '323' },
        { q: '13√ó17=?', o: ['201', '211', '221', '231'], a: '221' },
        // Ê≠¥Âè≤
        { q: 'Èñ¢„É∂Âéü„ÅÆÊà¶„ÅÑ„ÅØ‰ΩïÂπ¥Ôºü', o: ['1500Âπ¥', '1600Âπ¥', '1700Âπ¥', '1800Âπ¥'], a: '1600Âπ¥' },
        { q: 'Êú¨ËÉΩÂØ∫„ÅÆÂ§â„ÅßÂÄí„Çå„Åü„ÅÆ„ÅØÔºü', o: ['Ë±äËá£ÁßÄÂêâ', 'Âæ≥Â∑ùÂÆ∂Â∫∑', 'ÁπîÁî∞‰ø°Èï∑', 'Ê≠¶Áî∞‰ø°ÁéÑ'], a: 'ÁπîÁî∞‰ø°Èï∑' },
        { q: 'ÈéåÂÄâÂπïÂ∫ú„ÇíÈñã„ÅÑ„Åü„ÅÆ„ÅØÔºü', o: ['Ê∫êÈ†ºÊúù', 'Ê∫êÁæ©Áµå', 'Âπ≥Ê∏ÖÁõõ', 'Ë∂≥Âà©Â∞äÊ∞è'], a: 'Ê∫êÈ†ºÊúù' },
        { q: 'Á¨¨‰∫åÊ¨°‰∏ñÁïåÂ§ßÊà¶„ÅåÁµÇ„Çè„Å£„ÅüÂπ¥„ÅØÔºü', o: ['1943Âπ¥', '1944Âπ¥', '1945Âπ¥', '1946Âπ¥'], a: '1945Âπ¥' },
        { q: '„Éï„É©„É≥„ÇπÈù©ÂëΩ„ÅØ‰ΩïÂπ¥Ôºü', o: ['1689Âπ¥', '1789Âπ¥', '1889Âπ¥', '1989Âπ¥'], a: '1789Âπ¥' },
        // ÊñáÂ≠¶„ÉªËä∏Ë°ì
        { q: '„ÄåÂêæËº©„ÅØÁå´„Åß„ÅÇ„Çã„Äç„ÅÆ‰ΩúËÄÖ„ÅØÔºü', o: ['Ëä•Â∑ùÈæç‰πã‰ªã', 'Â§èÁõÆÊº±Áü≥', 'Â§™ÂÆ∞Ê≤ª', 'Â∑ùÁ´ØÂ∫∑Êàê'], a: 'Â§èÁõÆÊº±Áü≥' },
        { q: '„ÄåËµ∞„Çå„É°„É≠„Çπ„Äç„ÅÆ‰ΩúËÄÖ„ÅØÔºü', o: ['Ëä•Â∑ùÈæç‰πã‰ªã', 'Â§èÁõÆÊº±Áü≥', 'Â§™ÂÆ∞Ê≤ª', '‰∏âÂ≥∂Áî±Á¥ÄÂ§´'], a: 'Â§™ÂÆ∞Ê≤ª' },
        { q: '„É¢„Éä„É™„Ç∂„ÇíÊèè„ÅÑ„Åü„ÅÆ„ÅØÔºü', o: ['„Éî„Ç´„ÇΩ', '„Ç¥„ÉÉ„Éõ', '„ÉÄ„É¥„Ç£„É≥„ÉÅ', '„Éü„Ç±„É©„É≥„Ç∏„Çß„É≠'], a: '„ÉÄ„É¥„Ç£„É≥„ÉÅ' },
        { q: '„ÄåÂè´„Å≥„Äç„ÇíÊèè„ÅÑ„Åü„ÅÆ„ÅØÔºü', o: ['„Éî„Ç´„ÇΩ', '„É†„É≥„ÇØ', '„Ç¥„ÉÉ„Éõ', '„É¢„Éç'], a: '„É†„É≥„ÇØ' },
        // Âú∞ÁêÜ
        { q: '‰∏ñÁïå‰∏ÄÈ´ò„ÅÑÂ±±„ÅØÔºü', o: ['K2', '„Ç®„Éô„É¨„Çπ„Éà', '„Éû„ÉÉ„Çø„Éº„Éõ„É´„É≥', '„É¢„É≥„Éñ„É©„É≥'], a: '„Ç®„Éô„É¨„Çπ„Éà' },
        { q: '‰∏ñÁïå‰∏ÄÈï∑„ÅÑÂ∑ù„ÅØÔºü', o: ['„Ç¢„Éû„Çæ„É≥Â∑ù', '„Éä„Ç§„É´Â∑ù', 'Èï∑Ê±ü', '„Éü„Ç∑„Ç∑„ÉÉ„ÉîÂ∑ù'], a: '„Éä„Ç§„É´Â∑ù' },
        { q: '‰∏ñÁïå‰∏ÄÂ§ß„Åç„ÅÑÁ†ÇÊº†„ÅØÔºü', o: ['„Ç¥„ÉìÁ†ÇÊº†', '„Çµ„Éè„É©Á†ÇÊº†', '„Ç¢„Çø„Ç´„ÉûÁ†ÇÊº†', '„Ç´„É©„Éè„É™Á†ÇÊº†'], a: '„Çµ„Éè„É©Á†ÇÊº†' },
        { q: '‰∏ñÁïå‰∏ÄÊ∑±„ÅÑÊµ∑Ê∫ù„ÅØÔºü', o: ['Êó•Êú¨Êµ∑Ê∫ù', '„Éû„É™„Ç¢„ÉäÊµ∑Ê∫ù', '„Éï„Ç£„É™„Éî„É≥Êµ∑Ê∫ù', '„Éà„É≥„Ç¨Êµ∑Ê∫ù'], a: '„Éû„É™„Ç¢„ÉäÊµ∑Ê∫ù' },
        // ÈõëÂ≠¶
        { q: 'Â∞ÜÊ£ã„ÅÆÈßí„ÅØÂÖ®ÈÉ®„Åß‰ΩïÊûöÔºü', o: ['30Êûö', '40Êûö', '50Êûö', '60Êûö'], a: '40Êûö' },
        { q: '„Éà„É©„É≥„Éó„ÅØÂÖ®ÈÉ®„Åß‰ΩïÊûöÔºüÔºà„Ç∏„Éß„Éº„Ç´„ÉºÈô§„ÅèÔºâ', o: ['48Êûö', '52Êûö', '54Êûö', '56Êûö'], a: '52Êûö' },
        { q: 'Âõ≤Á¢Å„ÅÆÁõ§„ÅØ‰ΩïË∑ØÔºü', o: ['15Ë∑Ø', '17Ë∑Ø', '19Ë∑Ø', '21Ë∑Ø'], a: '19Ë∑Ø' },
        // Ëã±Ë™û
        { q: '„ÄåWHO„Äç„ÅØ‰Ωï„ÅÆÁï•Ôºü', o: ['World Health Organization', 'World Help Organization', 'Wide Health Organization', 'World Hospital Organization'], a: 'World Health Organization' },
        // ËøΩÂä†ÂïèÈ°åÔºà20ÂïèÔºâ
        { q: '„ÄåÁæÖÁîüÈñÄ„Äç„ÅÆ‰ΩúËÄÖ„ÅØÔºü', o: ['Â§èÁõÆÊº±Áü≥', 'Ëä•Â∑ùÈæç‰πã‰ªã', 'Â§™ÂÆ∞Ê≤ª', 'Â∑ùÁ´ØÂ∫∑Êàê'], a: 'Ëä•Â∑ùÈæç‰πã‰ªã' },
        { q: '„Ç¢„Ç§„É≥„Ç∑„É•„Çø„Ç§„É≥„ÅÆÊúâÂêç„Å™Âºè„ÅØÔºü', o: ['E=mc', 'E=mc¬≤', 'E=m¬≤c', 'E¬≤=mc'], a: 'E=mc¬≤' },
        { q: 'ÈáèÂ≠êÂäõÂ≠¶„ÅÆÁà∂„Å®Âëº„Å∞„Çå„Çã„ÅÆ„ÅØÔºü', o: ['„Éú„Éº„Ç¢', '„Éó„É©„É≥„ÇØ', '„Éè„Ç§„Çº„É≥„Éô„É´„ÇØ', '„Ç∑„É•„É¨„Éá„Ç£„É≥„Ç¨„Éº'], a: '„Éó„É©„É≥„ÇØ' },
        { q: 'Êó•Êú¨ÂõΩÊÜ≤Ê≥ï„ÅÆÂÖ¨Â∏ÉÊó•„ÅØÔºü', o: ['11Êúà3Êó•', '5Êúà3Êó•', '2Êúà11Êó•', '4Êúà29Êó•'], a: '11Êúà3Êó•' },
        { q: '„ÄåÊàëÊÄù„ÅÜ„ÄÅ„ÇÜ„Åà„Å´Êàë„ÅÇ„Çä„Äç„ÅÆÂì≤Â≠¶ËÄÖ„ÅØÔºü', o: ['„Ç´„É≥„Éà', '„Éá„Ç´„É´„Éà', '„Éã„Éº„ÉÅ„Çß', '„ÇΩ„ÇØ„É©„ÉÜ„Çπ'], a: '„Éá„Ç´„É´„Éà' },
        { q: '‰∫∫‰Ωì„ÅÆÈ™®„ÅÆÊï∞„ÅØÊàê‰∫∫„ÅßÁ¥Ñ‰ΩïÊú¨Ôºü', o: ['106Êú¨', '206Êú¨', '306Êú¨', '406Êú¨'], a: '206Êú¨' },
        { q: '„Äå„Ç≤„É´„Éã„Ç´„Äç„ÇíÊèè„ÅÑ„ÅüÁîªÂÆ∂„ÅØÔºü', o: ['„Ç¥„ÉÉ„Éõ', '„Éî„Ç´„ÇΩ', '„É¢„Éç', '„ÉÄ„É™'], a: '„Éî„Ç´„ÇΩ' },
        { q: '„ÄåÂêõ‰∏ªË´ñ„Äç„ÅÆËëóËÄÖ„ÅØÔºü', o: ['„Éû„É´„ÇØ„Çπ', '„Éû„Ç≠„É£„Éô„É™', '„É´„ÇΩ„Éº', '„Éõ„ÉÉ„Éñ„Ç∫'], a: '„Éû„Ç≠„É£„Éô„É™' },
        { q: 'ÂÖâÂπ¥„Å®„ÅØ‰Ωï„ÅÆÂçò‰ΩçÔºü', o: ['ÊôÇÈñì', 'Ë∑ùÈõ¢', 'ÈÄüÂ∫¶', 'Ë≥™Èáè'], a: 'Ë∑ùÈõ¢' },
        { q: 'DNA„ÅÆ‰∫åÈáç„Çâ„Åõ„ÇìÊßãÈÄ†Áô∫Ë¶ãËÄÖ„ÅØÔºü', o: ['„É°„É≥„Éá„É´', '„ÉØ„Éà„ÇΩ„É≥„Å®„ÇØ„É™„ÉÉ„ÇØ', '„ÉÄ„Éº„Ç¶„Ç£„É≥', '„Éë„Çπ„ÉÑ„Éº„É´'], a: '„ÉØ„Éà„ÇΩ„É≥„Å®„ÇØ„É™„ÉÉ„ÇØ' },
        { q: '„Äå‰∏áÊúâÂºïÂäõ„ÅÆÊ≥ïÂâá„Äç„ÇíÁô∫Ë¶ã„Åó„Åü„ÅÆ„ÅØÔºü', o: ['„Ç¨„É™„É¨„Ç™', '„Éã„É•„Éº„Éà„É≥', '„Ç¢„Ç§„É≥„Ç∑„É•„Çø„Ç§„É≥', '„Ç±„Éó„É©„Éº'], a: '„Éã„É•„Éº„Éà„É≥' },
        { q: '„ÄåË≥áÊú¨Ë´ñ„Äç„ÅÆËëóËÄÖ„ÅØÔºü', o: ['„Ç¢„ÉÄ„É†„Éª„Çπ„Éü„Çπ', '„Éû„É´„ÇØ„Çπ', '„Ç±„Ç§„É≥„Ç∫', '„Éè„Ç§„Ç®„ÇØ'], a: '„Éû„É´„ÇØ„Çπ' },
        { q: '„ÄåÁ®Æ„ÅÆËµ∑Ê∫ê„Äç„ÅÆËëóËÄÖ„ÅØÔºü', o: ['„É°„É≥„Éá„É´', '„ÉÄ„Éº„Ç¶„Ç£„É≥', '„É©„Éû„É´„ÇØ', '„É™„É≥„Éç'], a: '„ÉÄ„Éº„Ç¶„Ç£„É≥' },
        { q: '„ÄåÁõ∏ÂØæÊÄßÁêÜË´ñ„Äç„ÇíÁô∫Ë°®„Åó„Åü„ÅÆ„ÅØÔºü', o: ['„Éã„É•„Éº„Éà„É≥', '„Ç¢„Ç§„É≥„Ç∑„É•„Çø„Ç§„É≥', '„Éõ„Éº„Ç≠„É≥„Ç∞', '„Éï„Ç°„Ç§„É≥„Éû„É≥'], a: '„Ç¢„Ç§„É≥„Ç∑„É•„Çø„Ç§„É≥' },
        { q: '1„É¢„É´„ÅÆÁ≤íÂ≠êÊï∞Ôºà„Ç¢„Éú„Ç¨„Éâ„É≠ÂÆöÊï∞Ôºâ„ÅØÁ¥Ñ‰ΩïÂÄãÔºü', o: ['6√ó10^20', '6√ó10^21', '6√ó10^22', '6√ó10^23'], a: '6√ó10^23' },
        // Ë∂ÖÈõ£Âïè„Éà„É™„Éì„Ç¢
        { q: '„É≠„Éº„Éû„ÅÆ„ÄåÁúüÂÆü„ÅÆÂè£„Äç„ÅØÂÖÉ„ÄÖ‰Ωï„Å´‰Ωø„Çè„Çå„Å¶„ÅÑ„ÅüÔºü', o: ['Âç†„ÅÑ', 'ÊéíÊ∞¥Ê∫ù„ÅÆËìã', 'Á•ûÊÆø„ÅÆÈñÄ', 'Ë£ÅÂà§„ÅÆÈÅìÂÖ∑'], a: 'ÊéíÊ∞¥Ê∫ù„ÅÆËìã' },
        { q: '„Éê„Éä„Éä„ÅØÊ§çÁâ©Â≠¶‰∏ä„ÅØ‰Ωï„Å´ÂàÜÈ°û„Åï„Çå„ÇãÔºü', o: ['ÊûúÁâ©', 'ÈáéËèú', 'Ëçâ', 'Êú®„ÅÆÂÆü'], a: 'Ëçâ' },
        { q: '‰∫∫Èñì„ÅÆËÑ≥„Åå1Êó•„Å´Ê∂àË≤ª„Åô„Çã„Ç´„É≠„É™„Éº„ÅØÁ¥Ñ‰ΩïkcalÔºü', o: ['100kcal', '300kcal', '500kcal', '800kcal'], a: '300kcal' },
        { q: '‰∏ñÁïå‰∏ÄÂ∞è„Åï„ÅÑÂõΩ„Éê„ÉÅ„Ç´„É≥Â∏ÇÂõΩ„ÅÆÈù¢Á©ç„ÅØÊù±‰∫¨„Éâ„Éº„É†Á¥Ñ‰ΩïÂÄãÂàÜÔºü', o: ['Á¥Ñ0.1ÂÄã', 'Á¥Ñ1ÂÄã', 'Á¥Ñ5ÂÄã', 'Á¥Ñ10ÂÄã'], a: 'Á¥Ñ1ÂÄã' },
        { q: '„Çø„Ç≥„ÅÆÂøÉËáì„ÅØ„ÅÑ„Åè„Å§„ÅÇ„ÇãÔºü', o: ['1„Å§', '2„Å§', '3„Å§', '4„Å§'], a: '3„Å§' },
        { q: 'ÈáëÈ≠ö„ÅÆË®òÊÜ∂Âäõ„ÅØÊúÄ‰Ωé„Åß„ÇÇ„Å©„Çå„Åè„Çâ„ÅÑÔºü', o: ['3Áßí', '3ÂàÜ', '3ÊôÇÈñì', '3„É∂Êúà'], a: '3„É∂Êúà' },
        { q: '„Éè„ÉÅ„Éü„ÉÑ„ÅØ‰ΩïÂπ¥Áµå„Å£„Å¶„ÇÇËÖê„Çâ„Å™„ÅÑÔºü', o: ['100Âπ¥', '1000Âπ¥', 'Ê∞∏ÈÅ†„Å´ËÖê„Çâ„Å™„ÅÑ', '50Âπ¥'], a: 'Ê∞∏ÈÅ†„Å´ËÖê„Çâ„Å™„ÅÑ' },
        { q: '‰∫∫Èñì„ÅÆ‰Ωì„ÅßÊúÄ„ÇÇÁ°¨„ÅÑÈÉ®ÂàÜ„ÅØÔºü', o: ['È™®', 'Ê≠Ø„ÅÆ„Ç®„Éä„É°„É´Ë≥™', 'Áà™', 'È´™„ÅÆÊØõ'], a: 'Ê≠Ø„ÅÆ„Ç®„Éä„É°„É´Ë≥™' },
        { q: '„Ç™„Éº„Çπ„Éà„É©„É™„Ç¢„Å´„ÅØ‰ΩïÁ®ÆÈ°û„ÅÆ„Ç´„É≥„Ç¨„É´„Éº„Åå„ÅÑ„ÇãÔºü', o: ['Á¥Ñ10Á®Æ', 'Á¥Ñ20Á®Æ', 'Á¥Ñ40Á®Æ', 'Á¥Ñ60Á®Æ'], a: 'Á¥Ñ40Á®Æ' },
        { q: 'ÊúÄ„ÇÇÈï∑„ÅèÈ£õ„Åπ„ÇãÈ≥•„Ç≠„Éß„ÇØ„Ç¢„Ç∏„Çµ„Ç∑„ÅÆ1Âπ¥„ÅÆÈ£õË°åË∑ùÈõ¢„ÅØÔºü', o: ['Á¥Ñ1‰∏ákm', 'Á¥Ñ5‰∏ákm', 'Á¥Ñ7‰∏ákm', 'Á¥Ñ10‰∏ákm'], a: 'Á¥Ñ7‰∏ákm' },
    ]
};

// 4. „Ç≤„Éº„É†„ÅÆÁä∂ÊÖã„Å´Èñ¢„Åô„ÇãÂ§âÊï∞
let board, currentPiece, currentQuiz, canControl, isGameOver, isGameCleared, feedbackElement, helpChances;
let isAnswerDisabled = false; // ÈñìÈÅï„ÅàÊôÇ„ÅÆÂõûÁ≠î‰∏çËÉΩ„Éï„É©„Ç∞
let isMuted = false; // „Éü„É•„Éº„ÉàÁä∂ÊÖã
let dropCounter, dropInterval, lastTime, animationFrameId;
let selectedAudience = 'lowerElem';
let selectedSpeed = 'easy';
let currentQuizBank = [];
let usedQuizIndexes = []; // ‰ΩøÁî®Ê∏à„Åø„ÇØ„Ç§„Ç∫„ÇíËøΩË∑°
let gameStartTime, wrongAnswerCount, helpUsed;
let correctAnswerCount, totalQuizCount; // Ê≠£Ëß£Êï∞„Å®Âá∫È°åÊï∞
let currentEnemy, enemyHp, enemyMaxHp; // Êïµ„Ç≠„É£„É©Èñ¢ÈÄ£
const quizContainer = document.getElementById('quiz-container');

// IQË®àÁÆóÈñ¢Êï∞Ôºà180‰ª•‰∏ä„ÅØË∂Ö‰∏äÊâã„ÅÑ‰∫∫„ÅÆ„ÅøÔºâ
function calculateIQ() {
    const damageDealt = enemyMaxHp - enemyHp;
    const damagePercent = damageDealt / enemyMaxHp;
    const answeredCount = correctAnswerCount + wrongAnswerCount;
    const accuracy = answeredCount > 0 ? correctAnswerCount / answeredCount : 0;

    // „ÉÄ„É°„Éº„Ç∏„Çí‰∏é„Åà„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà
    if (damageDealt === 0) {
        return 50;
    }

    // Âü∫Êú¨IQÔºà„ÉÄ„É°„Éº„Ç∏„Éô„Éº„ÇπÔºâ50„Äú100
    let iq = 50 + Math.round(damagePercent * 50);

    // Êïµ„ÇíÂÄí„Åó„ÅüÂ†¥Âêà„ÅÆ„ÅøËøΩÂä†„Éú„Éº„Éä„Çπ
    if (damagePercent >= 1.0) {
        iq += 15; // ÊíÉÁ†¥„Éú„Éº„Éä„Çπ ‚Üí ÊúÄÂ§ß115

        // Ê≠£Ëß£Áéá„Éú„Éº„Éä„ÇπÔºàÊïµ„ÇíÂÄí„Åó„ÅüÂ†¥Âêà„ÅÆ„ÅøÔºâ
        if (accuracy >= 1.0 && wrongAnswerCount === 0) {
            iq += 15; // „Éë„Éº„Éï„Çß„ÇØ„ÉàÔºàÂÖ®ÂïèÊ≠£Ëß£ÔºãÈñìÈÅï„ÅÑ„Å™„ÅóÔºâ
        } else if (accuracy >= 0.9) {
            iq += 10;
        } else if (accuracy >= 0.7) {
            iq += 5;
        }

        // Èõ£ÊòìÂ∫¶„Éú„Éº„Éä„ÇπÔºàÊïµ„ÇíÂÄí„Åó„ÅüÂ†¥Âêà„ÅÆ„ÅøÔºâ
        const audienceBonus = { lowerElem: 0, upperElem: 8, adult: 15, extra: 25 };
        iq += audienceBonus[selectedAudience];

        const speedBonus = { easy: 0, normal: 8, hard: 15, extra: 25 };
        iq += speedBonus[selectedSpeed];

        // ÊøÄ„É†„Ç∫√óÊøÄ„É†„Ç∫„Åß„Éë„Éº„Éï„Çß„ÇØ„Éà„Å™„ÇâÁâπÂà•„Éú„Éº„Éä„Çπ
        if (selectedAudience === 'extra' && selectedSpeed === 'extra' &&
            accuracy >= 1.0 && wrongAnswerCount === 0) {
            iq += 20;
        }
    }

    // ÈñìÈÅï„ÅÑÂõûÊï∞„Éö„Éä„É´„ÉÜ„Ç£
    iq -= wrongAnswerCount * 5;

    // ÊúÄ‰Ωé50„ÄÅÊúÄÈ´ò200„Å´Âà∂Èôê
    return Math.max(50, Math.min(200, Math.round(iq)));
}

// IQÁõÆÂÆâ:
// „ÉÄ„É°„Éº„Ç∏„Å™„Åó: 50
// ÊïµHPÂçäÂàÜ: 75
// ÊïµÊíÉÁ†¥(„Åã„Çì„Åü„Çì): 115„Äú130
// ÊïµÊíÉÁ†¥(„Åµ„Å§„ÅÜ): 130„Äú145
// ÊïµÊíÉÁ†¥(„ÇÄ„Åö„Åã„Åó„ÅÑ): 145„Äú165
// ÊïµÊíÉÁ†¥(ÊøÄ„É†„Ç∫): 165„Äú180
// ÊøÄ„É†„Ç∫„Éë„Éº„Éï„Çß„ÇØ„Éà: 200

// IQ„Å´Âøú„Åò„Åü„Ç≥„É°„É≥„ÉàÔºàÂØæË±°ËÄÖÂà•Ôºâ
function getIQComment(iq) {
    // „Å¶„ÅÑ„Åå„Åè„Å≠„ÇìÁî®Ôºà„ÇÑ„Åï„Åó„ÅÑ„Ç≥„É°„É≥„ÉàÔºâ
    if (selectedAudience === 'lowerElem') {
        if (iq >= 195) return '‰ºùË™¨Á¥öÔºÅÊ≠¥Âè≤„Å´ÊÆã„ÇãÂ§ßË®òÈå≤ÔºÅ';
        if (iq >= 190) return 'Á•ûÊ•≠ÔºÅÂÆåÁíß„Åô„Åé„ÇãÔºÅ';
        if (iq >= 185) return 'Â§©ÊâçÔºÅÁ¥†Êô¥„Çâ„Åó„ÅÑ„Éó„É¨„Ç§ÔºÅ';
        if (iq >= 180) return '„Åô„Åî„ÅÑÔºÅÊúÄÈ´òÈõ£Â∫¶„ÇØ„É™„Ç¢ÔºÅ';
        if (iq >= 175) return 'Ë¶ã‰∫ãÔºÅ„Åã„Å™„Çä„ÅÆËÖïÂâçÔºÅ';
        if (iq >= 170) return '„ÅäË¶ã‰∫ãÔºÅ„Çà„ÅèÈ†ëÂºµ„Å£„ÅüÔºÅ';
        if (iq >= 165) return '„ÇÑ„Çã„Åò„ÇÉ„ÇìÔºÅ„ÅÑ„ÅÑË™øÂ≠êÔºÅ';
        if (iq >= 160) return '„Å™„Åã„Å™„ÅãÔºÅ„Åù„ÅÆË™øÂ≠êÔºÅ';
        if (iq >= 155) return '„ÅÑ„ÅÑ„Å≠ÔºÅ‰∏äÊâãÔºÅ';
        if (iq >= 150) return '„Ç∞„ÉÉ„ÉâÔºÅ„Çà„Åè„Åß„Åç„ÅüÔºÅ';
        if (iq >= 145) return '„Çà„Åè„ÇÑ„Å£„ÅüÔºÅ„Åà„Çâ„ÅÑÔºÅ';
        if (iq >= 140) return '„Åå„Çì„Å∞„Å£„Åü„Å≠ÔºÅ„Åô„Åî„ÅÑÔºÅ';
        if (iq >= 135) return '„ÇÑ„Å£„Åü„Å≠ÔºÅ„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅ';
        if (iq >= 130) return '„Åä„Å§„Åã„Çå„Åï„ÅæÔºÅ„Çà„Åè„ÇÑ„Å£„ÅüÔºÅ';
        if (iq >= 120) return '„ÇØ„É™„Ç¢„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅ';
        if (iq >= 110) return '„Åä„Åó„ÅÑÔºÅ„ÇÇ„ÅÜÂ∞ë„ÅóÔºÅ';
        if (iq >= 100) return '„Éâ„É≥„Éû„Ç§ÔºÅÊ¨°„Å´ÊúüÂæÖÔºÅ';
        if (iq >= 90) return '„Åæ„ÅüÊåëÊà¶„Åó„Çà„ÅÜÔºÅ';
        if (iq >= 80) return '„ÇÇ„ÅÜ‰∏ÄÂõû„ÇÑ„Å£„Å¶„Åø„Çà„ÅÜÔºÅ';
        if (iq >= 70) return 'Ê•Ω„Åó„ÇÅ„Åü„Åã„Å™Ôºü';
        return 'Â§ß‰∏àÂ§´ÔºÅÁ∑¥Áøí„Åô„Çå„Å∞„Åß„Åç„ÇãÔºÅ';
    }

    // „Åì„ÅÜ„Åå„Åè„Å≠„Çì„Éª„Åä„Å®„Å™„Éª„Åí„Åç„É†„Ç∫Áî®Ôºà„Åó„Å£„Åã„ÇäË©ï‰æ°Ôºâ
    if (iq >= 195) return 'Á•ûÈôçËá®ÔºÅ‰∫∫È°û„ÅÆÈ†ÇÁÇπ„Å´Á´ã„Å§Áü•ËÉΩÔºÅ';
    if (iq >= 190) return 'Ë∂ÖË∂äËÄÖÔºÅÊ≠¥Âè≤„Å´Âêç„ÇíÊÆã„Åô„É¨„Éô„É´ÔºÅ';
    if (iq >= 185) return 'Áï∞Ê¨°ÂÖÉ„ÅÆÂ§©ÊâçÔºÅ„Ç¢„Ç§„É≥„Ç∑„É•„Çø„Ç§„É≥Á¥öÔºÅ';
    if (iq >= 180) return 'Ë∂ÖÂ§©ÊâçÔºÅ„ÅÇ„Å™„Åü„ÅØÂ§©Êâç„ÅÆ‰∏≠„ÅÆÂ§©ÊâçÔºÅ';
    if (iq >= 175) return 'È©öÁï∞ÁöÑÔºÅ„Éà„ÉÉ„Éó„É¨„Éô„É´„ÅÆÂÆüÂäõÔºÅ';
    if (iq >= 170) return 'Â§©ÊâçÁ¢∫ÂÆöÔºÅ‰∏ñÁïå„ÅåÊ≥®ÁõÆ„Åô„ÇãÁü•ÊÄßÔºÅ';
    if (iq >= 165) return 'Â§©Êâç„ÅÆÂèØËÉΩÊÄßÂ§ßÔºÅËºù„ÅèÊú™Êù•„ÅåË¶ã„Åà„ÇãÔºÅ';
    if (iq >= 160) return 'ÁßÄÊâç‰∏≠„ÅÆÁßÄÊâçÔºÅÁ¥†Êô¥„Çâ„Åó„ÅÑÈ†≠ËÑ≥ÔºÅ';
    if (iq >= 155) return 'ÈùûÂá°„Å™ÊâçËÉΩÔºÅÂë®„Çä„Å®Â∑Æ„Åå„Å§„ÅèÂÆüÂäõÔºÅ';
    if (iq >= 150) return 'ÂÑ™ÁßÄÔºÅÈ†≠ËÑ≥ÊòéÊô∞„Åß„Åô„Å≠ÔºÅ';
    if (iq >= 145) return '„Åã„Å™„Çä„ÅÆÂÆüÂäõËÄÖÔºÅËá™‰ø°„ÇíÊåÅ„Å£„Å¶ÔºÅ';
    if (iq >= 140) return 'Á¥†Êô¥„Çâ„Åó„ÅÑÁü•ÊÄß„ÅÆÊåÅ„Å°‰∏ªÔºÅ';
    if (iq >= 135) return 'È†≠„ÅÆÂõûËª¢„ÅåÈÄü„ÅÑÔºÅ„Çª„É≥„ÇπÊäúÁæ§ÔºÅ';
    if (iq >= 130) return '„Å™„Åã„Å™„Åã„ÇÑ„Çã„Å≠ÔºÅ„Éù„ÉÜ„É≥„Ç∑„É£„É´È´ò„ÅÑÔºÅ';
    if (iq >= 120) return 'Âπ≥Âùá‰ª•‰∏äÔºÅ„ÅÑ„ÅÑÊÑü„Åò„Åß„ÅôÔºÅ';
    if (iq >= 110) return 'Ê®ôÊ∫ñÁöÑÔºÅ„Ç≥„ÉÑ„Ç≥„ÉÑ‰º∏„Å∞„Åù„ÅÜÔºÅ';
    if (iq >= 100) return '„Åæ„Åö„Åæ„ÅöÔºÅ‰º∏„Å≥„Åó„Çç„ÅÇ„ÇäÔºÅ';
    if (iq >= 90) return '„ÇÇ„ÅÜÂ∞ë„ÅóÈ†ëÂºµ„Çç„ÅÜÔºÅÊ¨°„Å´ÊúüÂæÖÔºÅ';
    if (iq >= 80) return 'Á∑¥Áøí„ÅÇ„Çã„ÅÆ„ÅøÔºÅË´¶„ÇÅ„Å™„ÅÑ„ÅßÔºÅ';
    if (iq >= 70) return '„Éâ„É≥„Éû„Ç§ÔºÅ„Åæ„ÅüÊåëÊà¶„Åó„Çà„ÅÜÔºÅ';
    return 'Ê∞ó„Å´„Åó„Å™„ÅÑÔºÅÊ•Ω„Åó„ÇÄ„Åì„Å®„ÅåÂ§ß‰∫ãÔºÅ';
}

// 5. UI„Å®ÁîªÈù¢ÁÆ°ÁêÜ
function showTitleScreen() {
    // ÂÖ®BGMÂÅúÊ≠¢
    sounds.bgm.pause();
    sounds.bgm.currentTime = 0;
    sounds.ending.pause();
    sounds.ending.currentTime = 0;
    // „Ç™„Éº„Éó„Éã„É≥„Ç∞BGMÂÜçÁîü
    if (!isMuted) sounds.opening.play().catch(() => {});

    titleScreen.classList.remove('hidden');
    ruleScreen.classList.add('hidden');
    gameWrapper.classList.add('hidden');
    if (animationFrameId) {
        cancelAnimationFrame(animationFrameId);
        animationFrameId = null;
    }
}

function showGameScreen() {
    titleScreen.classList.add('hidden');
    gameWrapper.classList.remove('hidden');
    // „Ç≤„Éº„É†ÁîªÈù¢Ë°®Á§∫Âæå„Å´„Ç≠„É£„É≥„Éê„Çπ„Çí„É™„Çµ„Ç§„Ç∫
    setTimeout(resizeCanvasForMobile, 50);
}

function setupTitleScreen() {
    // „Ç´„Éº„ÇΩ„É´ÈÅ∏ÊäûÊñπÂºè
    audienceSelector.addEventListener('click', e => {
        const item = e.target.closest('.menu-item');
        if (item) {
            playSound(sounds.cursor);
            audienceSelector.querySelector('.selected')?.classList.remove('selected');
            item.classList.add('selected');
            selectedAudience = item.dataset.value;
        }
    });
    speedSelector.addEventListener('click', e => {
        const item = e.target.closest('.menu-item');
        if (item) {
            playSound(sounds.cursor);
            speedSelector.querySelector('.selected')?.classList.remove('selected');
            item.classList.add('selected');
            selectedSpeed = item.dataset.value;
        }
    });
    startBtn.addEventListener('click', startGame);
    backToTitleBtn.addEventListener('click', showTitleScreen);

    // „É´„Éº„É´ÁîªÈù¢
    document.getElementById('rule-btn').addEventListener('click', showRuleScreen);
    document.getElementById('back-to-title-from-rule').addEventListener('click', showTitleScreen);
}

function showRuleScreen() {
    playSound(sounds.cursor);
    titleScreen.classList.add('hidden');
    ruleScreen.classList.remove('hidden');
}

// 6. „Ç≤„Éº„É†„ÅÆ„É°„Ç§„É≥„É≠„Ç∏„ÉÉ„ÇØ

// Â§¢„ÅÆ‰∏ñÁïå„Å∏ÂÖ•„Çã„Éà„É©„É≥„Ç∏„Ç∑„Éß„É≥ÔºàÂèØÊÑõ„ÅÑ„Éá„Ç£„Çæ„É´„ÉñÔºâ
function battleTransition(callback) {
    const overlay = document.createElement('canvas');
    overlay.id = 'transition-overlay';
    overlay.style.cssText = 'position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;';
    document.body.appendChild(overlay);

    const tCtx = overlay.getContext('2d');
    overlay.width = window.innerWidth;
    overlay.height = window.innerHeight;

    let progress = 0;
    const centerX = overlay.width / 2;
    const centerY = overlay.height / 2;

    // „Ç≠„É©„Ç≠„É©„Éë„Éº„ÉÜ„Ç£„ÇØ„É´
    const particles = [];
    for (let i = 0; i < 50; i++) {
        particles.push({
            x: Math.random() * overlay.width,
            y: Math.random() * overlay.height,
            size: Math.random() * 8 + 4,
            speed: Math.random() * 2 + 1,
            angle: Math.random() * Math.PI * 2,
            twinkle: Math.random() * Math.PI * 2
        });
    }

    // „Éè„Éº„Éà„Éë„Éº„ÉÜ„Ç£„ÇØ„É´
    const hearts = [];
    for (let i = 0; i < 15; i++) {
        hearts.push({
            x: Math.random() * overlay.width,
            y: overlay.height + Math.random() * 100,
            size: Math.random() * 15 + 10,
            speed: Math.random() * 3 + 2,
            wobble: Math.random() * Math.PI * 2
        });
    }

    function drawHeart(x, y, size) {
        tCtx.beginPath();
        tCtx.moveTo(x, y + size / 4);
        tCtx.bezierCurveTo(x, y, x - size / 2, y, x - size / 2, y + size / 4);
        tCtx.bezierCurveTo(x - size / 2, y + size / 2, x, y + size * 0.7, x, y + size);
        tCtx.bezierCurveTo(x, y + size * 0.7, x + size / 2, y + size / 2, x + size / 2, y + size / 4);
        tCtx.bezierCurveTo(x + size / 2, y, x, y, x, y + size / 4);
        tCtx.fill();
    }

    function drawStar(x, y, size, alpha) {
        tCtx.save();
        tCtx.globalAlpha = alpha;
        tCtx.fillStyle = '#fff';
        tCtx.beginPath();
        for (let i = 0; i < 4; i++) {
            const angle = (i / 4) * Math.PI * 2 - Math.PI / 2;
            const len = i % 2 === 0 ? size : size * 0.4;
            if (i === 0) {
                tCtx.moveTo(x + Math.cos(angle) * len, y + Math.sin(angle) * len);
            } else {
                tCtx.lineTo(x + Math.cos(angle) * len, y + Math.sin(angle) * len);
            }
            const angle2 = ((i + 0.5) / 4) * Math.PI * 2 - Math.PI / 2;
            const len2 = size * 0.4;
            tCtx.lineTo(x + Math.cos(angle2) * len2, y + Math.sin(angle2) * len2);
        }
        tCtx.closePath();
        tCtx.fill();
        tCtx.restore();
    }

    function animate() {
        // „Éî„É≥„ÇØ„Äú„É©„Éô„É≥„ÉÄ„Éº„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥ËÉåÊôØÔºàÂæê„ÄÖ„Å´ÊøÉ„ÅèÔºâ
        const alpha = Math.min(1, progress / 60);
        const gradient = tCtx.createRadialGradient(centerX, centerY, 0, centerX, centerY, Math.max(overlay.width, overlay.height));
        gradient.addColorStop(0, `rgba(255, 240, 245, ${alpha})`);
        gradient.addColorStop(0.5, `rgba(255, 182, 193, ${alpha})`);
        gradient.addColorStop(1, `rgba(230, 230, 250, ${alpha})`);
        tCtx.fillStyle = gradient;
        tCtx.fillRect(0, 0, overlay.width, overlay.height);

        // „Ç≠„É©„Ç≠„É©ÊèèÁîª
        particles.forEach(p => {
            p.twinkle += 0.15;
            p.y -= p.speed * 0.5;
            p.x += Math.sin(p.angle) * 0.5;
            p.angle += 0.02;

            if (p.y < -20) p.y = overlay.height + 20;

            const twinkleAlpha = (Math.sin(p.twinkle) + 1) / 2 * alpha;
            drawStar(p.x, p.y, p.size, twinkleAlpha);
        });

        // „Éè„Éº„ÉàÊèèÁîªÔºà‰∏ã„Åã„Çâ‰∏ä„Å´ÊµÆ„Åã„Å∂Ôºâ
        if (progress > 20) {
            hearts.forEach(h => {
                h.y -= h.speed;
                h.wobble += 0.05;
                const wobbleX = Math.sin(h.wobble) * 20;

                tCtx.fillStyle = `rgba(255, 105, 180, ${alpha * 0.7})`;
                drawHeart(h.x + wobbleX, h.y, h.size);
            });
        }

        // ‰∏≠Â§Æ„Å´ÂÖâ„ÅÆÂÜÜÔºàÂ§¢„Å∏„ÅÆÂÖ•Âè£Ôºâ
        if (progress > 30) {
            const circleProgress = (progress - 30) / 50;
            const radius = circleProgress * Math.max(overlay.width, overlay.height) * 1.5;

            const lightGradient = tCtx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
            lightGradient.addColorStop(0, 'rgba(255, 255, 255, 0.9)');
            lightGradient.addColorStop(0.3, 'rgba(255, 192, 203, 0.6)');
            lightGradient.addColorStop(0.7, 'rgba(255, 182, 193, 0.3)');
            lightGradient.addColorStop(1, 'rgba(255, 182, 193, 0)');

            tCtx.fillStyle = lightGradient;
            tCtx.beginPath();
            tCtx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            tCtx.fill();
        }

        progress += 1.5;

        if (progress < 80) {
            requestAnimationFrame(animate);
        } else {
            // ÊúÄÂæå„ÅØÁôΩ„Åè„Éï„Çß„Éº„Éâ„Ç¢„Ç¶„Éà
            tCtx.fillStyle = 'rgba(255, 255, 255, 1)';
            tCtx.fillRect(0, 0, overlay.width, overlay.height);
            setTimeout(() => {
                overlay.remove();
                callback();
            }, 300);
        }
    }

    // ÈñãÂßã
    animate();
}

function startGame() {
    playSound(sounds.decision);
    currentQuizBank = allQuizzes[selectedAudience];
    dropInterval = speedSettings[selectedSpeed];

    // „Ç™„Éº„Éó„Éã„É≥„Ç∞BGMÂÅúÊ≠¢
    sounds.opening.pause();
    sounds.opening.currentTime = 0;
    // „Ç≤„Éº„É†BGM„ÇíÈñãÂßã
    playSound(sounds.bgm);

    // Â§¢„ÅÆ‰∏ñÁïå„Å∏ÂÖ•„Çã„Ç®„Éï„Çß„ÇØ„ÉàÂæå„Å´„Ç≤„Éº„É†ÈñãÂßã
    battleTransition(() => {
        showGameScreen();
        newGame();
    });
}

function init() {
    ctx.canvas.width = COLS * BLOCK_SIZE;
    ctx.canvas.height = ROWS * BLOCK_SIZE;
    setupTitleScreen();

    // „Çπ„Éó„É©„ÉÉ„Ç∑„É•ÁîªÈù¢„ÅÆ„ÇØ„É™„ÉÉ„ÇØ„Åß„Ç≤„Éº„É†ÈñãÂßã
    splashScreen.addEventListener('click', startFromSplash);
    splashScreen.addEventListener('touchend', startFromSplash);

    // „Éü„É•„Éº„Éà„Éú„Çø„É≥
    document.getElementById('mute-btn').addEventListener('click', toggleMute);

    // „É¢„Éê„Ç§„É´Áî®„É™„Çµ„Ç§„Ç∫Âá¶ÁêÜ
    resizeCanvasForMobile();
    window.addEventListener('resize', resizeCanvasForMobile);
    window.addEventListener('orientationchange', () => {
        setTimeout(resizeCanvasForMobile, 100);
    });
}

function startFromSplash(e) {
    e.preventDefault();
    // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÇíÂâäÈô§Ôºà‰∫åÈáçÂÆüË°åÈò≤Ê≠¢Ôºâ
    splashScreen.removeEventListener('click', startFromSplash);
    splashScreen.removeEventListener('touchend', startFromSplash);

    // „Çπ„Éó„É©„ÉÉ„Ç∑„É•ÁîªÈù¢„ÇíÈùûË°®Á§∫
    splashScreen.classList.add('hidden');

    // „Çø„Ç§„Éà„É´ÁîªÈù¢„ÇíË°®Á§∫„Åó„Å¶„Ç™„Éº„Éó„Éã„É≥„Ç∞BGMÂÜçÁîü
    showTitleScreen();
}

function resizeCanvasForMobile() {
    // „É¢„Éê„Ç§„É´„Åß„ÅØCSS„ÅÆmax-width: 100%„ÅßËá™ÂãïË™øÊï¥
    // ÁâπÂà•„Å™Âá¶ÁêÜ„ÅØ‰∏çË¶Å
}

function gameLoop(time = 0) {
    if (isGameOver || isGameCleared) return;
    const deltaTime = time - lastTime;
    lastTime = time;
    dropCounter += deltaTime;
    if (dropCounter > dropInterval) playerDrop();
    // „Ç≤„Éº„É†„ÇØ„É™„Ç¢/„Ç™„Éº„Éê„ÉºÂæå„ÅØÊèèÁîª„Åó„Å™„ÅÑÔºàÁµêÊûúÁîªÈù¢„ÅåÊ∂à„Åà„Çã„ÅÆ„ÇíÈò≤„ÅêÔºâ
    if (isGameOver || isGameCleared) return;
    draw();
    animationFrameId = requestAnimationFrame(gameLoop);
}

function newGame() {
    board = Array.from({ length: ROWS }, () => Array(COLS).fill(0));
    pieceBag = []; // „Éñ„É≠„ÉÉ„ÇØË¢ã„Çí„É™„Çª„ÉÉ„Éà

    // Êïµ„Ç≠„É£„É©ÂàùÊúüÂåñ
    currentEnemy = enemySettings[selectedSpeed];
    enemyMaxHp = currentEnemy.maxHp;
    enemyHp = enemyMaxHp;
    updateEnemyDisplay();

    isGameOver = false;
    isGameCleared = false;
    helpChances = 1;
    helpUsed = false;
    wrongAnswerCount = 0;
    correctAnswerCount = 0;
    totalQuizCount = 0;
    usedQuizIndexes = []; // ‰ΩøÁî®Ê∏à„Åø„ÇØ„Ç§„Ç∫„Çí„É™„Çª„ÉÉ„Éà
    gameStartTime = Date.now();
    helpBtn.disabled = false;
    if (helpCount) helpCount.textContent = `(${helpChances}Âõû)`;
    if (!feedbackElement) {
        feedbackElement = document.createElement('p');
        feedbackElement.id = 'feedback';
        answersElement.insertAdjacentElement('afterend', feedbackElement);
        feedbackElement.style.cssText = 'color: red; font-weight: bold; text-align: center; margin-top: 10px; min-height: 1em;';
    }
    lastTime = 0;
    newTurn();
    if (animationFrameId) cancelAnimationFrame(animationFrameId);
    gameLoop();
}

function newTurn() {
    canControl = false;
    quizContainer.style.visibility = 'visible'; // „ÇØ„Ç§„Ç∫ÈÉ®ÂàÜ„Å†„ÅëË°®Á§∫
    quizContainer.style.pointerEvents = 'auto';
    newPiece();
    newQuiz();
    if (isColliding(currentPiece)) {
        gameOver();
        return;
    }
    dropCounter = 0;
}

// 7-bag„Ç∑„Çπ„ÉÜ„É†ÔºàÂêÑ„Éñ„É≠„ÉÉ„ÇØ„ÅåÂùáÁ≠â„Å´Âá∫ÁèæÔºâ
let pieceBag = [];

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function fillBag() {
    // 1„Äú7„ÅÆÂÖ®„Éñ„É≠„ÉÉ„ÇØ„ÇíË¢ã„Å´ÂÖ•„Çå„Å¶„Ç∑„É£„ÉÉ„Éï„É´
    pieceBag = shuffleArray([1, 2, 3, 4, 5, 6, 7]);
}

function newPiece() {
    // Ë¢ã„ÅåÁ©∫„Å™„ÇâË£úÂÖÖ
    if (pieceBag.length === 0) {
        fillBag();
    }
    // Ë¢ã„Åã„Çâ1„Å§Âèñ„ÇäÂá∫„Åô
    const rand = pieceBag.pop();
    currentPiece = { shape: SHAPES[rand], color: COLORS[rand], colorIndex: rand, x: Math.floor(COLS / 2) - 1, y: 0 };
}

function newQuiz() {
    feedbackElement.textContent = '';
    totalQuizCount++;

    // ÈáçË§á„Åó„Å™„ÅÑ„ÇØ„Ç§„Ç∫„ÇíÈÅ∏Êäû
    let availableIndexes = [];
    for (let i = 0; i < currentQuizBank.length; i++) {
        if (!usedQuizIndexes.includes(i)) {
            availableIndexes.push(i);
        }
    }
    // ÂÖ®„Å¶‰Ωø„ÅÑÂàá„Å£„Åü„Çâ„É™„Çª„ÉÉ„Éà
    if (availableIndexes.length === 0) {
        usedQuizIndexes = [];
        availableIndexes = currentQuizBank.map((_, i) => i);
    }

    const randIndex = availableIndexes[Math.floor(Math.random() * availableIndexes.length)];
    usedQuizIndexes.push(randIndex);
    currentQuiz = currentQuizBank[randIndex];

    questionElement.innerHTML = '„ÄêÂïèÈ°å„Äë<br>' + currentQuiz.q;
    answersElement.innerHTML = '';
    const options = [...currentQuiz.o].sort(() => Math.random() - 0.5);
    options.forEach(option => {
        const button = document.createElement('button');
        button.textContent = option;
        button.className = 'answer-btn';
        button.onclick = () => handleAnswer(option);
        answersElement.appendChild(button);
    });
}

function handleAnswer(selectedOption) {
    if (canControl || isGameOver || isGameCleared || isAnswerDisabled) return;
    if (selectedOption === currentQuiz.a) {
        playSound(sounds.correct);
        canControl = true;
        correctAnswerCount++;
        quizContainer.style.visibility = 'hidden'; // „ÇØ„Ç§„Ç∫ÈÉ®ÂàÜ„Å†„ÅëÈùûË°®Á§∫
        quizContainer.style.pointerEvents = 'none';
        feedbackElement.textContent = '';

    } else {
        playSound(sounds.wrong);
        wrongAnswerCount++;
        feedbackElement.textContent = '„Åæ„Å°„Åå„ÅÑÔºÅ„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÔºÅ';

        // „Éö„Éä„É´„ÉÜ„Ç£ÔºöÂ∞ë„Åó„Çπ„Éî„Éº„Éâ„Ç¢„ÉÉ„Éó
        if (dropInterval > MIN_DROP_INTERVAL) {
            dropInterval = Math.max(MIN_DROP_INTERVAL, dropInterval - 30);
        }

        // Êïµ„ÅÆÊîªÊíÉÊºîÂá∫
        enemyAttack();
    }
}

// Êïµ„ÅÆÊîªÊíÉÊºîÂá∫ÔºàÈñìÈÅï„ÅàÊôÇ„ÅÆ„Éö„Éä„É´„ÉÜ„Ç£Ôºâ- ÂèØÊÑõ„ÅÑ„Éê„Éº„Ç∏„Éß„É≥
function enemyAttack() {
    const enemyIcon = document.getElementById('enemy-icon');
    const gameContainer = document.getElementById('game-container');

    // ÂõûÁ≠î„Çí0.5ÁßíÈñìÁÑ°ÂäπÂåñ
    isAnswerDisabled = true;
    answersElement.classList.add('disabled');

    // Êïµ„Ç¢„Ç§„Ç≥„É≥„Çí„Å∑„Çã„Å∑„ÇãÔºÜ„Éî„É≥„ÇØ„Å´ÂÖâ„Çâ„Åõ„Çã
    if (enemyIcon) {
        enemyIcon.style.transform = 'scale(1.3)';
        enemyIcon.style.filter = 'brightness(1.5) drop-shadow(0 0 15px #FF69B4)';
    }

    // ÁîªÈù¢„Çí„Åµ„Çè„Å£„Å®Êè∫„Çâ„ÅôÔºàÂÑ™„Åó„ÇÅÔºâ
    if (gameContainer) {
        let shakeCount = 0;
        const shakeInterval = setInterval(() => {
            const offsetX = (Math.random() - 0.5) * 8;
            const offsetY = (Math.random() - 0.5) * 8;
            gameContainer.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
            shakeCount++;
            if (shakeCount >= 4) {
                clearInterval(shakeInterval);
                gameContainer.style.transform = '';
            }
        }, 60);
    }

    // „Éî„É≥„ÇØ„Éï„É©„ÉÉ„Ç∑„É•
    document.body.classList.add('damage-flash');

    // 0.5ÁßíÂæå„Å´„Ç®„Éï„Çß„ÇØ„Éà„ÇíËß£Èô§
    setTimeout(() => {
        isAnswerDisabled = false;
        answersElement.classList.remove('disabled');
        document.body.classList.remove('damage-flash');

        if (enemyIcon) {
            enemyIcon.style.transform = '';
            enemyIcon.style.filter = '';
        }
    }, 500);
}

function useHelp() {
    if (helpChances > 0) {
        playSound(sounds.help);
        helpChances--;
        helpUsed = true;

        // „Éú„Éº„Éâ„ÇíÂÖ®„ÇØ„É™„Ç¢ÔºàÊõ¥Âú∞„Å´Êàª„ÅôÔºâ
        board = Array.from({ length: ROWS }, () => Array(COLS).fill(0));

        // Êñ∞„Åó„ÅÑ„Çø„Éº„É≥„ÇíÈñãÂßã
        newTurn();

        if (helpCount) helpCount.textContent = `(${helpChances}Âõû)`;
        if (helpChances === 0) helpBtn.disabled = true;
    }
}

function lockPiece() {
    currentPiece.shape.forEach((row, y) => {
        row.forEach((value, x) => {
            if (value) {
                if (currentPiece.y + y >= 0) board[currentPiece.y + y][currentPiece.x + x] = currentPiece.colorIndex;
            }
        });
    });
}

function clearLines() {
    let linesCleared = 0;
    for (let y = ROWS - 1; y >= 0; y--) {
        if (board[y].every(value => value > 0)) {
            linesCleared++;
            board.splice(y, 1);
            board.unshift(Array(COLS).fill(0));
            y++;
        }
    }
    if (linesCleared > 0) {
        playSound(sounds.lineClear);
        // Êïµ„Å´„ÉÄ„É°„Éº„Ç∏Ôºà1„É©„Ç§„É≥ = 10„ÉÄ„É°„Éº„Ç∏Ôºâ
        const damage = linesCleared * 10;
        enemyHp = Math.max(0, enemyHp - damage);
        updateEnemyDisplay();
        if (enemyHp <= 0 && !isGameCleared) {
            gameClear();
        }
    }
}

function updateEnemyDisplay() {
    const enemyIconEl = document.getElementById('enemy-icon');
    const enemyNameEl = document.getElementById('enemy-name');
    const enemyHpEl = document.getElementById('enemy-hp');
    const enemyHpBarEl = document.getElementById('enemy-hp-bar');

    if (enemyIconEl) enemyIconEl.textContent = currentEnemy.emoji;
    if (enemyNameEl) enemyNameEl.textContent = currentEnemy.name;
    if (enemyHpEl) enemyHpEl.textContent = `${enemyHp} / ${enemyMaxHp}`;
    if (enemyHpBarEl) {
        const hpPercent = (enemyHp / enemyMaxHp) * 100;
        enemyHpBarEl.style.width = `${hpPercent}%`;
        // ÂèØÊÑõ„ÅÑ„Éî„É≥„ÇØ„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥Ôºà„Éî„É≥„ÇØ‚Üí„É©„Éô„É≥„ÉÄ„Éº‚ÜíËñÑÁ¥´Ôºâ
        if (hpPercent > 50) {
            enemyHpBarEl.style.background = 'linear-gradient(90deg, #FF69B4, #FF1493)';
        } else if (hpPercent > 25) {
            enemyHpBarEl.style.background = 'linear-gradient(90deg, #DA70D6, #BA55D3)';
        } else {
            enemyHpBarEl.style.background = 'linear-gradient(90deg, #9370DB, #8A2BE2)';
        }
    }
}

function gameClear() {
    isGameCleared = true;
    sounds.bgm.pause();
    sounds.bgm.currentTime = 0;
    cancelAnimationFrame(animationFrameId);
    animationFrameId = null;
    playSound(sounds.clear);
    setTimeout(() => playSound(sounds.congrats), 1500);
    // „Ç®„É≥„Éá„Ç£„É≥„Ç∞BGMÂÜçÁîü
    sounds.ending.currentTime = 0;
    if (!isMuted) sounds.ending.play().catch(() => {});

    // IQË®àÁÆó
    const iq = calculateIQ();
    const comment = getIQComment(iq);

    // ÂèØÊÑõ„ÅÑ„Éî„É≥„ÇØ„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥ËÉåÊôØ
    const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
    gradient.addColorStop(0, '#FFE4EC');
    gradient.addColorStop(0.5, '#FFF0F5');
    gradient.addColorStop(1, '#F0E6FA');
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;

    ctx.textAlign = 'center';

    // ÂãùÂà©„É°„ÉÉ„Çª„Éº„Ç∏ÔºàÂèØÊÑõ„ÅÑ„Éî„É≥„ÇØÔºâ
    ctx.fillStyle = '#FF69B4';
    ctx.font = 'bold 20px "Zen Maru Gothic", sans-serif';
    ctx.fillText('‚ô° VICTORY! ‚ô°', centerX, centerY - 160);

    ctx.fillStyle = '#5D4E6D';
    ctx.font = '16px "Zen Maru Gothic", sans-serif';
    ctx.fillText(`${currentEnemy.name}„Çí„Åü„Åä„Åó„ÅüÔºÅ`, centerX, centerY - 120);

    // IQ„Çª„ÇØ„Ç∑„Éß„É≥
    ctx.font = '14px "Zen Maru Gothic", sans-serif';
    ctx.fillStyle = '#8B7B9B';
    ctx.fillText('„ÅÇ„Å™„Åü„ÅÆIQ„ÅØ...', centerX, centerY - 70);

    // IQÊï∞ÂÄ§„ÇíÂ§ß„Åç„ÅèË°®Á§∫Ôºà„Éî„É≥„ÇØÔºâ
    ctx.font = 'bold 60px "Zen Maru Gothic", sans-serif';
    ctx.fillStyle = '#FF1493';
    ctx.fillText(iq, centerX, centerY + 20);

    // „Ç≥„É°„É≥„Éà
    ctx.font = '12px "Zen Maru Gothic", sans-serif';
    ctx.fillStyle = '#5D4E6D';
    ctx.fillText(comment, centerX, centerY + 70);

    // Áµ±Ë®àÊÉÖÂ†±
    ctx.font = '11px "Zen Maru Gothic", sans-serif';
    ctx.fillStyle = '#8B7B9B';
    const accuracy = totalQuizCount > 0 ? Math.round((correctAnswerCount / totalQuizCount) * 100) : 0;
    ctx.fillText(`Ê≠£Ëß£Áéá: ${accuracy}%  ÈñìÈÅï„ÅÑ: ${wrongAnswerCount}Âõû`, centerX, centerY + 110);

    ctx.font = '12px "Zen Maru Gothic", sans-serif';
    ctx.fillStyle = '#FF69B4';
    ctx.fillText('‚ô° „Çø„ÉÉ„Éó„Åß„Çø„Ç§„Éà„É´„Å∏ ‚ô°', centerX, centerY + 160);
}

function gameOver() {
    isGameOver = true;
    sounds.bgm.pause();
    sounds.bgm.currentTime = 0;
    cancelAnimationFrame(animationFrameId);
    animationFrameId = null;
    // „Ç®„É≥„Éá„Ç£„É≥„Ç∞BGMÂÜçÁîü
    sounds.ending.currentTime = 0;
    if (!isMuted) sounds.ending.play().catch(() => {});

    // IQË®àÁÆóÔºà„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº„Åß„ÇÇË°®Á§∫Ôºâ
    const iq = calculateIQ();
    const comment = getIQComment(iq);
    const remainingHpPercent = Math.round((enemyHp / enemyMaxHp) * 100);

    // ÂèØÊÑõ„ÅÑ„Éî„É≥„ÇØ„Äú„É©„Éô„É≥„ÉÄ„Éº„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥ËÉåÊôØ
    const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
    gradient.addColorStop(0, '#F0E6FA');
    gradient.addColorStop(0.5, '#FFE4EC');
    gradient.addColorStop(1, '#E8D5E7');
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;

    ctx.textAlign = 'center';

    // „Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÔºàÂèØÊÑõ„ÅÑ„Åë„Å©„Å°„Çá„Å£„Å®ÊÆãÂøµ„Å™ÊÑü„ÅòÔºâ
    ctx.fillStyle = '#DA70D6';
    ctx.font = 'bold 22px "Zen Maru Gothic", sans-serif';
    ctx.fillText('‚ô° GAME OVER ‚ô°', centerX, centerY - 160);

    ctx.fillStyle = '#5D4E6D';
    ctx.font = '14px "Zen Maru Gothic", sans-serif';
    ctx.fillText(`${currentEnemy.name}„Å´ÊïóÂåó...`, centerX, centerY - 120);

    ctx.fillStyle = '#8B7B9B';
    ctx.font = '12px "Zen Maru Gothic", sans-serif';
    ctx.fillText(`ÊïµHP: ${remainingHpPercent}% ÊÆã„Çä`, centerX, centerY - 95);

    // IQ„Çª„ÇØ„Ç∑„Éß„É≥
    ctx.fillStyle = '#8B7B9B';
    ctx.font = '14px "Zen Maru Gothic", sans-serif';
    ctx.fillText('„ÅÇ„Å™„Åü„ÅÆIQ', centerX, centerY - 50);

    // IQÊï∞ÂÄ§Ôºà„É©„Éô„É≥„ÉÄ„ÉºËâ≤Ôºâ
    ctx.font = 'bold 55px "Zen Maru Gothic", sans-serif';
    ctx.fillStyle = '#9370DB';
    ctx.fillText(iq, centerX, centerY + 25);

    // „Ç≥„É°„É≥„Éà
    ctx.font = '12px "Zen Maru Gothic", sans-serif';
    ctx.fillStyle = '#5D4E6D';
    ctx.fillText(comment, centerX, centerY + 70);

    // Áµ±Ë®àÊÉÖÂ†±
    ctx.font = '11px "Zen Maru Gothic", sans-serif';
    ctx.fillStyle = '#8B7B9B';
    const accuracy = totalQuizCount > 0 ? Math.round((correctAnswerCount / totalQuizCount) * 100) : 0;
    ctx.fillText(`Ê≠£Ëß£Áéá: ${accuracy}%  ÈñìÈÅï„ÅÑ: ${wrongAnswerCount}Âõû`, centerX, centerY + 110);

    ctx.font = '12px "Zen Maru Gothic", sans-serif';
    ctx.fillStyle = '#DA70D6';
    ctx.fillText('‚ô° „Çø„ÉÉ„Éó„Åß„Çø„Ç§„Éà„É´„Å∏ ‚ô°', centerX, centerY + 155);
}

function playSound(sound) {
    if (!sound || isMuted) return;
    sound.currentTime = 0;
    sound.play().catch(error => {
        console.error(`Audio playback failed: ${error.message}`);
    });
}

// „Éü„É•„Éº„Éà„Éà„Ç∞„É´Ê©üËÉΩ
function toggleMute() {
    isMuted = !isMuted;
    const muteBtn = document.getElementById('mute-btn');

    if (isMuted) {
        // ÂÖ®„Å¶„ÅÆÈü≥Â£∞„ÇíÂÅúÊ≠¢
        Object.values(sounds).forEach(sound => {
            sound.pause();
        });
        muteBtn.textContent = 'üîá';
        muteBtn.classList.add('muted');
    } else {
        muteBtn.textContent = 'üîä';
        muteBtn.classList.remove('muted');
        // ÁèæÂú®„ÅÆÁîªÈù¢„Å´Âøú„Åò„Å¶BGM„ÇíÂÜçÁîü
        if (!titleScreen.classList.contains('hidden')) {
            sounds.opening.play().catch(() => {});
        } else if (!gameWrapper.classList.contains('hidden') && !isGameOver && !isGameCleared) {
            sounds.bgm.play().catch(() => {});
        } else if (isGameOver || isGameCleared) {
            sounds.ending.play().catch(() => {});
        }
    }
}

// 7. „Éó„É¨„Ç§„É§„ÉºÊìç‰Ωú„Å®„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
document.addEventListener('keydown', e => {
    if (!canControl || isGameOver || isGameCleared) return;
    if (e.key === 'ArrowLeft') playerMove(-1);
    else if (e.key === 'ArrowRight') playerMove(1);
    else if (e.key === 'ArrowDown') playerDrop();
    else if (e.key === 'ArrowUp') playerRotate();
});
canvas.addEventListener('click', () => { if (isGameOver || isGameCleared) showTitleScreen(); });
helpBtn.addEventListener('click', useHelp);

// „Çπ„ÉØ„Ç§„Éó„Éª„Çø„ÉÉ„ÉóÊìç‰ΩúÔºà„Çπ„Éû„ÉõÁî®Ôºâ
let touchStartX = 0;
let touchStartY = 0;
let touchStartTime = 0;
let longPressTimeout = null;
let isLongPressing = false;
const SWIPE_THRESHOLD = 15; // „Çπ„ÉØ„Ç§„ÉóÂà§ÂÆö„ÅÆÊúÄÂ∞èË∑ùÈõ¢ÔºàÂ∞è„Åï„Åè=ÊïèÊÑü„Å´Ôºâ
const TAP_THRESHOLD = 8;    // „Çø„ÉÉ„ÉóÂà§ÂÆö„ÅÆÊúÄÂ§ßÁßªÂãïË∑ùÈõ¢
const LONG_PRESS_DELAY = 350; // Èï∑Êäº„ÅóÂà§ÂÆöÊôÇÈñìÔºàmsÔºâ
const MOVE_PER_PIXEL = 25;  // ‰ΩïpxÊ®™„Çπ„ÉØ„Ç§„Éó„Åß1„Éû„ÇπÁßªÂãï
const DROP_PER_PIXEL = 20;  // ‰Ωïpx‰∏ã„Çπ„ÉØ„Ç§„Éó„Åß1„Éû„ÇπËêΩ‰∏ã

function handleTouchControl(action) {
    if (!canControl || isGameOver || isGameCleared) return;
    action();
}

// „ÇΩ„Éï„Éà„Éâ„É≠„ÉÉ„ÉóÔºàÈ´òÈÄüËêΩ‰∏ãÔºöË§áÊï∞„Éû„ÇπÔºâ
function softDrop() {
    for (let i = 0; i < 3; i++) { // 3„Éû„ÇπËêΩ‰∏ã
        if (!isColliding(currentPiece, 0, 1)) {
            currentPiece.y++;
        } else {
            break;
        }
    }
    dropCounter = 0;
}

// ÁîªÈù¢ÂÖ®‰Ωì„Åß„Çø„ÉÉ„ÉÅÊìç‰Ωú„ÇíÂèó„Åë‰ªò„Åë„Çã
const touchArea = gameWrapper;

touchArea.addEventListener('touchstart', (e) => {
    // „ÇØ„Ç§„Ç∫„Éú„Çø„É≥„ÇÑUI„Éú„Çø„É≥„ÅØ„Çπ„Ç≠„ÉÉ„Éó
    if (e.target.closest('.answer-btn, #help-btn, #back-to-title-btn')) return;

    e.preventDefault();
    const touch = e.touches[0];
    touchStartX = touch.clientX;
    touchStartY = touch.clientY;
    touchStartTime = Date.now();
    isLongPressing = false;

    // Èï∑Êäº„ÅóÊ§úÂá∫„Çø„Ç§„Éû„ÉºÈñãÂßãÔºàÈï∑Êäº„Åó„ÅßÂç≥ËêΩ‰∏ãÔºâ
    longPressTimeout = setTimeout(() => {
        isLongPressing = true;
        handleTouchControl(() => hardDrop());
    }, LONG_PRESS_DELAY);
}, { passive: false });

touchArea.addEventListener('touchend', (e) => {
    // „ÇØ„Ç§„Ç∫„Éú„Çø„É≥„ÇÑUI„Éú„Çø„É≥„ÅØ„Çπ„Ç≠„ÉÉ„Éó
    if (e.target.closest('.answer-btn, #help-btn, #back-to-title-btn')) return;

    e.preventDefault();

    // Èï∑Êäº„Åó„Çø„Ç§„Éû„Éº„Çí„Ç≠„É£„É≥„Çª„É´
    if (longPressTimeout) {
        clearTimeout(longPressTimeout);
        longPressTimeout = null;
    }

    // Èï∑Êäº„Åó‰∏≠„Å†„Å£„ÅüÂ†¥Âêà„ÅØ„Çø„ÉÉ„ÉóÂá¶ÁêÜ„Åó„Å™„ÅÑ
    if (isLongPressing) {
        isLongPressing = false;
        return;
    }

    if (isGameOver || isGameCleared) {
        showTitleScreen();
        return;
    }

    const touch = e.changedTouches[0];
    const deltaX = touch.clientX - touchStartX;
    const deltaY = touch.clientY - touchStartY;

    const absX = Math.abs(deltaX);
    const absY = Math.abs(deltaY);

    // „Çø„ÉÉ„ÉóÂà§ÂÆöÔºàÁßªÂãïË∑ùÈõ¢„ÅåÂ∞è„Åï„ÅÑÂ†¥ÂêàÔºâ‚Üí Âç≥Â∫ß„Å´ÂõûËª¢
    if (absX < TAP_THRESHOLD && absY < TAP_THRESHOLD) {
        handleTouchControl(() => playerRotate());
        return;
    }

    // Ê®™„Çπ„ÉØ„Ç§„ÉóÂà§ÂÆöÔºàtouchmove„Åß„É™„Ç¢„É´„Çø„Ç§„É†Âá¶ÁêÜ„Åï„Çå„Çã„Åå„ÄÅÂøµ„ÅÆ„Åü„ÇÅÔºâ
    // ‰∏ã„Çπ„ÉØ„Ç§„Éó„ÅØtouchmove„Åß„É™„Ç¢„É´„Çø„Ç§„É†Âá¶ÁêÜÊ∏à„Åø
}, { passive: false });

// „Éè„Éº„Éâ„Éâ„É≠„ÉÉ„ÉóÔºàÂç≥Â∫ß„Å´ÁùÄÂú∞Ôºâ
function hardDrop() {
    while (!isColliding(currentPiece, 0, 1)) {
        currentPiece.y++;
    }
    lockPiece();
    clearLines();
    if (!isGameCleared) newTurn();
    dropCounter = 0;
}

// ÈÄ£Á∂ö„Çπ„ÉØ„Ç§„ÉóÂØæÂøúÔºàÊåá„ÇíÂãï„Åã„Åó„Å™„Åå„Çâ„É™„Ç¢„É´„Çø„Ç§„É†Êìç‰ΩúÔºâ
let lastMoveX = 0;
let lastMoveY = 0;
touchArea.addEventListener('touchmove', (e) => {
    // „ÇØ„Ç§„Ç∫„Éú„Çø„É≥„ÇÑUI„Éú„Çø„É≥„ÅØ„Çπ„Ç≠„ÉÉ„Éó
    if (e.target.closest('.answer-btn, #help-btn, #back-to-title-btn')) return;

    e.preventDefault();

    const touch = e.touches[0];
    const deltaX = touch.clientX - touchStartX;
    const deltaY = touch.clientY - touchStartY;

    // ‰∏ÄÂÆöË∑ùÈõ¢‰ª•‰∏äÂãï„ÅÑ„Åü„ÇâÈï∑Êäº„Åó„Ç≠„É£„É≥„Çª„É´
    if (Math.abs(deltaX) > TAP_THRESHOLD || Math.abs(deltaY) > TAP_THRESHOLD) {
        if (longPressTimeout) {
            clearTimeout(longPressTimeout);
            longPressTimeout = null;
        }
        isLongPressing = false;
    }

    if (!canControl || isGameOver || isGameCleared) return;

    // Â∑¶Âè≥ÁßªÂãïÔºà„É™„Ç¢„É´„Çø„Ç§„É†Ôºâ
    const moveStepX = Math.floor(deltaX / MOVE_PER_PIXEL);
    if (moveStepX !== lastMoveX) {
        const diff = moveStepX - lastMoveX;
        if (diff > 0) {
            handleTouchControl(() => playerMove(1));
        } else if (diff < 0) {
            handleTouchControl(() => playerMove(-1));
        }
        lastMoveX = moveStepX;
    }

    // ‰∏ãËêΩ‰∏ãÔºà„É™„Ç¢„É´„Çø„Ç§„É†Ôºâ
    const moveStepY = Math.floor(deltaY / DROP_PER_PIXEL);
    if (moveStepY > lastMoveY) {
        const dropCount = moveStepY - lastMoveY;
        handleTouchControl(() => {
            for (let i = 0; i < dropCount; i++) {
                if (!isColliding(currentPiece, 0, 1)) {
                    currentPiece.y++;
                } else {
                    break;
                }
            }
            dropCounter = 0;
        });
        lastMoveY = moveStepY;
    }
}, { passive: false });

touchArea.addEventListener('touchstart', () => { lastMoveX = 0; lastMoveY = 0; }, { passive: true });

// „Çø„ÉÉ„ÉÅ„Éú„Çø„É≥Êìç‰ΩúÔºà„Çπ„Éû„ÉõÁî®Ôºâ
const btnLeft = document.getElementById('btn-left');
const btnRight = document.getElementById('btn-right');
const btnDown = document.getElementById('btn-down');
const btnRotate = document.getElementById('btn-rotate');

if (btnLeft) {
    btnLeft.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if (canControl && !isGameOver && !isGameCleared) playerMove(-1);
    }, { passive: false });
}
if (btnRight) {
    btnRight.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if (canControl && !isGameOver && !isGameCleared) playerMove(1);
    }, { passive: false });
}
if (btnDown) {
    btnDown.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if (canControl && !isGameOver && !isGameCleared) playerDrop();
    }, { passive: false });
}
if (btnRotate) {
    btnRotate.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if (canControl && !isGameOver && !isGameCleared) playerRotate();
    }, { passive: false });
}

function playerMove(offset) {
    if (!isColliding(currentPiece, offset, 0)) currentPiece.x += offset;
}

function playerDrop() {
    if (!isColliding(currentPiece, 0, 1)) {
        currentPiece.y++;
    } else {
        lockPiece();
        clearLines();
        if (!isGameCleared) newTurn();
    }
    dropCounter = 0;
}

function hardDrop() {
    while (!isColliding(currentPiece, 0, 1)) {
        currentPiece.y++;
    }
    lockPiece();
    clearLines();
    if (!isGameCleared) newTurn();
    dropCounter = 0;
}

function playerRotate() {
    const shape = currentPiece.shape;
    const newShape = shape[0].map((_, colIndex) => shape.map(row => row[colIndex]).reverse());
    if (!isColliding({ ...currentPiece, shape: newShape }, 0, 0)) currentPiece.shape = newShape;
}

// 8. ÂΩì„Åü„ÇäÂà§ÂÆö
function isColliding(piece, offsetX = 0, offsetY = 0) {
    const shape = piece.shape || piece;
    for (let y = 0; y < shape.length; y++) {
        for (let x = 0; x < shape[y].length; x++) {
            if (shape[y][x]) {
                const newX = piece.x + x + offsetX;
                const newY = piece.y + y + offsetY;
                if (newX < 0 || newX >= COLS || newY >= ROWS || (newY >= 0 && board[newY][newX])) return true;
            }
        }
    }
    return false;
}

// 9. ÊèèÁîª
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // Á¥∞„ÅÑÈªí„Ç∞„É™„ÉÉ„ÉâÁ∑ö
    drawGrid();
    drawBoard();
    if (!isGameOver && !isGameCleared) drawPiece();
}

function drawGrid() {
    ctx.strokeStyle = 'rgba(0, 0, 0, 0.15)';
    ctx.lineWidth = 0.5;
    // Á∏¶Á∑ö
    for (let x = 0; x <= COLS; x++) {
        ctx.beginPath();
        ctx.moveTo(x * BLOCK_SIZE, 0);
        ctx.lineTo(x * BLOCK_SIZE, ROWS * BLOCK_SIZE);
        ctx.stroke();
    }
    // Ê®™Á∑ö
    for (let y = 0; y <= ROWS; y++) {
        ctx.beginPath();
        ctx.moveTo(0, y * BLOCK_SIZE);
        ctx.lineTo(COLS * BLOCK_SIZE, y * BLOCK_SIZE);
        ctx.stroke();
    }
}

function drawBoard() {
    board.forEach((row, y) => {
        row.forEach((value, x) => {
            if (value > 0) {
                // ÂèØÊÑõ„ÅÑ„Éñ„É≠„ÉÉ„ÇØÊèèÁîªÔºà„Ç¢„Ç¶„Éà„É©„Ç§„É≥„Å™„ÅóÔºâ
                ctx.fillStyle = COLORS[value];
                ctx.fillRect(x * BLOCK_SIZE + 1, y * BLOCK_SIZE + 1, BLOCK_SIZE - 2, BLOCK_SIZE - 2);
            }
        });
    });
}

function drawPiece() {
    if (!currentPiece) return;
    ctx.fillStyle = currentPiece.color;
    currentPiece.shape.forEach((row, y) => {
        row.forEach((value, x) => {
            if (value) {
                const pieceX = currentPiece.x + x;
                const pieceY = currentPiece.y + y;
                // ÂèØÊÑõ„ÅÑ„Éñ„É≠„ÉÉ„ÇØÊèèÁîªÔºà„Ç¢„Ç¶„Éà„É©„Ç§„É≥„Å™„ÅóÔºâ
                ctx.fillRect(pieceX * BLOCK_SIZE + 1, pieceY * BLOCK_SIZE + 1, BLOCK_SIZE - 2, BLOCK_SIZE - 2);
            }
        });
    });
}

// 10. „Ç≤„Éº„É†Ëµ∑Âãï
document.addEventListener('DOMContentLoaded', init);