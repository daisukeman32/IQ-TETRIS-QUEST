// 1. DOMè¦ç´ ã®å–å¾—
const splashScreen = document.getElementById('splash-screen');
const titleScreen = document.getElementById('title-screen');
const ruleScreen = document.getElementById('rule-screen');
const gameWrapper = document.getElementById('game-wrapper');
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');
const audienceSelector = document.getElementById('audience-selector');
const speedSelector = document.getElementById('speed-selector');
const startBtn = document.getElementById('start-btn');
const questionElement = document.getElementById('question');
const answersElement = document.getElementById('answers');
const helpBtn = document.getElementById('help-btn');
const backToTitleBtn = document.getElementById('back-to-title-btn');
const uiContainer = document.getElementById('ui-container');
const helpCount = document.getElementById('help-count');

// 2. ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªè¦ç´ ã®ä½œæˆ
const sounds = {
    opening: new Audio('ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ã‚«ãƒ¯ã‚¤ã‚¤.mp3'),
    bgm: new Audio('POPBGM.mp3'),
    ending: new Audio('ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚«ãƒ¯ã‚¤ã‚¤.mp3'),
    cursor: new Audio('ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•11.mp3'),
    decision: new Audio('æ±ºå®šãƒœã‚¿ãƒ³ã‚’æŠ¼ã™.mp3'),
    correct: new Audio('ã‚¯ã‚¤ã‚ºæ­£è§£1.mp3'),
    wrong: new Audio('ã‚¯ã‚¤ã‚ºä¸æ­£è§£1.mp3'),
    help: new Audio('ãŠãŸã™ã‘.mp3'),
    clear: new Audio('å¤§å‹¢ã§æ‹æ‰‹.mp3'),
    congrats: new Audio('ã€ŒãŠã‚ã§ã¨ã†ã€.mp3'),
    lineClear: new Audio('æ”»æ’ƒ2.mp3')
};
sounds.opening.loop = true;
sounds.bgm.loop = true;
sounds.ending.loop = true;

// 3. ã‚²ãƒ¼ãƒ ã®å®šæ•°ã¨è¨­å®š
const COLS = 10;
const ROWS = 20;
const BLOCK_SIZE = 25;
// ãƒ‘ã‚¹ãƒ†ãƒ«ã‚«ãƒ©ãƒ¼ï¼ˆå¯æ„›ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
const COLORS = [null, '#FFB6C1', '#E6E6FA', '#98FB98', '#FFDAB9', '#87CEEB', '#DDA0DD', '#F0E68C'];
const SHAPES = [[], [[1, 1, 1, 1]], [[1, 1], [1, 1]], [[0, 1, 0], [1, 1, 1]], [[0, 0, 1], [1, 1, 1]], [[1, 0, 0], [1, 1, 1]], [[0, 1, 1], [1, 1, 0]], [[1, 1, 0], [0, 1, 1]]];
const speedSettings = { easy: 1200, normal: 800, hard: 500, extra: 350 };
const MIN_DROP_INTERVAL = 150; // ã‚¹ãƒ”ãƒ¼ãƒ‰ã®ä¸‹é™ï¼ˆã“ã‚Œä»¥ä¸Šé€Ÿããªã‚‰ãªã„ï¼‰

// æ•µã‚­ãƒ£ãƒ©è¨­å®šï¼ˆå¯æ„›ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
const enemySettings = {
    easy: { name: 'ãµã‚ãµã‚ã†ã•ã', emoji: 'ğŸ°', maxHp: 50 },
    normal: { name: 'ãã‚‰ãã‚‰ã­ã“', emoji: 'ğŸ±', maxHp: 100 },
    hard: { name: 'ã‚†ã‚ã‚†ã‚ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³', emoji: 'ğŸ¦„', maxHp: 150 },
    extra: { name: 'ã¾ã»ã†ã®ãƒ—ãƒªãƒ³ã‚»ã‚¹', emoji: 'ğŸ‘¸', maxHp: 200 }
};
const allQuizzes = {
    lowerElem: [
        // ç®—æ•°ï¼ˆè¶³ã—ç®—ãƒ»å¼•ãç®—ã®ã¿ï¼‰
        { q: '1+1=?', o: ['1', '2', '3'], a: '2' },
        { q: '2+3=?', o: ['4', '5', '6'], a: '5' },
        { q: '5+4=?', o: ['8', '9', '10'], a: '9' },
        { q: '3+6=?', o: ['8', '9', '10'], a: '9' },
        { q: '7+2=?', o: ['8', '9', '10'], a: '9' },
        { q: '10-3=?', o: ['6', '7', '8'], a: '7' },
        { q: '8-5=?', o: ['2', '3', '4'], a: '3' },
        { q: '9-4=?', o: ['4', '5', '6'], a: '5' },
        { q: '6-2=?', o: ['3', '4', '5'], a: '4' },
        { q: '10-7=?', o: ['2', '3', '4'], a: '3' },
        // æ¼¢å­—ã®èª­ã¿
        { q: 'ã€Œå±±ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã‚„ã¾', 'ã‹ã‚', 'ã†ã¿'], a: 'ã‚„ã¾' },
        { q: 'ã€Œå·ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã‚„ã¾', 'ã‹ã‚', 'ã†ã¿'], a: 'ã‹ã‚' },
        { q: 'ã€Œæœ¨ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã', 'ã¯ãª', 'ãã•'], a: 'ã' },
        { q: 'ã€ŒèŠ±ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã', 'ã¯ãª', 'ãã•'], a: 'ã¯ãª' },
        { q: 'ã€Œç©ºã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ãã‚‰', 'ã†ã¿', 'ã‚„ã¾'], a: 'ãã‚‰' },
        { q: 'ã€Œé›¨ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã‚ã‚', 'ã‚†ã', 'ã‹ãœ'], a: 'ã‚ã‚' },
        { q: 'ã€ŒçŠ¬ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã„ã¬', 'ã­ã“', 'ã¨ã‚Š'], a: 'ã„ã¬' },
        { q: 'ã€ŒçŒ«ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã„ã¬', 'ã­ã“', 'ã¨ã‚Š'], a: 'ã­ã“' },
        // ã©ã†ã¶ã¤
        { q: 'ãƒ¯ãƒ³ãƒ¯ãƒ³ã¨ãªãå‹•ç‰©ã¯ï¼Ÿ', o: ['ã­ã“', 'ã„ã¬', 'ã¨ã‚Š'], a: 'ã„ã¬' },
        { q: 'ãƒ‹ãƒ£ãƒ¼ã¨ãªãå‹•ç‰©ã¯ï¼Ÿ', o: ['ã„ã¬', 'ã­ã“', 'ã†ã—'], a: 'ã­ã“' },
        { q: 'ãƒ¢ãƒ¼ã¨ãªãå‹•ç‰©ã¯ï¼Ÿ', o: ['ã†ã¾', 'ã¶ãŸ', 'ã†ã—'], a: 'ã†ã—' },
        { q: 'é¦–ãŒé•·ã„å‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚¾ã‚¦', 'ã‚­ãƒªãƒ³', 'ãƒ©ã‚¤ã‚ªãƒ³'], a: 'ã‚­ãƒªãƒ³' },
        { q: 'é¼»ãŒé•·ã„å‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚­ãƒªãƒ³', 'ã‚¾ã‚¦', 'ã‚µãƒ«'], a: 'ã‚¾ã‚¦' },
        { q: 'ç™½ã¨é»’ã®ã‚¯ãƒã¯ï¼Ÿ', o: ['ã‚·ãƒ­ã‚¯ãƒ', 'ãƒ‘ãƒ³ãƒ€', 'ãƒ’ã‚°ãƒ'], a: 'ãƒ‘ãƒ³ãƒ€' },
        // ã„ã‚
        { q: 'ã‚Šã‚“ã”ã¯ä½•è‰²ï¼Ÿ', o: ['ã‚ãŠ', 'ã‚ã‹', 'ãã„ã‚'], a: 'ã‚ã‹' },
        { q: 'ãƒãƒŠãƒŠã¯ä½•è‰²ï¼Ÿ', o: ['ã‚ã‹', 'ãã„ã‚', 'ã¿ã©ã‚Š'], a: 'ãã„ã‚' },
        { q: 'è‘‰ã£ã±ã¯ä½•è‰²ï¼Ÿ', o: ['ã‚ã‹', 'ãã„ã‚', 'ã¿ã©ã‚Š'], a: 'ã¿ã©ã‚Š' },
        { q: 'ç©ºã¯ä½•è‰²ï¼Ÿ', o: ['ã‚ãŠ', 'ã‚ã‹', 'ãã„ã‚'], a: 'ã‚ãŠ' },
        { q: 'é›ªã¯ä½•è‰²ï¼Ÿ', o: ['ã‚ãŠ', 'ã—ã‚', 'ãã„ã‚'], a: 'ã—ã‚' },
        { q: 'æ¶ˆé˜²è»Šã¯ä½•è‰²ï¼Ÿ', o: ['ã—ã‚', 'ã‚ãŠ', 'ã‚ã‹'], a: 'ã‚ã‹' },
        // ã›ã„ã‹ã¤ãƒ»çŸ¥è­˜ã‚¯ã‚¤ã‚º
        { q: '1é€±é–“ã¯ä½•æ—¥ï¼Ÿ', o: ['5æ—¥', '7æ—¥', '10æ—¥'], a: '7æ—¥' },
        { q: '1å¹´ã¯ä½•æœˆã¾ã§ã‚ã‚‹ï¼Ÿ', o: ['10æœˆ', '12æœˆ', '14æœˆ'], a: '12æœˆ' },
        { q: '1æ—¥ã¯ä½•æ™‚é–“ï¼Ÿ', o: ['12æ™‚é–“', '24æ™‚é–“', '30æ™‚é–“'], a: '24æ™‚é–“' },
        { q: 'ãŠæ­£æœˆã¯ä½•æœˆï¼Ÿ', o: ['1æœˆ', '4æœˆ', '12æœˆ'], a: '1æœˆ' },
        { q: 'ã‚¯ãƒªã‚¹ãƒã‚¹ã¯ä½•æœˆï¼Ÿ', o: ['1æœˆ', '10æœˆ', '12æœˆ'], a: '12æœˆ' },
        { q: 'ã“ã©ã‚‚ã®æ—¥ã¯ä½•æœˆï¼Ÿ', o: ['3æœˆ', '5æœˆ', '7æœˆ'], a: '5æœˆ' },
        { q: 'ã²ãªã¾ã¤ã‚Šã¯ä½•æœˆï¼Ÿ', o: ['3æœˆ', '5æœˆ', '7æœˆ'], a: '3æœˆ' },
        { q: 'ãŸãªã°ãŸã¯ä½•æœˆï¼Ÿ', o: ['5æœˆ', '7æœˆ', '9æœˆ'], a: '7æœˆ' },
        { q: 'ä¿¡å·ã®ã€Œã¨ã¾ã‚Œã€ã¯ä½•è‰²ï¼Ÿ', o: ['ã‚ãŠ', 'ãã„ã‚', 'ã‚ã‹'], a: 'ã‚ã‹' },
        { q: 'è™¹ã¯ä½•è‰²ã‚ã‚‹ï¼Ÿ', o: ['5è‰²', '7è‰²', '10è‰²'], a: '7è‰²' },
        { q: 'ãŠæœˆã•ã¾ãŒå‡ºã‚‹ã®ã¯ã„ã¤ï¼Ÿ', o: ['ã‚ã•', 'ã²ã‚‹', 'ã‚ˆã‚‹'], a: 'ã‚ˆã‚‹' },
        { q: 'å¤ªé™½ãŒæ˜‡ã‚‹ã®ã¯ã©ã£ã¡ï¼Ÿ', o: ['ã²ãŒã—', 'ã«ã—'], a: 'ã²ãŒã—' },
        { q: 'ãƒŸãƒ„ãƒãƒãŒä½œã‚‹ç”˜ã„ã‚‚ã®ã¯ï¼Ÿ', o: ['ã•ã¨ã†', 'ã¯ã¡ã¿ã¤', 'ã‚¸ãƒ£ãƒ '], a: 'ã¯ã¡ã¿ã¤' },
        { q: 'ç‰›ã‹ã‚‰ã¨ã‚Œã‚‹ç™½ã„é£²ã¿ç‰©ã¯ï¼Ÿ', o: ['ãŠã¡ã‚ƒ', 'ãã‚…ã†ã«ã‚…ã†', 'ã‚¸ãƒ¥ãƒ¼ã‚¹'], a: 'ãã‚…ã†ã«ã‚…ã†' },
        { q: 'ã‚µãƒ³ã‚¿ã•ã‚“ãŒä¹—ã£ã¦ã„ã‚‹ã‚‚ã®ã¯ï¼Ÿ', o: ['ãã‚‹ã¾', 'ãã‚Š', 'ã²ã“ã†ã'], a: 'ãã‚Š' },
        { q: 'ãƒ‘ãƒ³ã¯ãƒ‘ãƒ³ã§ã‚‚é£Ÿã¹ã‚‰ã‚Œãªã„ãƒ‘ãƒ³ã¯ï¼Ÿ', o: ['ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³', 'ã‚ã‚“ãƒ‘ãƒ³', 'ãƒ¡ãƒ­ãƒ³ãƒ‘ãƒ³'], a: 'ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³' },
        // ã‚ã„ã•ã¤
        { q: 'æœèµ·ããŸã‚‰ä½•ã¦è¨€ã†ï¼Ÿ', o: ['ãŠã¯ã‚ˆã†', 'ã“ã‚“ã«ã¡ã¯', 'ãŠã‚„ã™ã¿'], a: 'ãŠã¯ã‚ˆã†' },
        { q: 'å¤œå¯ã‚‹å‰ã«ä½•ã¦è¨€ã†ï¼Ÿ', o: ['ãŠã¯ã‚ˆã†', 'ã•ã‚ˆã†ãªã‚‰', 'ãŠã‚„ã™ã¿'], a: 'ãŠã‚„ã™ã¿' },
        { q: 'ã”é£¯ã‚’é£Ÿã¹ã‚‹å‰ã«ä½•ã¦è¨€ã†ï¼Ÿ', o: ['ã„ãŸã ãã¾ã™', 'ã”ã¡ãã†ã•ã¾', 'ãŠã¯ã‚ˆã†'], a: 'ã„ãŸã ãã¾ã™' },
        { q: 'ã”é£¯ã‚’é£Ÿã¹ãŸå¾Œã«ä½•ã¦è¨€ã†ï¼Ÿ', o: ['ã„ãŸã ãã¾ã™', 'ã”ã¡ãã†ã•ã¾', 'ã•ã‚ˆã†ãªã‚‰'], a: 'ã”ã¡ãã†ã•ã¾' },
        { q: 'äººã«ä½•ã‹ã—ã¦ã‚‚ã‚‰ã£ãŸã‚‰ä½•ã¦è¨€ã†ï¼Ÿ', o: ['ã”ã‚ã‚“ã­', 'ã‚ã‚ŠãŒã¨ã†', 'ã•ã‚ˆã†ãªã‚‰'], a: 'ã‚ã‚ŠãŒã¨ã†' },
        // é›‘å­¦ã‚¯ã‚¤ã‚º
        { q: 'äººé–“ã®ç›®ã¯ã„ãã¤ï¼Ÿ', o: ['1ã¤', '2ã¤', '3ã¤'], a: '2ã¤' },
        { q: 'äººé–“ã®è€³ã¯ã„ãã¤ï¼Ÿ', o: ['1ã¤', '2ã¤', '4ã¤'], a: '2ã¤' },
        { q: 'äººé–“ã®æ‰‹ã®æŒ‡ã¯ä½•æœ¬ï¼Ÿ', o: ['5æœ¬', '8æœ¬', '10æœ¬'], a: '5æœ¬' },
        { q: 'ã‚¿ã‚³ã®è¶³ã¯ä½•æœ¬ï¼Ÿ', o: ['6æœ¬', '8æœ¬', '10æœ¬'], a: '8æœ¬' },
        { q: 'ã‚«ãƒ–ãƒˆãƒ ã‚·ã®è¶³ã¯ä½•æœ¬ï¼Ÿ', o: ['4æœ¬', '6æœ¬', '8æœ¬'], a: '6æœ¬' },
        { q: 'ãŠã™ã—ã«ä½¿ã†ç™½ã„ã”ã¯ã‚“ã®åå‰ã¯ï¼Ÿ', o: ['ã—ã‚ƒã‚Š', 'ãƒã‚¿', 'ã®ã‚Š'], a: 'ã—ã‚ƒã‚Š' },
        { q: 'ãŸã¾ã”ã‚’ç”£ã‚€å‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚¤ãƒŒ', 'ãƒã‚³', 'ãƒ‹ãƒ¯ãƒˆãƒª'], a: 'ãƒ‹ãƒ¯ãƒˆãƒª' },
        { q: 'ãƒãƒ¼ã‚ºã¯ä½•ã‹ã‚‰ã§ãã¦ã‚‹ï¼Ÿ', o: ['ãŸã¾ã”', 'ãã‚…ã†ã«ã‚…ã†', 'ã“ã‚€ã'], a: 'ãã‚…ã†ã«ã‚…ã†' },
        { q: 'ãŠã¨ã†ãµã¯ä½•ã‹ã‚‰ã§ãã¦ã‚‹ï¼Ÿ', o: ['ãŠã“ã‚', 'ã ã„ãš', 'ã“ã‚€ã'], a: 'ã ã„ãš' },
        { q: 'ãƒ‘ãƒ³ã¯ä½•ã‹ã‚‰ã§ãã¦ã‚‹ï¼Ÿ', o: ['ãŠã“ã‚', 'ã ã„ãš', 'ã“ã‚€ã'], a: 'ã“ã‚€ã' },
        { q: 'ã‚«ã‚¨ãƒ«ã®å­ã©ã‚‚ã¯ä½•ï¼Ÿ', o: ['ãŠãŸã¾ã˜ã‚ƒãã—', 'ã‚ˆã†ã¡ã‚…ã†', 'ã²ã‚ˆã“'], a: 'ãŠãŸã¾ã˜ã‚ƒãã—' },
        { q: 'ãƒãƒ§ã‚¦ãƒãƒ§ã®å­ã©ã‚‚ã¯ä½•ï¼Ÿ', o: ['ãŠãŸã¾ã˜ã‚ƒãã—', 'ã„ã‚‚ã‚€ã—', 'ã²ã‚ˆã“'], a: 'ã„ã‚‚ã‚€ã—' },
        { q: 'æ—¥æœ¬ã®å›½æ——ã®è‰²ã¯ï¼Ÿ', o: ['é’ã¨ç™½', 'èµ¤ã¨ç™½', 'èµ¤ã¨é’'], a: 'èµ¤ã¨ç™½' },
        { q: 'ãŠç®¸ã¯ä½•æœ¬ã§ä½¿ã†ï¼Ÿ', o: ['1æœ¬', '2æœ¬', '3æœ¬'], a: '2æœ¬' },
        { q: 'æ•‘æ€¥è»Šã¯ä½•è‰²ï¼Ÿ', o: ['èµ¤', 'ç™½', 'é’'], a: 'ç™½' },
        { q: 'ãƒ‘ãƒˆã‚«ãƒ¼ã¯ä½•è‰²ã¨ä½•è‰²ï¼Ÿ', o: ['èµ¤ã¨ç™½', 'ç™½ã¨é»’', 'é’ã¨ç™½'], a: 'ç™½ã¨é»’' },
        { q: 'æ°·ã¯ä½•ãŒå›ºã¾ã£ãŸã‚‚ã®ï¼Ÿ', o: ['ã¿ãš', 'ãã†ã', 'ã—ãŠ'], a: 'ã¿ãš' },
        { q: 'é›²ã¯ä½•ã‹ã‚‰ã§ãã¦ã‚‹ï¼Ÿ', o: ['ã‘ã‚€ã‚Š', 'ã¿ãš', 'ã‚ãŸ'], a: 'ã¿ãš' },
        { q: 'ä¸€ç•ªå¤§ãã„å‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚¾ã‚¦', 'ã‚¯ã‚¸ãƒ©', 'ã‚­ãƒªãƒ³'], a: 'ã‚¯ã‚¸ãƒ©' },
        { q: 'ä¸€ç•ªè¶³ãŒé€Ÿã„å‹•ç‰©ã¯ï¼Ÿ', o: ['ãƒ©ã‚¤ã‚ªãƒ³', 'ã‚¦ãƒ', 'ãƒãƒ¼ã‚¿ãƒ¼'], a: 'ãƒãƒ¼ã‚¿ãƒ¼' },
        { q: 'ãƒˆãƒãƒˆã¯é‡èœï¼Ÿæœç‰©ï¼Ÿ', o: ['ã‚„ã•ã„', 'ãã ã‚‚ã®'], a: 'ã‚„ã•ã„' },
        { q: 'ã„ã¡ã”ã¯é‡èœï¼Ÿæœç‰©ï¼Ÿ', o: ['ã‚„ã•ã„', 'ãã ã‚‚ã®'], a: 'ã‚„ã•ã„' },
        { q: 'ã‚¹ã‚¤ã‚«ã¯é‡èœï¼Ÿæœç‰©ï¼Ÿ', o: ['ã‚„ã•ã„', 'ãã ã‚‚ã®'], a: 'ã‚„ã•ã„' },
        { q: 'ãƒ¡ãƒ­ãƒ³ã¯é‡èœï¼Ÿæœç‰©ï¼Ÿ', o: ['ã‚„ã•ã„', 'ãã ã‚‚ã®'], a: 'ã‚„ã•ã„' },
        { q: 'ãƒšãƒ³ã‚®ãƒ³ã¯é£›ã¹ã‚‹ï¼Ÿé£›ã¹ãªã„ï¼Ÿ', o: ['ã¨ã¹ã‚‹', 'ã¨ã¹ãªã„'], a: 'ã¨ã¹ãªã„' },
        { q: 'ãƒ€ãƒãƒ§ã‚¦ã¯é£›ã¹ã‚‹ï¼Ÿé£›ã¹ãªã„ï¼Ÿ', o: ['ã¨ã¹ã‚‹', 'ã¨ã¹ãªã„'], a: 'ã¨ã¹ãªã„' },
        { q: 'ã‚«ãƒ¡ã¯ä½•å¹´ç”Ÿãã‚‹ï¼Ÿ', o: ['10å¹´', '50å¹´', '100å¹´ä»¥ä¸Š'], a: '100å¹´ä»¥ä¸Š' },
        { q: 'ãƒ›ã‚¿ãƒ«ãŒå…‰ã‚‹ã®ã¯ã©ã“ï¼Ÿ', o: ['ã‚ãŸã¾', 'ãŠãªã‹', 'ãŠã—ã‚Š'], a: 'ãŠã—ã‚Š' },
        // è¿½åŠ å•é¡Œï¼ˆ20å•ï¼‰
        { q: '4+5=?', o: ['8', '9', '10'], a: '9' },
        { q: '6+3=?', o: ['8', '9', '10'], a: '9' },
        { q: '2+7=?', o: ['8', '9', '10'], a: '9' },
        { q: '8+1=?', o: ['8', '9', '10'], a: '9' },
        { q: '7-3=?', o: ['3', '4', '5'], a: '4' },
        { q: '9-6=?', o: ['2', '3', '4'], a: '3' },
        { q: 'ã‚³ã‚±ã‚³ãƒƒã‚³ãƒ¼ã¨ãªãå‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚ã²ã‚‹', 'ã«ã‚ã¨ã‚Š', 'ã™ãšã‚'], a: 'ã«ã‚ã¨ã‚Š' },
        { q: 'ãƒ”ãƒ§ãƒ³ãƒ”ãƒ§ãƒ³è·³ã­ã‚‹å‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚«ã‚¨ãƒ«', 'ã‚«ãƒ¡', 'ãƒ˜ãƒ“'], a: 'ã‚«ã‚¨ãƒ«' },
        { q: 'æµ·ã«ä½ã‚€å¤§ããªå‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚¯ã‚¸ãƒ©', 'ãƒ©ã‚¤ã‚ªãƒ³', 'ãƒˆãƒ©'], a: 'ã‚¯ã‚¸ãƒ©' },
        { q: 'ã—ã£ã½ãŒãµã•ãµã•ãªå‹•ç‰©ã¯ï¼Ÿ', o: ['ãƒªã‚¹', 'ã‚«ãƒ¡', 'ã‚«ã‚¨ãƒ«'], a: 'ãƒªã‚¹' },
        { q: 'ãŠæ˜¼ã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹æ™‚é–“ã¯ï¼Ÿ', o: ['ã‚ã•', 'ã²ã‚‹', 'ã‚ˆã‚‹'], a: 'ã²ã‚‹' },
        { q: 'èµ¤ã„æœç‰©ã¯ï¼Ÿ', o: ['ãƒãƒŠãƒŠ', 'ã„ã¡ã”', 'ã¶ã©ã†'], a: 'ã„ã¡ã”' },
        { q: 'é»„è‰²ã„æœç‰©ã¯ï¼Ÿ', o: ['ã‚Šã‚“ã”', 'ãƒ¬ãƒ¢ãƒ³', 'ã¶ã©ã†'], a: 'ãƒ¬ãƒ¢ãƒ³' },
        { q: 'ã€Œæœˆã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã¤ã', 'ã»ã—', 'ãã‚‰'], a: 'ã¤ã' },
        { q: 'ã€Œç«ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã¿ãš', 'ã²', 'ã¤ã¡'], a: 'ã²' },
        { q: 'ã€Œæ°´ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã¿ãš', 'ã²', 'ã‹ãœ'], a: 'ã¿ãš' },
        { q: 'ã€ŒåœŸã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ã¤ã¡', 'ã„ã—', 'ã™ãª'], a: 'ã¤ã¡' },
        { q: 'ã€Œé‡‘ã€ã®èª­ã¿æ–¹ã¯ï¼Ÿ', o: ['ãã‚“', 'ãã‚“', 'ã©ã†'], a: 'ãã‚“' },
        { q: 'ãƒ–ãƒ¼ãƒ–ãƒ¼ã¨ãªãå‹•ç‰©ã¯ï¼Ÿ', o: ['ã†ã—', 'ã¶ãŸ', 'ã²ã¤ã˜'], a: 'ã¶ãŸ' },
        { q: 'ãƒ¡ã‚§ãƒ¼ã¨ãªãå‹•ç‰©ã¯ï¼Ÿ', o: ['ã†ã—', 'ã¶ãŸ', 'ã²ã¤ã˜'], a: 'ã²ã¤ã˜' },
        // â—‹Ã—ã‚¯ã‚¤ã‚º
        { q: 'ãƒ‘ãƒ³ãƒ€ã¯ç™½ã¨é»’ã®ã‚‚ã‚ˆã†ãŒã‚ã‚‹ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'â—‹' },
        { q: 'ã•ãã‚‰ã¯ç§‹ã«ã•ãèŠ±ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'Ã—' },
        { q: 'ãã†ã¯å¤§ããªè€³ã¨é•·ã„é¼»ã‚’ã‚‚ã£ã¦ã„ã‚‹ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'â—‹' },
        { q: 'ã•ã‹ãªã¯æœ¨ã«ã™ã‚“ã§ã„ã‚‹ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'Ã—' },
        { q: 'ãŸã„ã‚ˆã†ã¯å¤œã«ã—ã‹ã§ã¦ã“ãªã„ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'Ã—' },
        { q: 'ãã¤ã­ã¯çŠ¬ã®ãªã‹ã¾ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'â—‹' },
        { q: 'ãƒšãƒ³ã‚®ãƒ³ã¯å—æ¥µã§ãã‚‰ã—ã¦ã„ã‚‹ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'â—‹' },
        { q: 'ã‚Šã‚“ã”ã¯é‡èœï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'Ã—' },
        { q: 'ã‚«ãƒ¡ã¯ã™ã°ã‚„ãèµ°ã‚‹ã®ãŒã¨ãã„ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'Ã—' },
        { q: 'ã­ã“ã¯è¶³ãŒ4æœ¬ã‚ã‚‹ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'â—‹' },
        { q: 'ã‚­ãƒªãƒ³ã¯é¦–ãŒçŸ­ã„ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'Ã—' },
        { q: 'ãã˜ã‚‰ã¯ã•ã‹ãªï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'Ã—' },
        { q: 'ã¦ã‚“ã¨ã†ã‚€ã—ã¯èµ¤ã¨é»’ã®ã‚‚ã‚ˆã†ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'â—‹' },
        { q: 'ã™ã„ã‹ã¯å¤ã«ãŠã„ã—ã„ãã ã‚‚ã®ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'â—‹' },
        { q: 'ã²ã‚ˆã“ã¯ã¡ã„ã•ã„ãƒã‚³ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'Ã—' },
        { q: 'ã¯ã¨ã¯æ‰‹ç´™ã‚’ã¯ã“ã¶é³¥ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'â—‹' },
        { q: 'ã¤ãã¯å¤ªé™½ã®ã‚ˆã†ã«ã‚ã¤ã„ï¼Ÿ', o: ['â—‹', 'Ã—'], a: 'Ã—' },
        // ãªããªã
        { q: 'å†·è”µåº«ã®ä¸­ã«ã„ã‚‹å‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚¾ã‚¦', 'ã‚¯ãƒ', 'ãƒˆãƒ©'], a: 'ã‚¾ã‚¦' },
        { q: 'é£Ÿã¹ã‚‹ã¨å®‰å¿ƒã™ã‚‹ã‚±ãƒ¼ã‚­ã¯ï¼Ÿ', o: ['ã‚·ãƒ§ãƒ¼ãƒˆã‚±ãƒ¼ã‚­', 'ãƒ›ãƒƒãƒˆã‚±ãƒ¼ã‚­', 'ãƒãƒ¼ã‚ºã‚±ãƒ¼ã‚­'], a: 'ãƒ›ãƒƒãƒˆã‚±ãƒ¼ã‚­' },
        { q: 'å…¬åœ’ã§ã„ã¤ã‚‚ãƒ–ãƒ©ãƒ–ãƒ©ã—ã¦ã„ã‚‹äººæ°—è€…ã¯ï¼Ÿ', o: ['ã‚·ãƒ¼ã‚½ãƒ¼', 'ã™ã¹ã‚Šã ã„', 'ãƒ–ãƒ©ãƒ³ã‚³'], a: 'ãƒ–ãƒ©ãƒ³ã‚³' },
        { q: 'ãƒ‘ãƒ³ã¯ãƒ‘ãƒ³ã§ã‚‚é£Ÿã¹ã‚‰ã‚Œãªã„ãƒ‘ãƒ³ã¯ï¼Ÿ', o: ['ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³', 'ã‚ã‚“ãƒ‘ãƒ³', 'ãƒ¡ãƒ­ãƒ³ãƒ‘ãƒ³'], a: 'ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³' },
        { q: 'ã„ã¤ã‚‚ã‚´ãƒ›ã‚´ãƒ›ã„ã£ã¦ã„ã‚‹å‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚¤ãƒŒ', 'ã‚­ãƒ„ãƒ', 'ã‚´ãƒªãƒ©'], a: 'ã‚´ãƒªãƒ©' },
    ],
    upperElem: [
        // ç®—æ•°ãƒ»è¨ˆç®—
        { q: '7Ã—8=?', o: ['54', '56', '58', '64'], a: '56' },
        { q: '9Ã—6=?', o: ['45', '54', '56', '63'], a: '54' },
        { q: '8Ã—7=?', o: ['54', '56', '58', '64'], a: '56' },
        { q: '6Ã—7=?', o: ['36', '42', '48', '54'], a: '42' },
        { q: '9Ã—9=?', o: ['72', '81', '90', '99'], a: '81' },
        { q: '72Ã·8=?', o: ['7', '8', '9', '10'], a: '9' },
        { q: '56Ã·7=?', o: ['6', '7', '8', '9'], a: '8' },
        { q: '45Ã·9=?', o: ['4', '5', '6', '7'], a: '5' },
        { q: '63Ã·7=?', o: ['7', '8', '9', '10'], a: '9' },
        { q: '48Ã·6=?', o: ['6', '7', '8', '9'], a: '8' },
        { q: '25+38=?', o: ['53', '63', '73', '83'], a: '63' },
        { q: '100-36=?', o: ['54', '64', '74', '84'], a: '64' },
        { q: '150+250=?', o: ['300', '400', '500', '600'], a: '400' },
        { q: '1000-350=?', o: ['550', '650', '750', '850'], a: '650' },
        { q: '12Ã—5=?', o: ['50', '60', '70', '80'], a: '60' },
        { q: '100Ã·4=?', o: ['20', '25', '30', '35'], a: '25' },
        // ç†ç§‘
        { q: 'æ¤ç‰©ãŒå…‰ã§æ „é¤Šã‚’ä½œã‚‹ã“ã¨ã‚’ä½•ã¨ã„ã†ï¼Ÿ', o: ['å‘¼å¸', 'å…‰åˆæˆ', 'æ¶ˆåŒ–', 'ç™ºé…µ'], a: 'å…‰åˆæˆ' },
        { q: 'æ°´ãŒæ°·ã«ãªã‚‹æ¸©åº¦ã¯ï¼Ÿ', o: ['-10åº¦', '0åº¦', '10åº¦', '100åº¦'], a: '0åº¦' },
        { q: 'æ°´ãŒæ²¸é¨°ã™ã‚‹æ¸©åº¦ã¯ï¼Ÿ', o: ['50åº¦', '80åº¦', '100åº¦', '120åº¦'], a: '100åº¦' },
        { q: 'æœˆã®è¡¨é¢ã«ã‚ã‚‹ç©´ã‚’ä½•ã¨ã„ã†ï¼Ÿ', o: ['ã‚¯ãƒ¬ãƒ¼ã‚¿ãƒ¼', 'ãƒã‚°ãƒ', 'ç«å±±', 'æµ·'], a: 'ã‚¯ãƒ¬ãƒ¼ã‚¿ãƒ¼' },
        { q: 'åœ°çƒã®è¡›æ˜Ÿã¯ï¼Ÿ', o: ['å¤ªé™½', 'æœˆ', 'ç«æ˜Ÿ', 'é‡‘æ˜Ÿ'], a: 'æœˆ' },
        { q: 'æ˜†è™«ã®è¶³ã¯ä½•æœ¬ï¼Ÿ', o: ['4æœ¬', '6æœ¬', '8æœ¬', '10æœ¬'], a: '6æœ¬' },
        { q: 'ã‚¯ãƒ¢ã®è¶³ã¯ä½•æœ¬ï¼Ÿ', o: ['4æœ¬', '6æœ¬', '8æœ¬', '10æœ¬'], a: '8æœ¬' },
        { q: 'é­šã¯ã©ã“ã§æ¯ã‚’ã™ã‚‹ï¼Ÿ', o: ['è‚º', 'ãˆã‚‰', 'çš®ãµ', 'å£'], a: 'ãˆã‚‰' },
        { q: 'ä¸€ç•ªæ˜¼ãŒé•·ã„å­£ç¯€ã¯ï¼Ÿ', o: ['æ˜¥', 'å¤', 'ç§‹', 'å†¬'], a: 'å¤' },
        // ç¤¾ä¼šãƒ»åœ°ç†
        { q: 'æ—¥æœ¬ã§ä¸€ç•ªé«˜ã„å±±ã¯ï¼Ÿ', o: ['å¯Œå£«å±±', 'åŒ—å²³', 'æ§ãƒ¶å²³', 'ç™½å±±'], a: 'å¯Œå£«å±±' },
        { q: 'æ—¥æœ¬ã§ä¸€ç•ªé•·ã„å·ã¯ï¼Ÿ', o: ['åˆ©æ ¹å·', 'ä¿¡æ¿ƒå·', 'çŸ³ç‹©å·', 'å¤šæ‘©å·'], a: 'ä¿¡æ¿ƒå·' },
        { q: 'æ—¥æœ¬ã§ä¸€ç•ªå¤§ãã„æ¹–ã¯ï¼Ÿ', o: ['éœãƒ¶æµ¦', 'çµç¶æ¹–', 'æ´çˆºæ¹–', 'è«è¨ªæ¹–'], a: 'çµç¶æ¹–' },
        { q: 'æ—¥æœ¬ã®é¦–éƒ½ã¯ï¼Ÿ', o: ['å¤§é˜ª', 'äº¬éƒ½', 'æ±äº¬', 'åå¤å±‹'], a: 'æ±äº¬' },
        { q: 'æ—¥æœ¬ã®éƒ½é“åºœçœŒã¯ã„ãã¤ï¼Ÿ', o: ['43', '45', '47', '50'], a: '47' },
        { q: 'åŒ—æµ·é“ã®çœŒåºæ‰€åœ¨åœ°ã¯ï¼Ÿ', o: ['å‡½é¤¨', 'æ—­å·', 'æœ­å¹Œ', 'é‡§è·¯'], a: 'æœ­å¹Œ' },
        { q: 'æ²–ç¸„çœŒã®çœŒåºæ‰€åœ¨åœ°ã¯ï¼Ÿ', o: ['çŸ³å£', 'é‚£è¦‡', 'åè­·', 'å®®å¤'], a: 'é‚£è¦‡' },
        // å›½èªãƒ»æ¼¢å­—
        { q: 'ã€ŒèŠ±ã€ã®éŸ³èª­ã¿ã¯ï¼Ÿ', o: ['ã¯ãª', 'ã‚«', 'ã°ãª', 'ã‚²'], a: 'ã‚«' },
        { q: 'ã€Œå±±ã€ã®éŸ³èª­ã¿ã¯ï¼Ÿ', o: ['ã‚„ã¾', 'ã‚µãƒ³', 'ã‹ã‚', 'ã‚»ãƒ³'], a: 'ã‚µãƒ³' },
        { q: 'ã€Œæ£®ã€ã¯æœ¨ãŒã„ãã¤ï¼Ÿ', o: ['1ã¤', '2ã¤', '3ã¤', '4ã¤'], a: '3ã¤' },
        { q: 'ã€ŒçŠ¬ã‚‚æ­©ã‘ã°ã€‡ã€‡ã«å½“ãŸã‚‹ã€', o: ['çŸ³', 'æ£’', 'å£', 'äºº'], a: 'æ£’' },
        { q: 'ã€Œæ—©èµ·ãã¯ä¸‰æ–‡ã®ã€‡ã€‡ã€', o: ['æ', 'å¾—', 'æ¯’', 'ç›Š'], a: 'å¾—' },
        // è‹±èª
        { q: 'ã€ŒAppleã€ã¯æ—¥æœ¬èªã§ï¼Ÿ', o: ['ã¿ã‹ã‚“', 'ã‚Šã‚“ã”', 'ã¶ã©ã†', 'ã‚‚ã‚‚'], a: 'ã‚Šã‚“ã”' },
        { q: 'ã€ŒDogã€ã¯æ—¥æœ¬èªã§ï¼Ÿ', o: ['çŒ«', 'çŠ¬', 'é³¥', 'é­š'], a: 'çŠ¬' },
        { q: 'ã€ŒCatã€ã¯æ—¥æœ¬èªã§ï¼Ÿ', o: ['çŒ«', 'çŠ¬', 'é³¥', 'é­š'], a: 'çŒ«' },
        { q: 'ã€ŒRedã€ã¯ä½•è‰²ï¼Ÿ', o: ['é’', 'èµ¤', 'é»„', 'ç·‘'], a: 'èµ¤' },
        { q: 'ã€ŒBlueã€ã¯ä½•è‰²ï¼Ÿ', o: ['é’', 'èµ¤', 'é»„', 'ç·‘'], a: 'é’' },
        { q: 'ã€ŒMondayã€ã¯ä½•æ›œæ—¥ï¼Ÿ', o: ['æœˆæ›œæ—¥', 'ç«æ›œæ—¥', 'æ°´æ›œæ—¥', 'æ—¥æ›œæ—¥'], a: 'æœˆæ›œæ—¥' },
        { q: 'ã€ŒSundayã€ã¯ä½•æ›œæ—¥ï¼Ÿ', o: ['æœˆæ›œæ—¥', 'åœŸæ›œæ—¥', 'é‡‘æ›œæ—¥', 'æ—¥æ›œæ—¥'], a: 'æ—¥æ›œæ—¥' },
        { q: 'æ•°å­—ã®ã€Œ5ã€ã¯è‹±èªã§ï¼Ÿ', o: ['Three', 'Four', 'Five', 'Six'], a: 'Five' },
        // è¿½åŠ å•é¡Œï¼ˆ20å•ï¼‰
        { q: '12Ã—5=?', o: ['50', '60', '70', '80'], a: '60' },
        { q: '144Ã·12=?', o: ['10', '11', '12', '13'], a: '12' },
        { q: '25Ã—4=?', o: ['90', '100', '110', '120'], a: '100' },
        { q: '81Ã·9=?', o: ['8', '9', '10', '11'], a: '9' },
        { q: '15Ã—6=?', o: ['80', '90', '100', '110'], a: '90' },
        { q: 'æ¤ç‰©ãŒè‚²ã¤ã®ã«å¿…è¦ãªã‚‚ã®ã¯ï¼Ÿ', o: ['æ°´ã¨å…‰', 'çŸ³ã¨ç ‚', 'é¢¨ã¨é›²', 'å¡©ã¨ç ‚ç³–'], a: 'æ°´ã¨å…‰' },
        { q: 'å¤ªé™½ç³»ã§ä¸€ç•ªå¤§ãã„æƒ‘æ˜Ÿã¯ï¼Ÿ', o: ['åœ°çƒ', 'æœ¨æ˜Ÿ', 'åœŸæ˜Ÿ', 'ç«æ˜Ÿ'], a: 'æœ¨æ˜Ÿ' },
        { q: 'è™«ã‚ãŒã­ã§å¤ªé™½ã®å…‰ã‚’é›†ã‚ã‚‹ã¨ï¼Ÿ', o: ['å†·ãŸããªã‚‹', 'ç†±ããªã‚‹', 'å¤‰ã‚ã‚‰ãªã„', 'æ¶ˆãˆã‚‹'], a: 'ç†±ããªã‚‹' },
        { q: 'ç£çŸ³ã«ãã£ã¤ãã®ã¯ï¼Ÿ', o: ['é‰„', 'ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯', 'æœ¨', 'ã‚¬ãƒ©ã‚¹'], a: 'é‰„' },
        { q: 'åœ°å›³ã§åŒ—ã¯ã©ã®æ–¹å‘ï¼Ÿ', o: ['ä¸Š', 'ä¸‹', 'å³', 'å·¦'], a: 'ä¸Š' },
        { q: 'ä¸€å¹´ã§ä¸€ç•ªæ˜¼ãŒé•·ã„æ—¥ã¯ï¼Ÿ', o: ['æ˜¥åˆ†', 'å¤è‡³', 'ç§‹åˆ†', 'å†¬è‡³'], a: 'å¤è‡³' },
        { q: 'ã€Œèµ°ã‚‹ã€ã®åå¯¾ã¯ï¼Ÿ', o: ['æ­¢ã¾ã‚‹', 'æ­©ã', 'é£›ã¶', 'æ³³ã'], a: 'æ­¢ã¾ã‚‹' },
        { q: 'ã€Œå¤§ãã„ã€ã®åå¯¾ã¯ï¼Ÿ', o: ['å°ã•ã„', 'ä½ã„', 'å°‘ãªã„', 'è»½ã„'], a: 'å°ã•ã„' },
        { q: 'ã€Œé€Ÿã„ã€ã®åå¯¾ã¯ï¼Ÿ', o: ['é…ã„', 'å¼±ã„', 'è»½ã„', 'æš—ã„'], a: 'é…ã„' },
        { q: 'ã€Œæœã€ã®åå¯¾ã¯ï¼Ÿ', o: ['å¤œ', 'æ˜¼', 'å¤•æ–¹', 'æ˜ã‘æ–¹'], a: 'å¤œ' },
        { q: 'ã€Œå§‹ã¾ã‚Šã€ã®åå¯¾ã¯ï¼Ÿ', o: ['çµ‚ã‚ã‚Š', 'é€”ä¸­', 'ä¼‘ã¿', 'ç¶šã'], a: 'çµ‚ã‚ã‚Š' },
        { q: 'ã€ŒYellowã€ã¯ä½•è‰²ï¼Ÿ', o: ['é’', 'èµ¤', 'é»„', 'ç·‘'], a: 'é»„' },
        { q: 'ã€ŒGreenã€ã¯ä½•è‰²ï¼Ÿ', o: ['é’', 'èµ¤', 'é»„', 'ç·‘'], a: 'ç·‘' },
        { q: 'ã€ŒSaturdayã€ã¯ä½•æ›œæ—¥ï¼Ÿ', o: ['æœˆæ›œæ—¥', 'åœŸæ›œæ—¥', 'é‡‘æ›œæ—¥', 'æ—¥æ›œæ—¥'], a: 'åœŸæ›œæ—¥' },
        { q: 'æ•°å­—ã®ã€Œ10ã€ã¯è‹±èªã§ï¼Ÿ', o: ['Eight', 'Nine', 'Ten', 'Eleven'], a: 'Ten' },
        // é¢ç™½é›‘å­¦ã‚¯ã‚¤ã‚ºï¼ˆå°å­¦ç”Ÿå‘ã‘ï¼‰
        { q: 'ãƒ‘ãƒ³ãƒ€ã®ã—ã£ã½ã¯ä½•è‰²ï¼Ÿ', o: ['é»’', 'ç™½', 'èŒ¶è‰²', 'ãƒ”ãƒ³ã‚¯'], a: 'ç™½' },
        { q: 'ãƒ©ã‚¯ãƒ€ã®ã“ã¶ã«ã¯ä½•ãŒå…¥ã£ã¦ã„ã‚‹ï¼Ÿ', o: ['æ°´', 'è„‚è‚ª', 'ç©ºæ°—', 'éª¨'], a: 'è„‚è‚ª' },
        { q: 'ã‚µã‚¤ã‚³ãƒ­ã®1ã®åå¯¾å´ã¯ä½•ï¼Ÿ', o: ['2', '4', '5', '6'], a: '6' },
        { q: 'ã‚­ãƒªãƒ³ã¯1æ—¥ä½•åˆ†ãã‚‰ã„å¯ã‚‹ï¼Ÿ', o: ['ç´„20åˆ†', 'ç´„2æ™‚é–“', 'ç´„5æ™‚é–“', 'ç´„8æ™‚é–“'], a: 'ç´„20åˆ†' },
        { q: 'ã‚·ãƒ­ã‚¯ãƒã®è‚Œã¯ä½•è‰²ï¼Ÿ', o: ['ç™½', 'é»’', 'ãƒ”ãƒ³ã‚¯', 'èŒ¶è‰²'], a: 'é»’' },
        { q: 'ã‚¿ã‚³ã®è¶³ã¯ä½•æœ¬ï¼Ÿ', o: ['6æœ¬', '8æœ¬', '10æœ¬', '12æœ¬'], a: '8æœ¬' },
        { q: 'ã‚¤ã‚«ã®è¶³ã¯ä½•æœ¬ï¼Ÿ', o: ['6æœ¬', '8æœ¬', '10æœ¬', '12æœ¬'], a: '10æœ¬' },
        { q: 'ãƒãƒãƒŸãƒ„ã¯è…ã‚‹ï¼Ÿè…ã‚‰ãªã„ï¼Ÿ', o: ['ã™ãè…ã‚‹', '1å¹´ã§è…ã‚‹', '10å¹´ã§è…ã‚‹', 'è…ã‚‰ãªã„'], a: 'è…ã‚‰ãªã„' },
        { q: 'ãƒšãƒ³ã‚®ãƒ³ã¯é³¥ï¼Ÿé­šï¼Ÿ', o: ['é³¥', 'é­š', 'å“ºä¹³é¡', 'ä¸¡ç”Ÿé¡'], a: 'é³¥' },
        { q: 'ã‚³ã‚¢ãƒ©ã¯1æ—¥ä½•æ™‚é–“å¯ã‚‹ï¼Ÿ', o: ['ç´„8æ™‚é–“', 'ç´„12æ™‚é–“', 'ç´„18æ™‚é–“', 'ç´„22æ™‚é–“'], a: 'ç´„22æ™‚é–“' },
    ],
    adult: [
        // ä¸€èˆ¬å¸¸è­˜
        { q: '1å¹´ã¯ä½•æ—¥ï¼Ÿï¼ˆå¹³å¹´ï¼‰', o: ['360æ—¥', '365æ—¥', '366æ—¥', '370æ—¥'], a: '365æ—¥' },
        { q: '1æ™‚é–“ã¯ä½•åˆ†ï¼Ÿ', o: ['30åˆ†', '60åˆ†', '100åˆ†', '120åˆ†'], a: '60åˆ†' },
        { q: '1ã‚­ãƒ­ã¯ä½•ãƒ¡ãƒ¼ãƒˆãƒ«ï¼Ÿ', o: ['100m', '500m', '1000m', '10000m'], a: '1000m' },
        { q: 'æ—¥æœ¬ã®éƒ½é“åºœçœŒã¯ã„ãã¤ï¼Ÿ', o: ['43', '45', '47', '50'], a: '47' },
        { q: 'å¹²æ”¯ã¯å…¨éƒ¨ã§ä½•ç¨®é¡ï¼Ÿ', o: ['10', '12', '14', '16'], a: '12' },
        { q: '1ãƒ€ãƒ¼ã‚¹ã¯ä½•å€‹ï¼Ÿ', o: ['6å€‹', '10å€‹', '12å€‹', '24å€‹'], a: '12å€‹' },
        // è¨ˆç®—
        { q: '25+75=?', o: ['90', '100', '110', '120'], a: '100' },
        { q: '1000-350=?', o: ['550', '650', '750', '850'], a: '650' },
        { q: '12Ã—8=?', o: ['86', '96', '106', '116'], a: '96' },
        { q: '144Ã·12=?', o: ['10', '11', '12', '13'], a: '12' },
        { q: '500å††ã®20%ã¯ï¼Ÿ', o: ['50å††', '100å††', '150å††', '200å††'], a: '100å††' },
        { q: 'æ™‚é€Ÿ60kmã§2æ™‚é–“èµ°ã‚‹ã¨ä½•kmï¼Ÿ', o: ['100km', '120km', '140km', '160km'], a: '120km' },
        // æ—¥æœ¬ã®åœ°ç†
        { q: 'æ—¥æœ¬ã§ä¸€ç•ªé«˜ã„å±±ã¯ï¼Ÿ', o: ['å¯Œå£«å±±', 'åŒ—å²³', 'æ§ãƒ¶å²³', 'ç™½å±±'], a: 'å¯Œå£«å±±' },
        { q: 'æ—¥æœ¬ã§ä¸€ç•ªå¤§ãã„éƒ½é“åºœçœŒã¯ï¼Ÿ', o: ['åŒ—æµ·é“', 'å²©æ‰‹çœŒ', 'é•·é‡çœŒ', 'æ–°æ½ŸçœŒ'], a: 'åŒ—æµ·é“' },
        { q: 'æ—¥æœ¬ã§ä¸€ç•ªå°ã•ã„çœŒã¯ï¼Ÿ', o: ['æ²–ç¸„çœŒ', 'æ±äº¬éƒ½', 'é¦™å·çœŒ', 'å¤§é˜ªåºœ'], a: 'é¦™å·çœŒ' },
        { q: 'æ—¥æœ¬ã®é¦–éƒ½ã¯ï¼Ÿ', o: ['å¤§é˜ª', 'äº¬éƒ½', 'æ±äº¬', 'åå¤å±‹'], a: 'æ±äº¬' },
        { q: 'ã‚¿ã‚¤ã®é¦–éƒ½ã¯ï¼Ÿ', o: ['ãƒãƒã‚¤', 'ãƒãƒ³ã‚³ã‚¯', 'ãƒãƒ‹ãƒ©', 'ã‚¸ãƒ£ã‚«ãƒ«ã‚¿'], a: 'ãƒãƒ³ã‚³ã‚¯' },
        // ä¸–ç•Œ
        { q: 'è‡ªç”±ã®å¥³ç¥ãŒã‚ã‚‹å›½ã¯ï¼Ÿ', o: ['ã‚¤ã‚®ãƒªã‚¹', 'ãƒ•ãƒ©ãƒ³ã‚¹', 'ã‚¢ãƒ¡ãƒªã‚«', 'ã‚¤ã‚¿ãƒªã‚¢'], a: 'ã‚¢ãƒ¡ãƒªã‚«' },
        { q: 'ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ãŒã‚ã‚‹å›½ã¯ï¼Ÿ', o: ['ã‚¤ãƒ³ãƒ‰', 'ã‚®ãƒªã‚·ãƒ£', 'ã‚¨ã‚¸ãƒ—ãƒˆ', 'ã‚¤ã‚¿ãƒªã‚¢'], a: 'ã‚¨ã‚¸ãƒ—ãƒˆ' },
        { q: 'ä¸–ç•Œã§ä¸€ç•ªäººå£ãŒå¤šã„å›½ã¯ï¼Ÿ', o: ['ã‚¤ãƒ³ãƒ‰', 'ä¸­å›½', 'ã‚¢ãƒ¡ãƒªã‚«', 'ã‚¤ãƒ³ãƒ‰ãƒã‚·ã‚¢'], a: 'ã‚¤ãƒ³ãƒ‰' },
        { q: 'ãƒ‘ã‚¹ã‚¿ã®ç™ºç¥¥å›½ã¯ï¼Ÿ', o: ['ãƒ•ãƒ©ãƒ³ã‚¹', 'ã‚¹ãƒšã‚¤ãƒ³', 'ã‚¤ã‚¿ãƒªã‚¢', 'ã‚®ãƒªã‚·ãƒ£'], a: 'ã‚¤ã‚¿ãƒªã‚¢' },
        { q: 'ã‚«ãƒ¬ãƒ¼ã®ç™ºç¥¥å›½ã¯ï¼Ÿ', o: ['æ—¥æœ¬', 'ã‚¤ã‚®ãƒªã‚¹', 'ã‚¤ãƒ³ãƒ‰', 'ã‚¿ã‚¤'], a: 'ã‚¤ãƒ³ãƒ‰' },
        // ã‚¹ãƒãƒ¼ãƒ„
        { q: 'ã‚µãƒƒã‚«ãƒ¼ã¯1ãƒãƒ¼ãƒ ä½•äººï¼Ÿ', o: ['9äºº', '10äºº', '11äºº', '12äºº'], a: '11äºº' },
        { q: 'é‡çƒã¯1ãƒãƒ¼ãƒ ä½•äººï¼Ÿ', o: ['8äºº', '9äºº', '10äºº', '11äºº'], a: '9äºº' },
        { q: 'ãƒã‚¹ã‚±ãƒƒãƒˆãƒœãƒ¼ãƒ«ã¯1ãƒãƒ¼ãƒ ä½•äººï¼Ÿ', o: ['4äºº', '5äºº', '6äºº', '7äºº'], a: '5äºº' },
        { q: 'ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯ã¯ä½•å¹´ã”ã¨ï¼Ÿ', o: ['2å¹´', '3å¹´', '4å¹´', '5å¹´'], a: '4å¹´' },
        // é£Ÿã¹ç‰©
        { q: 'ãƒ“ãƒ¼ãƒ«ã®ä¸»åŸæ–™ã¯ï¼Ÿ', o: ['ç±³', 'éº¦', 'ã¨ã†ã‚‚ã‚ã“ã—', 'èŠ‹'], a: 'éº¦' },
        { q: 'ç´è±†ã¯ä½•ã‹ã‚‰ã§ãã‚‹ï¼Ÿ', o: ['å°éº¦', 'å¤§è±†', 'ç±³', 'ã¨ã†ã‚‚ã‚ã“ã—'], a: 'å¤§è±†' },
        { q: 'ãƒ©ãƒ¼ãƒ¡ãƒ³ã®ã€Œã¨ã‚“ã“ã¤ã€ã¯ä½•ã®éª¨ï¼Ÿ', o: ['ç‰›', 'é¶', 'è±š', 'é­š'], a: 'è±š' },
        { q: 'ãƒ¯ã‚¤ãƒ³ã¯ä½•ã‹ã‚‰ã§ãã‚‹ï¼Ÿ', o: ['ã‚Šã‚“ã”', 'ã¶ã©ã†', 'ã‚ªãƒ¬ãƒ³ã‚¸', 'ã‚‚ã‚‚'], a: 'ã¶ã©ã†' },
        // ç”Ÿæ´»
        { q: 'è­¦å¯Ÿã®é›»è©±ç•ªå·ã¯ï¼Ÿ', o: ['110', '119', '118', '117'], a: '110' },
        { q: 'æ•‘æ€¥è»Šã®é›»è©±ç•ªå·ã¯ï¼Ÿ', o: ['110', '119', '118', '117'], a: '119' },
        { q: 'æ—¥æœ¬ã§è»Šã¯é“è·¯ã®ã©ã¡ã‚‰å´ã‚’èµ°è¡Œã™ã‚‹ï¼Ÿ', o: ['å·¦å´', 'å³å´', 'ä¸­å¤®', 'æ±ºã¾ã‚Šãªã—'], a: 'å·¦å´' },
        { q: 'æ¶ˆè²»ç¨ã¯ä½•%ï¼Ÿ', o: ['5%', '8%', '10%', '15%'], a: '10%' },
        // å‹•ç‰©
        { q: 'ãƒ‘ãƒ³ãƒ€ã®ä¸»é£Ÿã¯ï¼Ÿ', o: ['è‚‰', 'ç«¹', 'æœç‰©', 'é­š'], a: 'ç«¹' },
        { q: 'ä¸–ç•Œæœ€å¤§ã®å‹•ç‰©ã¯ï¼Ÿ', o: ['ã‚¢ãƒ•ãƒªã‚«ã‚¾ã‚¦', 'ã‚·ãƒ­ãƒŠã‚¬ã‚¹ã‚¯ã‚¸ãƒ©', 'ã‚­ãƒªãƒ³', 'ã‚¸ãƒ³ãƒ™ã‚¨ã‚¶ãƒ¡'], a: 'ã‚·ãƒ­ãƒŠã‚¬ã‚¹ã‚¯ã‚¸ãƒ©' },
        { q: 'çš‡å¸ãƒšãƒ³ã‚®ãƒ³ã§åµã‚’æ¸©ã‚ã‚‹ã®ã¯ã‚ªã‚¹ï¼Ÿãƒ¡ã‚¹ï¼Ÿ', o: ['ã‚ªã‚¹', 'ãƒ¡ã‚¹', 'ä¸¡æ–¹', 'æ¸©ã‚ãªã„'], a: 'ã‚ªã‚¹' },
        { q: 'ã‚¿ã‚³ã®è¶³ã¯ä½•æœ¬ï¼Ÿ', o: ['6æœ¬', '8æœ¬', '10æœ¬', '12æœ¬'], a: '8æœ¬' },
        // è¿½åŠ å•é¡Œï¼ˆ20å•ï¼‰
        { q: 'ã€Œä¸‰æ¨©åˆ†ç«‹ã€ã®ä¸‰æ¨©ã§ãªã„ã‚‚ã®ã¯ï¼Ÿ', o: ['ç«‹æ³•', 'è¡Œæ”¿', 'å¸æ³•', 'çµŒæ¸ˆ'], a: 'çµŒæ¸ˆ' },
        { q: 'ãƒãƒ¼ãƒ™ãƒ«è³ã‚’å‰µè¨­ã—ãŸå›½ã¯ï¼Ÿ', o: ['ã‚¢ãƒ¡ãƒªã‚«', 'ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³', 'ã‚¤ã‚®ãƒªã‚¹', 'ãƒ‰ã‚¤ãƒ„'], a: 'ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³' },
        { q: 'ã€Œæºæ°ç‰©èªã€ã®ä½œè€…ã¯ï¼Ÿ', o: ['æ¸…å°‘ç´è¨€', 'ç´«å¼éƒ¨', 'å’Œæ³‰å¼éƒ¨', 'å°é‡å°ç”º'], a: 'ç´«å¼éƒ¨' },
        { q: 'äººä½“ã§æœ€ã‚‚å¤§ãã„è‡“å™¨ã¯ï¼Ÿ', o: ['å¿ƒè‡“', 'è‚è‡“', 'èƒƒ', 'è…¸'], a: 'è‚è‡“' },
        { q: 'ä¸–ç•Œã§ä¸€ç•ªå¤§ãã„å›½ã¯ï¼Ÿ', o: ['ä¸­å›½', 'ã‚¢ãƒ¡ãƒªã‚«', 'ãƒ­ã‚·ã‚¢', 'ã‚«ãƒŠãƒ€'], a: 'ãƒ­ã‚·ã‚¢' },
        { q: 'ã‚¨ãƒƒãƒ•ã‚§ãƒ«å¡”ãŒã‚ã‚‹å›½ã¯ï¼Ÿ', o: ['ã‚¤ã‚¿ãƒªã‚¢', 'ãƒ•ãƒ©ãƒ³ã‚¹', 'ãƒ‰ã‚¤ãƒ„', 'ã‚¹ãƒšã‚¤ãƒ³'], a: 'ãƒ•ãƒ©ãƒ³ã‚¹' },
        { q: 'ä¸–ç•Œä¸€é•·ã„å·ã¯ï¼Ÿ', o: ['ã‚¢ãƒã‚¾ãƒ³å·', 'ãƒŠã‚¤ãƒ«å·', 'é•·æ±Ÿ', 'ãƒŸã‚·ã‚·ãƒƒãƒ”å·'], a: 'ãƒŠã‚¤ãƒ«å·' },
        { q: 'H2Oã¨ã¯ä½•ï¼Ÿ', o: ['æ°´', 'å¡©', 'ç ‚ç³–', 'é…¸ç´ '], a: 'æ°´' },
        { q: 'åœ°çƒã®è¡›æ˜Ÿã¯ï¼Ÿ', o: ['å¤ªé™½', 'æœˆ', 'ç«æ˜Ÿ', 'é‡‘æ˜Ÿ'], a: 'æœˆ' },
        { q: 'å…ƒç´ è¨˜å·ã€ŒAuã€ã¯ä½•ï¼Ÿ', o: ['éŠ€', 'é‡‘', 'éŠ…', 'é‰„'], a: 'é‡‘' },
        { q: 'é–¢ãƒ¶åŸã®æˆ¦ã„ã¯è¥¿æš¦ä½•å¹´ï¼Ÿ', o: ['1500å¹´', '1600å¹´', '1700å¹´', '1800å¹´'], a: '1600å¹´' },
        { q: 'æ˜æ²»ç¶­æ–°ã¯ä½•ä¸–ç´€ï¼Ÿ', o: ['17ä¸–ç´€', '18ä¸–ç´€', '19ä¸–ç´€', '20ä¸–ç´€'], a: '19ä¸–ç´€' },
        { q: 'é–å›½ã‚’è¡Œã£ãŸå°†è»ã¯ï¼Ÿ', o: ['å¾³å·å®¶åº·', 'å¾³å·å®¶å…‰', 'å¾³å·å‰å®—', 'å¾³å·ç¶±å‰'], a: 'å¾³å·å®¶å…‰' },
        { q: 'å¹³å®‰äº¬ãŒã‚ã£ãŸå ´æ‰€ã¯ï¼Ÿ', o: ['å¥ˆè‰¯', 'äº¬éƒ½', 'å¤§é˜ª', 'éŒå€‰'], a: 'äº¬éƒ½' },
        { q: '1ãƒãƒ³ãƒ‰ã¯ç´„ä½•ã‚°ãƒ©ãƒ ï¼Ÿ', o: ['250g', '350g', '450g', '550g'], a: '450g' },
        { q: '1ã‚¤ãƒ³ãƒã¯ç´„ä½•cmï¼Ÿ', o: ['1.5cm', '2.0cm', '2.5cm', '3.0cm'], a: '2.5cm' },
        { q: 'ç´…èŒ¶ã®ç”£åœ°ã¨ã—ã¦æœ‰åãªå›½ã¯ï¼Ÿ', o: ['ã‚¤ãƒ³ãƒ‰', 'ãƒ–ãƒ©ã‚¸ãƒ«', 'ã‚¨ãƒã‚ªãƒ”ã‚¢', 'ãƒ™ãƒˆãƒŠãƒ '], a: 'ã‚¤ãƒ³ãƒ‰' },
        { q: 'ã‚³ãƒ¼ãƒ’ãƒ¼ã®ç”£åœ°ã¨ã—ã¦æœ‰åãªå›½ã¯ï¼Ÿ', o: ['ã‚¤ãƒ³ãƒ‰', 'ãƒ–ãƒ©ã‚¸ãƒ«', 'ä¸­å›½', 'ãƒ¡ã‚­ã‚·ã‚³'], a: 'ãƒ–ãƒ©ã‚¸ãƒ«' },
        { q: 'ãƒãƒ¬ãƒ¼ãƒœãƒ¼ãƒ«ã¯1ãƒãƒ¼ãƒ ä½•äººï¼Ÿ', o: ['5äºº', '6äºº', '7äºº', '8äºº'], a: '6äºº' },
        { q: 'ãƒ©ã‚°ãƒ“ãƒ¼ã¯1ãƒãƒ¼ãƒ ä½•äººï¼Ÿ', o: ['11äºº', '13äºº', '15äºº', '17äºº'], a: '15äºº' },
        // é¢ç™½é›‘å­¦ã‚¯ã‚¤ã‚ºï¼ˆãƒˆãƒªãƒ“ã‚¢ï¼‰
        { q: 'ãƒ­ãƒ¼ãƒã«ã‚ã‚‹ã€ŒçœŸå®Ÿã®å£ã€ã®æ­£ä½“ã¯ï¼Ÿ', o: ['å¤§ç†çŸ³ã®å½«åˆ»', 'ãƒãƒ³ãƒ›ãƒ¼ãƒ«ã®è“‹', 'äº•æˆ¸ã®è“‹', 'ç¥æ®¿ã®ä¸€éƒ¨'], a: 'ãƒãƒ³ãƒ›ãƒ¼ãƒ«ã®è“‹' },
        { q: 'ã‚¢ãƒ³ãƒ‘ãƒ³ãƒãƒ³ã®å¥½ããªé£Ÿã¹ç‰©ã¯ï¼Ÿ', o: ['ã‚ã‚“ãƒ‘ãƒ³', 'ã‚«ãƒ¬ãƒ¼ãƒ‘ãƒ³', 'ãªã„', 'ã¤ã¶ã‚ã‚“'], a: 'ãªã„' },
        { q: 'å—æ¥µã§ã‹ã‹ã‚Šã«ãã„ç—…æ°—ã¯ï¼Ÿ', o: ['ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶', 'é¢¨é‚ª', 'èƒƒè…¸ç‚', 'é ­ç—›'], a: 'é¢¨é‚ª' },
        { q: 'æ—¥æœ¬ã§ä¸€ç•ªå¤šã„åº—ã¯ï¼Ÿ', o: ['ã‚³ãƒ³ãƒ“ãƒ‹', 'ç¾å®¹é™¢', 'é£²é£Ÿåº—', 'ãƒ‰ãƒ©ãƒƒã‚°ã‚¹ãƒˆã‚¢'], a: 'ç¾å®¹é™¢' },
        { q: 'ãƒ ãƒ¼ãƒŸãƒ³ãƒ»ã‚¸ãƒ£ãƒ ãŠã˜ã•ã‚“ãƒ»ãƒã‚¿ã‚³ã•ã‚“ã®æ­£ä½“ã¯ï¼Ÿ', o: ['äººé–“', 'å¦–ç²¾', 'å‹•ç‰©', 'ãƒ­ãƒœãƒƒãƒˆ'], a: 'å¦–ç²¾' },
        { q: 'ãƒ‘ãƒ³ãƒ€ã®ã—ã£ã½ã¯ä½•è‰²ï¼Ÿ', o: ['é»’', 'ç™½', 'èŒ¶è‰²', 'ç°è‰²'], a: 'ç™½' },
        { q: 'ãƒ©ã‚¯ãƒ€ã®ã“ã¶ã®ä¸­èº«ã¯ï¼Ÿ', o: ['æ°´', 'è„‚è‚ª', 'ç©ºæ°—', 'ç­‹è‚‰'], a: 'è„‚è‚ª' },
        { q: 'ãƒ‘ãƒ³ãƒ€ã®æŒ‡ã¯ä½•æœ¬ï¼Ÿ', o: ['5æœ¬', '6æœ¬', '7æœ¬', '8æœ¬'], a: '7æœ¬' },
        { q: 'ã‚µã‚¤ã‚³ãƒ­ã®1ã®åå¯¾å´ã¯ï¼Ÿ', o: ['4', '5', '6', '2'], a: '6' },
        { q: 'ã‚­ãƒªãƒ³ã®ç¡çœ æ™‚é–“ã¯1æ—¥ç´„ä½•åˆ†ï¼Ÿ', o: ['ç´„20åˆ†', 'ç´„2æ™‚é–“', 'ç´„6æ™‚é–“', 'ç´„10æ™‚é–“'], a: 'ç´„20åˆ†' },
        { q: 'ã‚´ãƒªãƒ©ã®è¡€æ¶²å‹ã¯å…¨éƒ¨ä½•å‹ï¼Ÿ', o: ['Aå‹', 'Bå‹', 'Oå‹', 'ABå‹'], a: 'Bå‹' },
        { q: 'ã‚«ã‚¿ãƒ„ãƒ ãƒªã®æ­¯ã¯ç´„ä½•æœ¬ï¼Ÿ', o: ['ç´„100æœ¬', 'ç´„2000æœ¬', 'ç´„1ä¸‡æœ¬', 'ç´„2ä¸‡æœ¬'], a: 'ç´„2ä¸‡æœ¬' },
        { q: 'ä¸–ç•Œä¸€é«˜ä¾¡ãªã‚³ãƒ¼ãƒ’ãƒ¼è±†ã¯ä½•ã®ç³ã‹ã‚‰æ¡å–ï¼Ÿ', o: ['è±¡', 'ã‚¸ãƒ£ã‚³ã‚¦ãƒã‚³', 'ã‚³ã‚¦ãƒ¢ãƒª', 'ã‚µãƒ«'], a: 'ã‚¸ãƒ£ã‚³ã‚¦ãƒã‚³' },
        { q: 'ç¾å­˜ã™ã‚‹ä¸–ç•Œæœ€å¤ã®å¯¿å¸å±‹ãŒã‚ã‚‹çœŒã¯ï¼Ÿ', o: ['æ±äº¬éƒ½', 'å¤§é˜ªåºœ', 'å¥ˆè‰¯çœŒ', 'äº¬éƒ½åºœ'], a: 'å¥ˆè‰¯çœŒ' },
        { q: 'ä¸–ç•Œåˆã®å›è»¢å¯¿å¸åº—ãŒã‚ªãƒ¼ãƒ—ãƒ³ã—ãŸå ´æ‰€ã¯ï¼Ÿ', o: ['æ±äº¬', 'å¤§é˜ª', 'åŒ—æµ·é“', 'ç¦å²¡'], a: 'å¤§é˜ª' },
        { q: 'ã‚·ãƒ­ã‚¯ãƒï¼ˆãƒ›ãƒƒã‚­ãƒ§ã‚¯ã‚°ãƒï¼‰ã®è‚Œã®è‰²ã¯ï¼Ÿ', o: ['ç™½', 'é»’', 'ãƒ”ãƒ³ã‚¯', 'èŒ¶è‰²'], a: 'é»’' },
        { q: 'ãƒ•ãƒ©ãƒŸãƒ³ã‚´ãŒç‰‡è¶³ã§ç«‹ã¤ç†ç”±ã¯ï¼Ÿ', o: ['ãƒãƒ©ãƒ³ã‚¹ãŒè‰¯ã„', 'ä½“æ¸©ã‚’ä¿ã¤', 'ã‚«ãƒƒã‚³ã„ã„ã‹ã‚‰', 'æ•µã‹ã‚‰èº«ã‚’å®ˆã‚‹'], a: 'ä½“æ¸©ã‚’ä¿ã¤' },
        { q: 'ä¸–ç•Œã§æœ€åˆã«ã‚«ãƒ¬ãƒ¼ãƒ©ã‚¤ã‚¹ã‚’é£Ÿã¹ãŸæ—¥æœ¬äººã¯ï¼Ÿ', o: ['ç¦æ²¢è«­å‰', 'å‚æœ¬é¾é¦¬', 'å±±å²¡é‰„èˆŸ', 'è¥¿éƒ·éš†ç››'], a: 'å±±å²¡é‰„èˆŸ' },
        { q: 'ãŠå¯¿å¸ã®ã€Œä¸€è²«ã€ã®ç”±æ¥ã¯ï¼Ÿ', o: ['é‡ã•', 'ãŠé‡‘ã®å˜ä½', 'é­šã®æ•°ãˆæ–¹', 'è·äººã®æŠ€'], a: 'ãŠé‡‘ã®å˜ä½' },
        { q: 'éƒµä¾¿ãƒã‚¹ãƒˆãŒèµ¤ã„ç†ç”±ã¯ï¼Ÿ', o: ['æƒ…ç†±ã®è‰²', 'ç›®ç«‹ã¤ã‹ã‚‰', 'ã‚¤ã‚®ãƒªã‚¹ã®çœŸä¼¼', 'ç«äº‹ã¨é–“é•ãˆãªã„'], a: 'ã‚¤ã‚®ãƒªã‚¹ã®çœŸä¼¼' },
        // ä¸€èˆ¬å¸¸è­˜ã‚¯ã‚¤ã‚ºï¼ˆè¿½åŠ ï¼‰
        { q: 'ä¸–ç•Œä¸‰å¤§çå‘³ã¯ã€Œã‚­ãƒ£ãƒ“ã‚¢ã€ã€Œãƒˆãƒªãƒ¥ãƒ•ã€ã¨ã‚‚ã†1ã¤ã¯ï¼Ÿ', o: ['ã‚¢ãƒ³ãƒãƒ§ãƒ“', 'ãƒ•ã‚©ã‚¢ã‚°ãƒ©', 'ãƒãƒ„ã‚¿ã‚±', 'ã‚¤ã‚¯ãƒ©'], a: 'ãƒ•ã‚©ã‚¢ã‚°ãƒ©' },
        { q: '60æ­³ã¯é‚„æš¦ã€‚ã§ã¯70æ­³ã¯ï¼Ÿ', o: ['å¤å¸Œ', 'å‚˜å¯¿', 'å’å¯¿', 'ç™½å¯¿'], a: 'å¤å¸Œ' },
        { q: '5æœˆã¯ã€Œçšæœˆã€ã€12æœˆã¯ã€Œå¸«èµ°ã€ã€‚ã§ã¯9æœˆã¯ï¼Ÿ', o: ['é•·æœˆ', 'éœœæœˆ', 'å¦‚æœˆ', 'å¼¥ç”Ÿ'], a: 'é•·æœˆ' },
        { q: 'åˆå¤¢ã§ç¸èµ·ãŒè‰¯ã„ã¨ã•ã‚Œã‚‹é£Ÿã¹ç‰©ã¯ï¼Ÿ', o: ['è‘¡è„', 'èŒ„å­', 'è“®æ ¹', 'å¤§æ ¹'], a: 'èŒ„å­' },
        { q: 'æ—¥æœ¬ã®åˆä»£å†…é–£ç·ç†å¤§è‡£ã¯ï¼Ÿ', o: ['å¤§éšˆé‡ä¿¡', 'ä¼Šè—¤åšæ–‡', 'å±±çœŒæœ‰æœ‹', 'é»’ç”°æ¸…éš†'], a: 'ä¼Šè—¤åšæ–‡' },
        { q: 'ã‚¤ã‚®ãƒªã‚¹ã®ãŠé‡‘ã®å˜ä½ã¯ï¼Ÿ', o: ['ãƒ‰ãƒ«', 'ãƒ«ãƒ”ãƒ¼', 'ãƒãƒ³ãƒ‰', 'ãƒ¦ãƒ¼ãƒ­'], a: 'ãƒãƒ³ãƒ‰' },
        { q: 'æ¬¡ã®ã†ã¡ã€Œä¹³è£½å“ã€ã§ã¯ãªã„ã‚‚ã®ã¯ï¼Ÿ', o: ['ãƒãƒ¼ã‚¬ãƒªãƒ³', 'ãƒã‚¿ãƒ¼', 'ãƒãƒ¼ã‚º', 'ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ'], a: 'ãƒãƒ¼ã‚¬ãƒªãƒ³' },
        { q: 'æ¬¡ã®ã†ã¡ã€Œå“ºä¹³é¡ã€ã§ã¯ãªã„ã®ã¯ï¼Ÿ', o: ['ã‚¤ãƒ«ã‚«', 'ã‚µãƒ¡', 'ã‚·ãƒ£ãƒ', 'ã‚¯ã‚¸ãƒ©'], a: 'ã‚µãƒ¡' },
        { q: 'ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã®ã€Œã‚¹ãƒãƒ¼ãƒˆã€ã®æ„å‘³ã¯ï¼Ÿ', o: ['è³¢ã„', 'é€Ÿã„', 'å°ã•ã„', 'è–„ã„'], a: 'è³¢ã„' },
        { q: 'æ—¥æœ¬ã§ç¥æ—¥ãŒ1æ—¥ã‚‚ãªã„æœˆã¯ã„ãã¤ï¼Ÿ', o: ['1ã¤', '2ã¤', '3ã¤', '4ã¤'], a: '2ã¤' },
    ],
    extra: [
        // ç§‘å­¦
        { q: 'æ°´ã®åŒ–å­¦å¼ã¯ï¼Ÿ', o: ['H2O', 'CO2', 'NaCl', 'O2'], a: 'H2O' },
        { q: 'å…‰ã®é€Ÿã•ã¯ç§’é€Ÿç´„ä½•kmï¼Ÿ', o: ['3ä¸‡km', '30ä¸‡km', '300ä¸‡km', '3000ä¸‡km'], a: '30ä¸‡km' },
        { q: 'DNAã®æ­£å¼åç§°ã¯ï¼Ÿ', o: ['ãƒ‡ã‚ªã‚­ã‚·ãƒªãƒœæ ¸é…¸', 'ãƒªãƒœæ ¸é…¸', 'ã‚¢ãƒŸãƒé…¸', 'ã‚¿ãƒ³ãƒ‘ã‚¯è³ª'], a: 'ãƒ‡ã‚ªã‚­ã‚·ãƒªãƒœæ ¸é…¸' },
        { q: 'å…ƒç´ è¨˜å·ã€ŒAuã€ã¯ä½•ï¼Ÿ', o: ['éŠ€', 'é‡‘', 'éŠ…', 'é‰„'], a: 'é‡‘' },
        { q: 'å…ƒç´ è¨˜å·ã€ŒFeã€ã¯ä½•ï¼Ÿ', o: ['éŠ€', 'é‡‘', 'éŠ…', 'é‰„'], a: 'é‰„' },
        { q: 'çµ¶å¯¾é›¶åº¦ã¯ç´„ä½•åº¦ï¼Ÿ', o: ['-100åº¦', '-173åº¦', '-273åº¦', '-373åº¦'], a: '-273åº¦' },
        // è¨ˆç®—
        { q: 'âˆš144=?', o: ['10', '11', '12', '13'], a: '12' },
        { q: '2ã®10ä¹—ã¯ï¼Ÿ', o: ['512', '1024', '2048', '4096'], a: '1024' },
        { q: '17Ã—19=?', o: ['303', '313', '323', '333'], a: '323' },
        { q: '13Ã—17=?', o: ['201', '211', '221', '231'], a: '221' },
        { q: 'å††å‘¨ç‡Ï€ã®å°æ•°2æ¡ç›®ã¾ã§ã¯ï¼Ÿ', o: ['3.12', '3.14', '3.16', '3.18'], a: '3.14' },
        // æ­´å²
        { q: 'é–¢ãƒ¶åŸã®æˆ¦ã„ã¯ä½•å¹´ï¼Ÿ', o: ['1500å¹´', '1600å¹´', '1700å¹´', '1800å¹´'], a: '1600å¹´' },
        { q: 'æœ¬èƒ½å¯ºã®å¤‰ã§å€’ã‚ŒãŸã®ã¯ï¼Ÿ', o: ['è±Šè‡£ç§€å‰', 'å¾³å·å®¶åº·', 'ç¹”ç”°ä¿¡é•·', 'æ­¦ç”°ä¿¡ç„'], a: 'ç¹”ç”°ä¿¡é•·' },
        { q: 'éŒå€‰å¹•åºœã‚’é–‹ã„ãŸã®ã¯ï¼Ÿ', o: ['æºé ¼æœ', 'æºç¾©çµŒ', 'å¹³æ¸…ç››', 'è¶³åˆ©å°Šæ°'], a: 'æºé ¼æœ' },
        { q: 'ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ¦ãŒçµ‚ã‚ã£ãŸå¹´ã¯ï¼Ÿ', o: ['1943å¹´', '1944å¹´', '1945å¹´', '1946å¹´'], a: '1945å¹´' },
        { q: 'ãƒ•ãƒ©ãƒ³ã‚¹é©å‘½ã¯ä½•å¹´ï¼Ÿ', o: ['1689å¹´', '1789å¹´', '1889å¹´', '1989å¹´'], a: '1789å¹´' },
        // æ–‡å­¦ãƒ»èŠ¸è¡“
        { q: 'ã€Œå¾è¼©ã¯çŒ«ã§ã‚ã‚‹ã€ã®ä½œè€…ã¯ï¼Ÿ', o: ['èŠ¥å·é¾ä¹‹ä»‹', 'å¤ç›®æ¼±çŸ³', 'å¤ªå®°æ²»', 'å·ç«¯åº·æˆ'], a: 'å¤ç›®æ¼±çŸ³' },
        { q: 'ã€Œèµ°ã‚Œãƒ¡ãƒ­ã‚¹ã€ã®ä½œè€…ã¯ï¼Ÿ', o: ['èŠ¥å·é¾ä¹‹ä»‹', 'å¤ç›®æ¼±çŸ³', 'å¤ªå®°æ²»', 'ä¸‰å³¶ç”±ç´€å¤«'], a: 'å¤ªå®°æ²»' },
        { q: 'ãƒ¢ãƒŠãƒªã‚¶ã‚’æã„ãŸã®ã¯ï¼Ÿ', o: ['ãƒ”ã‚«ã‚½', 'ã‚´ãƒƒãƒ›', 'ãƒ€ãƒ´ã‚£ãƒ³ãƒ', 'ãƒŸã‚±ãƒ©ãƒ³ã‚¸ã‚§ãƒ­'], a: 'ãƒ€ãƒ´ã‚£ãƒ³ãƒ' },
        { q: 'ã€Œå«ã³ã€ã‚’æã„ãŸã®ã¯ï¼Ÿ', o: ['ãƒ”ã‚«ã‚½', 'ãƒ ãƒ³ã‚¯', 'ã‚´ãƒƒãƒ›', 'ãƒ¢ãƒ'], a: 'ãƒ ãƒ³ã‚¯' },
        // åœ°ç†
        { q: 'ä¸–ç•Œä¸€é«˜ã„å±±ã¯ï¼Ÿ', o: ['K2', 'ã‚¨ãƒ™ãƒ¬ã‚¹ãƒˆ', 'ãƒãƒƒã‚¿ãƒ¼ãƒ›ãƒ«ãƒ³', 'ãƒ¢ãƒ³ãƒ–ãƒ©ãƒ³'], a: 'ã‚¨ãƒ™ãƒ¬ã‚¹ãƒˆ' },
        { q: 'ä¸–ç•Œä¸€é•·ã„å·ã¯ï¼Ÿ', o: ['ã‚¢ãƒã‚¾ãƒ³å·', 'ãƒŠã‚¤ãƒ«å·', 'é•·æ±Ÿ', 'ãƒŸã‚·ã‚·ãƒƒãƒ”å·'], a: 'ãƒŠã‚¤ãƒ«å·' },
        { q: 'ä¸–ç•Œä¸€å¤§ãã„ç ‚æ¼ ã¯ï¼Ÿ', o: ['ã‚´ãƒ“ç ‚æ¼ ', 'ã‚µãƒãƒ©ç ‚æ¼ ', 'ã‚¢ã‚¿ã‚«ãƒç ‚æ¼ ', 'ã‚«ãƒ©ãƒãƒªç ‚æ¼ '], a: 'ã‚µãƒãƒ©ç ‚æ¼ ' },
        { q: 'ä¸–ç•Œä¸€æ·±ã„æµ·æºã¯ï¼Ÿ', o: ['æ—¥æœ¬æµ·æº', 'ãƒãƒªã‚¢ãƒŠæµ·æº', 'ãƒ•ã‚£ãƒªãƒ”ãƒ³æµ·æº', 'ãƒˆãƒ³ã‚¬æµ·æº'], a: 'ãƒãƒªã‚¢ãƒŠæµ·æº' },
        // é›‘å­¦
        { q: 'å°†æ£‹ã®é§’ã¯å…¨éƒ¨ã§ä½•æšï¼Ÿ', o: ['30æš', '40æš', '50æš', '60æš'], a: '40æš' },
        { q: 'ãƒˆãƒ©ãƒ³ãƒ—ã¯å…¨éƒ¨ã§ä½•æšï¼Ÿï¼ˆã‚¸ãƒ§ãƒ¼ã‚«ãƒ¼é™¤ãï¼‰', o: ['48æš', '52æš', '54æš', '56æš'], a: '52æš' },
        { q: 'å›²ç¢ã®ç›¤ã¯ä½•è·¯ï¼Ÿ', o: ['15è·¯', '17è·¯', '19è·¯', '21è·¯'], a: '19è·¯' },
        // è‹±èª
        { q: 'ã€ŒGDPã€ã®Dã¯ä½•ã®ç•¥ï¼Ÿ', o: ['Development', 'Domestic', 'Demand', 'Distribution'], a: 'Domestic' },
        { q: 'ã€ŒWHOã€ã¯ä½•ã®ç•¥ï¼Ÿ', o: ['World Health Organization', 'World Help Organization', 'Wide Health Organization', 'World Hospital Organization'], a: 'World Health Organization' },
        // è¿½åŠ å•é¡Œï¼ˆ20å•ï¼‰
        { q: 'å††å‘¨ç‡Ï€ã®å°æ•°ç‚¹ä»¥ä¸‹3æ¡ç›®ã¯ï¼Ÿ', o: ['1', '4', '5', '9'], a: '1' },
        { q: 'ãƒ•ã‚£ãƒœãƒŠãƒƒãƒæ•°åˆ—ã®8ç•ªç›®ã¯ï¼Ÿ', o: ['13', '21', '34', '55'], a: '21' },
        { q: 'ã€Œç¾…ç”Ÿé–€ã€ã®ä½œè€…ã¯ï¼Ÿ', o: ['å¤ç›®æ¼±çŸ³', 'èŠ¥å·é¾ä¹‹ä»‹', 'å¤ªå®°æ²»', 'å·ç«¯åº·æˆ'], a: 'èŠ¥å·é¾ä¹‹ä»‹' },
        { q: 'ã‚¢ã‚¤ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³ã®æœ‰åãªå¼ã¯ï¼Ÿ', o: ['E=mc', 'E=mcÂ²', 'E=mÂ²c', 'EÂ²=mc'], a: 'E=mcÂ²' },
        { q: 'é‡å­åŠ›å­¦ã®çˆ¶ã¨å‘¼ã°ã‚Œã‚‹ã®ã¯ï¼Ÿ', o: ['ãƒœãƒ¼ã‚¢', 'ãƒ—ãƒ©ãƒ³ã‚¯', 'ãƒã‚¤ã‚¼ãƒ³ãƒ™ãƒ«ã‚¯', 'ã‚·ãƒ¥ãƒ¬ãƒ‡ã‚£ãƒ³ã‚¬ãƒ¼'], a: 'ãƒ—ãƒ©ãƒ³ã‚¯' },
        { q: 'æ—¥æœ¬å›½æ†²æ³•ã®å…¬å¸ƒæ—¥ã¯ï¼Ÿ', o: ['11æœˆ3æ—¥', '5æœˆ3æ—¥', '2æœˆ11æ—¥', '4æœˆ29æ—¥'], a: '11æœˆ3æ—¥' },
        { q: 'ã€Œæˆ‘æ€ã†ã€ã‚†ãˆã«æˆ‘ã‚ã‚Šã€ã®å“²å­¦è€…ã¯ï¼Ÿ', o: ['ã‚«ãƒ³ãƒˆ', 'ãƒ‡ã‚«ãƒ«ãƒˆ', 'ãƒ‹ãƒ¼ãƒã‚§', 'ã‚½ã‚¯ãƒ©ãƒ†ã‚¹'], a: 'ãƒ‡ã‚«ãƒ«ãƒˆ' },
        { q: 'äººä½“ã®éª¨ã®æ•°ã¯æˆäººã§ç´„ä½•æœ¬ï¼Ÿ', o: ['106æœ¬', '206æœ¬', '306æœ¬', '406æœ¬'], a: '206æœ¬' },
        { q: 'ã€Œã‚²ãƒ«ãƒ‹ã‚«ã€ã‚’æã„ãŸç”»å®¶ã¯ï¼Ÿ', o: ['ã‚´ãƒƒãƒ›', 'ãƒ”ã‚«ã‚½', 'ãƒ¢ãƒ', 'ãƒ€ãƒª'], a: 'ãƒ”ã‚«ã‚½' },
        { q: 'âˆš2ã®è¿‘ä¼¼å€¤ã¯ï¼Ÿ', o: ['1.414', '1.618', '1.732', '2.236'], a: '1.414' },
        { q: 'é»„é‡‘æ¯”ã®è¿‘ä¼¼å€¤ã¯ï¼Ÿ', o: ['1.414', '1.618', '1.732', '2.236'], a: '1.618' },
        { q: 'ã€Œå›ä¸»è«–ã€ã®è‘—è€…ã¯ï¼Ÿ', o: ['ãƒãƒ«ã‚¯ã‚¹', 'ãƒã‚­ãƒ£ãƒ™ãƒª', 'ãƒ«ã‚½ãƒ¼', 'ãƒ›ãƒƒãƒ–ã‚º'], a: 'ãƒã‚­ãƒ£ãƒ™ãƒª' },
        { q: 'å…‰å¹´ã¨ã¯ä½•ã®å˜ä½ï¼Ÿ', o: ['æ™‚é–“', 'è·é›¢', 'é€Ÿåº¦', 'è³ªé‡'], a: 'è·é›¢' },
        { q: 'DNAã®äºŒé‡ã‚‰ã›ã‚“æ§‹é€ ç™ºè¦‹è€…ã¯ï¼Ÿ', o: ['ãƒ¡ãƒ³ãƒ‡ãƒ«', 'ãƒ¯ãƒˆã‚½ãƒ³ã¨ã‚¯ãƒªãƒƒã‚¯', 'ãƒ€ãƒ¼ã‚¦ã‚£ãƒ³', 'ãƒ‘ã‚¹ãƒ„ãƒ¼ãƒ«'], a: 'ãƒ¯ãƒˆã‚½ãƒ³ã¨ã‚¯ãƒªãƒƒã‚¯' },
        { q: 'ã€Œä¸‡æœ‰å¼•åŠ›ã®æ³•å‰‡ã€ã‚’ç™ºè¦‹ã—ãŸã®ã¯ï¼Ÿ', o: ['ã‚¬ãƒªãƒ¬ã‚ª', 'ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³', 'ã‚¢ã‚¤ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³', 'ã‚±ãƒ—ãƒ©ãƒ¼'], a: 'ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³' },
        { q: '3ã®5ä¹—ã¯ï¼Ÿ', o: ['125', '243', '343', '512'], a: '243' },
        { q: 'ã€Œè³‡æœ¬è«–ã€ã®è‘—è€…ã¯ï¼Ÿ', o: ['ã‚¢ãƒ€ãƒ ãƒ»ã‚¹ãƒŸã‚¹', 'ãƒãƒ«ã‚¯ã‚¹', 'ã‚±ã‚¤ãƒ³ã‚º', 'ãƒã‚¤ã‚¨ã‚¯'], a: 'ãƒãƒ«ã‚¯ã‚¹' },
        { q: 'ã€Œç¨®ã®èµ·æºã€ã®è‘—è€…ã¯ï¼Ÿ', o: ['ãƒ¡ãƒ³ãƒ‡ãƒ«', 'ãƒ€ãƒ¼ã‚¦ã‚£ãƒ³', 'ãƒ©ãƒãƒ«ã‚¯', 'ãƒªãƒ³ãƒ'], a: 'ãƒ€ãƒ¼ã‚¦ã‚£ãƒ³' },
        { q: 'ã€Œç›¸å¯¾æ€§ç†è«–ã€ã‚’ç™ºè¡¨ã—ãŸã®ã¯ï¼Ÿ', o: ['ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³', 'ã‚¢ã‚¤ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³', 'ãƒ›ãƒ¼ã‚­ãƒ³ã‚°', 'ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ³'], a: 'ã‚¢ã‚¤ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³' },
        { q: '1ãƒ¢ãƒ«ã®ç²’å­æ•°ï¼ˆã‚¢ãƒœã‚¬ãƒ‰ãƒ­å®šæ•°ï¼‰ã¯ç´„ä½•å€‹ï¼Ÿ', o: ['6Ã—10^20', '6Ã—10^21', '6Ã—10^22', '6Ã—10^23'], a: '6Ã—10^23' },
        // è¶…é›£å•ãƒˆãƒªãƒ“ã‚¢
        { q: 'ãƒ­ãƒ¼ãƒã®ã€ŒçœŸå®Ÿã®å£ã€ã¯å…ƒã€…ä½•ã«ä½¿ã‚ã‚Œã¦ã„ãŸï¼Ÿ', o: ['å ã„', 'æ’æ°´æºã®è“‹', 'ç¥æ®¿ã®é–€', 'è£åˆ¤ã®é“å…·'], a: 'æ’æ°´æºã®è“‹' },
        { q: 'ãƒãƒŠãƒŠã¯æ¤ç‰©å­¦ä¸Šã¯ä½•ã«åˆ†é¡ã•ã‚Œã‚‹ï¼Ÿ', o: ['æœç‰©', 'é‡èœ', 'è‰', 'æœ¨ã®å®Ÿ'], a: 'è‰' },
        { q: 'äººé–“ã®è„³ãŒ1æ—¥ã«æ¶ˆè²»ã™ã‚‹ã‚«ãƒ­ãƒªãƒ¼ã¯ç´„ä½•kcalï¼Ÿ', o: ['100kcal', '300kcal', '500kcal', '800kcal'], a: '300kcal' },
        { q: 'ä¸–ç•Œä¸€å°ã•ã„å›½ãƒãƒã‚«ãƒ³å¸‚å›½ã®é¢ç©ã¯æ±äº¬ãƒ‰ãƒ¼ãƒ ç´„ä½•å€‹åˆ†ï¼Ÿ', o: ['ç´„0.1å€‹', 'ç´„1å€‹', 'ç´„5å€‹', 'ç´„10å€‹'], a: 'ç´„1å€‹' },
        { q: 'ã‚¿ã‚³ã®å¿ƒè‡“ã¯ã„ãã¤ã‚ã‚‹ï¼Ÿ', o: ['1ã¤', '2ã¤', '3ã¤', '4ã¤'], a: '3ã¤' },
        { q: 'é‡‘é­šã®è¨˜æ†¶åŠ›ã¯æœ€ä½ã§ã‚‚ã©ã‚Œãã‚‰ã„ï¼Ÿ', o: ['3ç§’', '3åˆ†', '3æ™‚é–“', '3ãƒ¶æœˆ'], a: '3ãƒ¶æœˆ' },
        { q: 'ãƒãƒãƒŸãƒ„ã¯ä½•å¹´çµŒã£ã¦ã‚‚è…ã‚‰ãªã„ï¼Ÿ', o: ['100å¹´', '1000å¹´', 'æ°¸é ã«è…ã‚‰ãªã„', '50å¹´'], a: 'æ°¸é ã«è…ã‚‰ãªã„' },
        { q: 'äººé–“ã®ä½“ã§æœ€ã‚‚ç¡¬ã„éƒ¨åˆ†ã¯ï¼Ÿ', o: ['éª¨', 'æ­¯ã®ã‚¨ãƒŠãƒ¡ãƒ«è³ª', 'çˆª', 'é«ªã®æ¯›'], a: 'æ­¯ã®ã‚¨ãƒŠãƒ¡ãƒ«è³ª' },
        { q: 'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã«ã¯ä½•ç¨®é¡ã®ã‚«ãƒ³ã‚¬ãƒ«ãƒ¼ãŒã„ã‚‹ï¼Ÿ', o: ['ç´„10ç¨®', 'ç´„20ç¨®', 'ç´„40ç¨®', 'ç´„60ç¨®'], a: 'ç´„40ç¨®' },
        { q: 'æœ€ã‚‚é•·ãé£›ã¹ã‚‹é³¥ã‚­ãƒ§ã‚¯ã‚¢ã‚¸ã‚µã‚·ã®1å¹´ã®é£›è¡Œè·é›¢ã¯ï¼Ÿ', o: ['ç´„1ä¸‡km', 'ç´„5ä¸‡km', 'ç´„7ä¸‡km', 'ç´„10ä¸‡km'], a: 'ç´„7ä¸‡km' },
    ]
};

// 4. ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹ã«é–¢ã™ã‚‹å¤‰æ•°
let board, currentPiece, currentQuiz, canControl, isGameOver, isGameCleared, feedbackElement, helpChances;
let isAnswerDisabled = false; // é–“é•ãˆæ™‚ã®å›ç­”ä¸èƒ½ãƒ•ãƒ©ã‚°
let isMuted = false; // ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹
let dropCounter, dropInterval, lastTime, animationFrameId;
let selectedAudience = 'lowerElem';
let selectedSpeed = 'easy';
let currentQuizBank = [];
let usedQuizIndexes = []; // ä½¿ç”¨æ¸ˆã¿ã‚¯ã‚¤ã‚ºã‚’è¿½è·¡
let gameStartTime, wrongAnswerCount, helpUsed;
let correctAnswerCount, totalQuizCount; // æ­£è§£æ•°ã¨å‡ºé¡Œæ•°
let currentEnemy, enemyHp, enemyMaxHp; // æ•µã‚­ãƒ£ãƒ©é–¢é€£
const quizContainer = document.getElementById('quiz-container');

// IQè¨ˆç®—é–¢æ•°ï¼ˆ180ä»¥ä¸Šã¯è¶…ä¸Šæ‰‹ã„äººã®ã¿ï¼‰
function calculateIQ() {
    const damageDealt = enemyMaxHp - enemyHp;
    const damagePercent = damageDealt / enemyMaxHp;
    const answeredCount = correctAnswerCount + wrongAnswerCount;
    const accuracy = answeredCount > 0 ? correctAnswerCount / answeredCount : 0;

    // ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’ä¸ãˆã¦ã„ãªã„å ´åˆ
    if (damageDealt === 0) {
        return 50;
    }

    // åŸºæœ¬IQï¼ˆãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ™ãƒ¼ã‚¹ï¼‰50ã€œ100
    let iq = 50 + Math.round(damagePercent * 50);

    // æ•µã‚’å€’ã—ãŸå ´åˆã®ã¿è¿½åŠ ãƒœãƒ¼ãƒŠã‚¹
    if (damagePercent >= 1.0) {
        iq += 15; // æ’ƒç ´ãƒœãƒ¼ãƒŠã‚¹ â†’ æœ€å¤§115

        // æ­£è§£ç‡ãƒœãƒ¼ãƒŠã‚¹ï¼ˆæ•µã‚’å€’ã—ãŸå ´åˆã®ã¿ï¼‰
        if (accuracy >= 1.0 && wrongAnswerCount === 0) {
            iq += 15; // ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼ˆå…¨å•æ­£è§£ï¼‹é–“é•ã„ãªã—ï¼‰
        } else if (accuracy >= 0.9) {
            iq += 10;
        } else if (accuracy >= 0.7) {
            iq += 5;
        }

        // é›£æ˜“åº¦ãƒœãƒ¼ãƒŠã‚¹ï¼ˆæ•µã‚’å€’ã—ãŸå ´åˆã®ã¿ï¼‰
        const audienceBonus = { lowerElem: 0, upperElem: 8, adult: 15, extra: 25 };
        iq += audienceBonus[selectedAudience];

        const speedBonus = { easy: 0, normal: 8, hard: 15, extra: 25 };
        iq += speedBonus[selectedSpeed];

        // æ¿€ãƒ ã‚ºÃ—æ¿€ãƒ ã‚ºã§ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆãªã‚‰ç‰¹åˆ¥ãƒœãƒ¼ãƒŠã‚¹
        if (selectedAudience === 'extra' && selectedSpeed === 'extra' &&
            accuracy >= 1.0 && wrongAnswerCount === 0) {
            iq += 20;
        }
    }

    // é–“é•ã„å›æ•°ãƒšãƒŠãƒ«ãƒ†ã‚£
    iq -= wrongAnswerCount * 5;

    // æœ€ä½50ã€æœ€é«˜200ã«åˆ¶é™
    return Math.max(50, Math.min(200, Math.round(iq)));
}

// IQç›®å®‰:
// ãƒ€ãƒ¡ãƒ¼ã‚¸ãªã—: 50
// æ•µHPåŠåˆ†: 75
// æ•µæ’ƒç ´(ã‹ã‚“ãŸã‚“): 115ã€œ130
// æ•µæ’ƒç ´(ãµã¤ã†): 130ã€œ145
// æ•µæ’ƒç ´(ã‚€ãšã‹ã—ã„): 145ã€œ165
// æ•µæ’ƒç ´(æ¿€ãƒ ã‚º): 165ã€œ180
// æ¿€ãƒ ã‚ºãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆ: 200

// IQã«å¿œã˜ãŸã‚³ãƒ¡ãƒ³ãƒˆï¼ˆå¯¾è±¡è€…åˆ¥ï¼‰
function getIQComment(iq) {
    // ã¦ã„ãŒãã­ã‚“ç”¨ï¼ˆã‚„ã•ã—ã„ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
    if (selectedAudience === 'lowerElem') {
        if (iq >= 195) return 'ä¼èª¬ç´šï¼æ­´å²ã«æ®‹ã‚‹å¤§è¨˜éŒ²ï¼';
        if (iq >= 190) return 'ç¥æ¥­ï¼å®Œç’§ã™ãã‚‹ï¼';
        if (iq >= 185) return 'å¤©æ‰ï¼ç´ æ™´ã‚‰ã—ã„ãƒ—ãƒ¬ã‚¤ï¼';
        if (iq >= 180) return 'ã™ã”ã„ï¼æœ€é«˜é›£åº¦ã‚¯ãƒªã‚¢ï¼';
        if (iq >= 175) return 'è¦‹äº‹ï¼ã‹ãªã‚Šã®è…•å‰ï¼';
        if (iq >= 170) return 'ãŠè¦‹äº‹ï¼ã‚ˆãé ‘å¼µã£ãŸï¼';
        if (iq >= 165) return 'ã‚„ã‚‹ã˜ã‚ƒã‚“ï¼ã„ã„èª¿å­ï¼';
        if (iq >= 160) return 'ãªã‹ãªã‹ï¼ãã®èª¿å­ï¼';
        if (iq >= 155) return 'ã„ã„ã­ï¼ä¸Šæ‰‹ï¼';
        if (iq >= 150) return 'ã‚°ãƒƒãƒ‰ï¼ã‚ˆãã§ããŸï¼';
        if (iq >= 145) return 'ã‚ˆãã‚„ã£ãŸï¼ãˆã‚‰ã„ï¼';
        if (iq >= 140) return 'ãŒã‚“ã°ã£ãŸã­ï¼ã™ã”ã„ï¼';
        if (iq >= 135) return 'ã‚„ã£ãŸã­ï¼ãŠã‚ã§ã¨ã†ï¼';
        if (iq >= 130) return 'ãŠã¤ã‹ã‚Œã•ã¾ï¼ã‚ˆãã‚„ã£ãŸï¼';
        if (iq >= 120) return 'ã‚¯ãƒªã‚¢ãŠã‚ã§ã¨ã†ï¼';
        if (iq >= 110) return 'ãŠã—ã„ï¼ã‚‚ã†å°‘ã—ï¼';
        if (iq >= 100) return 'ãƒ‰ãƒ³ãƒã‚¤ï¼æ¬¡ã«æœŸå¾…ï¼';
        if (iq >= 90) return 'ã¾ãŸæŒ‘æˆ¦ã—ã‚ˆã†ï¼';
        if (iq >= 80) return 'ã‚‚ã†ä¸€å›ã‚„ã£ã¦ã¿ã‚ˆã†ï¼';
        if (iq >= 70) return 'æ¥½ã—ã‚ãŸã‹ãªï¼Ÿ';
        return 'å¤§ä¸ˆå¤«ï¼ç·´ç¿’ã™ã‚Œã°ã§ãã‚‹ï¼';
    }

    // ã“ã†ãŒãã­ã‚“ãƒ»ãŠã¨ãªãƒ»ã’ããƒ ã‚ºç”¨ï¼ˆã—ã£ã‹ã‚Šè©•ä¾¡ï¼‰
    if (iq >= 195) return 'ç¥é™è‡¨ï¼äººé¡ã®é ‚ç‚¹ã«ç«‹ã¤çŸ¥èƒ½ï¼';
    if (iq >= 190) return 'è¶…è¶Šè€…ï¼æ­´å²ã«åã‚’æ®‹ã™ãƒ¬ãƒ™ãƒ«ï¼';
    if (iq >= 185) return 'ç•°æ¬¡å…ƒã®å¤©æ‰ï¼ã‚¢ã‚¤ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³ç´šï¼';
    if (iq >= 180) return 'è¶…å¤©æ‰ï¼ã‚ãªãŸã¯å¤©æ‰ã®ä¸­ã®å¤©æ‰ï¼';
    if (iq >= 175) return 'é©šç•°çš„ï¼ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®å®ŸåŠ›ï¼';
    if (iq >= 170) return 'å¤©æ‰ç¢ºå®šï¼ä¸–ç•ŒãŒæ³¨ç›®ã™ã‚‹çŸ¥æ€§ï¼';
    if (iq >= 165) return 'å¤©æ‰ã®å¯èƒ½æ€§å¤§ï¼è¼ãæœªæ¥ãŒè¦‹ãˆã‚‹ï¼';
    if (iq >= 160) return 'ç§€æ‰ä¸­ã®ç§€æ‰ï¼ç´ æ™´ã‚‰ã—ã„é ­è„³ï¼';
    if (iq >= 155) return 'éå‡¡ãªæ‰èƒ½ï¼å‘¨ã‚Šã¨å·®ãŒã¤ãå®ŸåŠ›ï¼';
    if (iq >= 150) return 'å„ªç§€ï¼é ­è„³æ˜æ™°ã§ã™ã­ï¼';
    if (iq >= 145) return 'ã‹ãªã‚Šã®å®ŸåŠ›è€…ï¼è‡ªä¿¡ã‚’æŒã£ã¦ï¼';
    if (iq >= 140) return 'ç´ æ™´ã‚‰ã—ã„çŸ¥æ€§ã®æŒã¡ä¸»ï¼';
    if (iq >= 135) return 'é ­ã®å›è»¢ãŒé€Ÿã„ï¼ã‚»ãƒ³ã‚¹æŠœç¾¤ï¼';
    if (iq >= 130) return 'ãªã‹ãªã‹ã‚„ã‚‹ã­ï¼ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«é«˜ã„ï¼';
    if (iq >= 120) return 'å¹³å‡ä»¥ä¸Šï¼ã„ã„æ„Ÿã˜ã§ã™ï¼';
    if (iq >= 110) return 'æ¨™æº–çš„ï¼ã‚³ãƒ„ã‚³ãƒ„ä¼¸ã°ãã†ï¼';
    if (iq >= 100) return 'ã¾ãšã¾ãšï¼ä¼¸ã³ã—ã‚ã‚ã‚Šï¼';
    if (iq >= 90) return 'ã‚‚ã†å°‘ã—é ‘å¼µã‚ã†ï¼æ¬¡ã«æœŸå¾…ï¼';
    if (iq >= 80) return 'ç·´ç¿’ã‚ã‚‹ã®ã¿ï¼è«¦ã‚ãªã„ã§ï¼';
    if (iq >= 70) return 'ãƒ‰ãƒ³ãƒã‚¤ï¼ã¾ãŸæŒ‘æˆ¦ã—ã‚ˆã†ï¼';
    return 'æ°—ã«ã—ãªã„ï¼æ¥½ã—ã‚€ã“ã¨ãŒå¤§äº‹ï¼';
}

// 5. UIã¨ç”»é¢ç®¡ç†
function showTitleScreen() {
    // å…¨BGMåœæ­¢
    sounds.bgm.pause();
    sounds.bgm.currentTime = 0;
    sounds.ending.pause();
    sounds.ending.currentTime = 0;
    // ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°BGMå†ç”Ÿ
    if (!isMuted) sounds.opening.play().catch(() => {});

    titleScreen.classList.remove('hidden');
    ruleScreen.classList.add('hidden');
    gameWrapper.classList.add('hidden');
    if (animationFrameId) {
        cancelAnimationFrame(animationFrameId);
        animationFrameId = null;
    }
}

function showGameScreen() {
    titleScreen.classList.add('hidden');
    gameWrapper.classList.remove('hidden');
    // ã‚²ãƒ¼ãƒ ç”»é¢è¡¨ç¤ºå¾Œã«ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ãƒªã‚µã‚¤ã‚º
    setTimeout(resizeCanvasForMobile, 50);
}

function setupTitleScreen() {
    // ã‚«ãƒ¼ã‚½ãƒ«é¸æŠæ–¹å¼
    audienceSelector.addEventListener('click', e => {
        const item = e.target.closest('.menu-item');
        if (item) {
            playSound(sounds.cursor);
            audienceSelector.querySelector('.selected')?.classList.remove('selected');
            item.classList.add('selected');
            selectedAudience = item.dataset.value;
        }
    });
    speedSelector.addEventListener('click', e => {
        const item = e.target.closest('.menu-item');
        if (item) {
            playSound(sounds.cursor);
            speedSelector.querySelector('.selected')?.classList.remove('selected');
            item.classList.add('selected');
            selectedSpeed = item.dataset.value;
        }
    });
    startBtn.addEventListener('click', startGame);
    backToTitleBtn.addEventListener('click', showTitleScreen);

    // ãƒ«ãƒ¼ãƒ«ç”»é¢
    document.getElementById('rule-btn').addEventListener('click', showRuleScreen);
    document.getElementById('back-to-title-from-rule').addEventListener('click', showTitleScreen);
}

function showRuleScreen() {
    playSound(sounds.cursor);
    titleScreen.classList.add('hidden');
    ruleScreen.classList.remove('hidden');
}

// 6. ã‚²ãƒ¼ãƒ ã®ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯

// é›·ï¼‹æ¸¦å·»ããƒãƒˆãƒ«çªå…¥ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆRPGé¢¨ï¼‰
function battleTransition(callback) {
    const overlay = document.createElement('canvas');
    overlay.id = 'transition-overlay';
    overlay.style.cssText = 'position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;';
    document.body.appendChild(overlay);

    const tCtx = overlay.getContext('2d');
    overlay.width = window.innerWidth;
    overlay.height = window.innerHeight;

    let phase = 0; // 0:é›·ãƒ•ãƒ©ãƒƒã‚·ãƒ¥, 1:æ¸¦ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
    let flashCount = 0;
    let flashState = false;
    let spiralProgress = 0;

    const centerX = overlay.width / 2;
    const centerY = overlay.height / 2;

    // é›·ãƒ•ãƒ©ãƒƒã‚·ãƒ¥
    function doFlash() {
        if (flashCount < 6) {
            flashState = !flashState;
            tCtx.fillStyle = flashState ? '#fff' : '#000';
            tCtx.fillRect(0, 0, overlay.width, overlay.height);
            flashCount++;
            setTimeout(doFlash, flashState ? 50 : 80);
        } else {
            phase = 1;
            tCtx.fillStyle = '#000';
            tCtx.fillRect(0, 0, overlay.width, overlay.height);
            doSpiralWipe();
        }
    }

    // æ¸¦å·»ããƒ¯ã‚¤ãƒ—ï¼ˆç”»é¢ã‚’å›è»¢ã—ãªãŒã‚‰é»’ãå¡—ã‚Šã¤ã¶ã™ï¼‰
    function doSpiralWipe() {
        tCtx.fillStyle = '#000';
        tCtx.fillRect(0, 0, overlay.width, overlay.height);

        // æ¸¦å·»ãçŠ¶ã«ç™½ã„éƒ¨åˆ†ã‚’æ®‹ã™
        const maxAngle = spiralProgress * 0.15;
        const segments = 8;

        tCtx.save();
        tCtx.translate(centerX, centerY);

        for (let i = 0; i < segments; i++) {
            const baseAngle = (i / segments) * Math.PI * 2 + maxAngle;
            const arcSize = Math.max(0, (Math.PI / segments) * (1 - spiralProgress / 60));

            if (arcSize > 0 && spiralProgress < 50) {
                tCtx.fillStyle = '#fff';
                tCtx.beginPath();
                tCtx.moveTo(0, 0);
                tCtx.arc(0, 0, Math.max(overlay.width, overlay.height), baseAngle, baseAngle + arcSize);
                tCtx.closePath();
                tCtx.fill();
            }
        }

        tCtx.restore();

        spiralProgress += 2;

        if (spiralProgress < 60) {
            requestAnimationFrame(doSpiralWipe);
        } else {
            // å®Œå…¨ã«é»’
            tCtx.fillStyle = '#000';
            tCtx.fillRect(0, 0, overlay.width, overlay.height);
            setTimeout(() => {
                overlay.remove();
                callback();
            }, 200);
        }
    }

    // é–‹å§‹
    doFlash();
}

function startGame() {
    playSound(sounds.decision);
    currentQuizBank = allQuizzes[selectedAudience];
    dropInterval = speedSettings[selectedSpeed];

    // ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°BGMåœæ­¢
    sounds.opening.pause();
    sounds.opening.currentTime = 0;
    // ã‚²ãƒ¼ãƒ BGMã‚’é–‹å§‹
    playSound(sounds.bgm);

    // æ¸¦å·»ãã‚¨ãƒ•ã‚§ã‚¯ãƒˆå¾Œã«ã‚²ãƒ¼ãƒ é–‹å§‹
    battleTransition(() => {
        showGameScreen();
        newGame();
    });
}

function init() {
    ctx.canvas.width = COLS * BLOCK_SIZE;
    ctx.canvas.height = ROWS * BLOCK_SIZE;
    setupTitleScreen();

    // ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ã®ã‚¯ãƒªãƒƒã‚¯ã§ã‚²ãƒ¼ãƒ é–‹å§‹
    splashScreen.addEventListener('click', startFromSplash);
    splashScreen.addEventListener('touchend', startFromSplash);

    // ãƒŸãƒ¥ãƒ¼ãƒˆãƒœã‚¿ãƒ³
    document.getElementById('mute-btn').addEventListener('click', toggleMute);

    // ãƒ¢ãƒã‚¤ãƒ«ç”¨ãƒªã‚µã‚¤ã‚ºå‡¦ç†
    resizeCanvasForMobile();
    window.addEventListener('resize', resizeCanvasForMobile);
    window.addEventListener('orientationchange', () => {
        setTimeout(resizeCanvasForMobile, 100);
    });
}

function startFromSplash(e) {
    e.preventDefault();
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’å‰Šé™¤ï¼ˆäºŒé‡å®Ÿè¡Œé˜²æ­¢ï¼‰
    splashScreen.removeEventListener('click', startFromSplash);
    splashScreen.removeEventListener('touchend', startFromSplash);

    // ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ã‚’éè¡¨ç¤º
    splashScreen.classList.add('hidden');

    // ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã‚’è¡¨ç¤ºã—ã¦ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°BGMå†ç”Ÿ
    showTitleScreen();
}

function resizeCanvasForMobile() {
    // ãƒ¢ãƒã‚¤ãƒ«ã§ã¯CSSã®max-width: 100%ã§è‡ªå‹•èª¿æ•´
    // ç‰¹åˆ¥ãªå‡¦ç†ã¯ä¸è¦
}

function gameLoop(time = 0) {
    if (isGameOver || isGameCleared) return;
    const deltaTime = time - lastTime;
    lastTime = time;
    dropCounter += deltaTime;
    if (dropCounter > dropInterval) playerDrop();
    // ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢/ã‚ªãƒ¼ãƒãƒ¼å¾Œã¯æç”»ã—ãªã„ï¼ˆçµæœç”»é¢ãŒæ¶ˆãˆã‚‹ã®ã‚’é˜²ãï¼‰
    if (isGameOver || isGameCleared) return;
    draw();
    animationFrameId = requestAnimationFrame(gameLoop);
}

function newGame() {
    board = Array.from({ length: ROWS }, () => Array(COLS).fill(0));
    pieceBag = []; // ãƒ–ãƒ­ãƒƒã‚¯è¢‹ã‚’ãƒªã‚»ãƒƒãƒˆ

    // æ•µã‚­ãƒ£ãƒ©åˆæœŸåŒ–
    currentEnemy = enemySettings[selectedSpeed];
    enemyMaxHp = currentEnemy.maxHp;
    enemyHp = enemyMaxHp;
    updateEnemyDisplay();

    isGameOver = false;
    isGameCleared = false;
    helpChances = 1;
    helpUsed = false;
    wrongAnswerCount = 0;
    correctAnswerCount = 0;
    totalQuizCount = 0;
    usedQuizIndexes = []; // ä½¿ç”¨æ¸ˆã¿ã‚¯ã‚¤ã‚ºã‚’ãƒªã‚»ãƒƒãƒˆ
    gameStartTime = Date.now();
    helpBtn.disabled = false;
    if (helpCount) helpCount.textContent = `(${helpChances}å›)`;
    if (!feedbackElement) {
        feedbackElement = document.createElement('p');
        feedbackElement.id = 'feedback';
        answersElement.insertAdjacentElement('afterend', feedbackElement);
        feedbackElement.style.cssText = 'color: red; font-weight: bold; text-align: center; margin-top: 10px; min-height: 1em;';
    }
    lastTime = 0;
    newTurn();
    if (animationFrameId) cancelAnimationFrame(animationFrameId);
    gameLoop();
}

function newTurn() {
    canControl = false;
    quizContainer.style.visibility = 'visible'; // ã‚¯ã‚¤ã‚ºéƒ¨åˆ†ã ã‘è¡¨ç¤º
    quizContainer.style.pointerEvents = 'auto';
    newPiece();
    newQuiz();
    if (isColliding(currentPiece)) {
        gameOver();
        return;
    }
    dropCounter = 0;
}

// 7-bagã‚·ã‚¹ãƒ†ãƒ ï¼ˆå„ãƒ–ãƒ­ãƒƒã‚¯ãŒå‡ç­‰ã«å‡ºç¾ï¼‰
let pieceBag = [];

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function fillBag() {
    // 1ã€œ7ã®å…¨ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¢‹ã«å…¥ã‚Œã¦ã‚·ãƒ£ãƒƒãƒ•ãƒ«
    pieceBag = shuffleArray([1, 2, 3, 4, 5, 6, 7]);
}

function newPiece() {
    // è¢‹ãŒç©ºãªã‚‰è£œå……
    if (pieceBag.length === 0) {
        fillBag();
    }
    // è¢‹ã‹ã‚‰1ã¤å–ã‚Šå‡ºã™
    const rand = pieceBag.pop();
    currentPiece = { shape: SHAPES[rand], color: COLORS[rand], colorIndex: rand, x: Math.floor(COLS / 2) - 1, y: 0 };
}

function newQuiz() {
    feedbackElement.textContent = '';
    totalQuizCount++;

    // é‡è¤‡ã—ãªã„ã‚¯ã‚¤ã‚ºã‚’é¸æŠ
    let availableIndexes = [];
    for (let i = 0; i < currentQuizBank.length; i++) {
        if (!usedQuizIndexes.includes(i)) {
            availableIndexes.push(i);
        }
    }
    // å…¨ã¦ä½¿ã„åˆ‡ã£ãŸã‚‰ãƒªã‚»ãƒƒãƒˆ
    if (availableIndexes.length === 0) {
        usedQuizIndexes = [];
        availableIndexes = currentQuizBank.map((_, i) => i);
    }

    const randIndex = availableIndexes[Math.floor(Math.random() * availableIndexes.length)];
    usedQuizIndexes.push(randIndex);
    currentQuiz = currentQuizBank[randIndex];

    questionElement.innerHTML = 'ã€å•é¡Œã€‘<br>' + currentQuiz.q;
    answersElement.innerHTML = '';
    const options = [...currentQuiz.o].sort(() => Math.random() - 0.5);
    options.forEach(option => {
        const button = document.createElement('button');
        button.textContent = option;
        button.className = 'answer-btn';
        button.onclick = () => handleAnswer(option);
        answersElement.appendChild(button);
    });
}

function handleAnswer(selectedOption) {
    if (canControl || isGameOver || isGameCleared || isAnswerDisabled) return;
    if (selectedOption === currentQuiz.a) {
        playSound(sounds.correct);
        canControl = true;
        correctAnswerCount++;
        quizContainer.style.visibility = 'hidden'; // ã‚¯ã‚¤ã‚ºéƒ¨åˆ†ã ã‘éè¡¨ç¤º
        quizContainer.style.pointerEvents = 'none';
        feedbackElement.textContent = '';

    } else {
        playSound(sounds.wrong);
        wrongAnswerCount++;
        feedbackElement.textContent = 'ã¾ã¡ãŒã„ï¼ã‚‚ã†ä¸€åº¦ï¼';

        // ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼šå°‘ã—ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ—
        if (dropInterval > MIN_DROP_INTERVAL) {
            dropInterval = Math.max(MIN_DROP_INTERVAL, dropInterval - 30);
        }

        // æ•µã®æ”»æ’ƒæ¼”å‡º
        enemyAttack();
    }
}

// æ•µã®æ”»æ’ƒæ¼”å‡ºï¼ˆé–“é•ãˆæ™‚ã®ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼‰
function enemyAttack() {
    const enemyIcon = document.getElementById('enemy-icon');
    const gameContainer = document.getElementById('game-container');

    // å›ç­”ã‚’0.5ç§’é–“ç„¡åŠ¹åŒ–
    isAnswerDisabled = true;
    answersElement.classList.add('disabled');

    // æ•µã‚¢ã‚¤ã‚³ãƒ³ã‚’å¤§ããå…‰ã‚‰ã›ã‚‹
    if (enemyIcon) {
        enemyIcon.style.transform = 'scale(1.5)';
        enemyIcon.style.filter = 'brightness(2) drop-shadow(0 0 10px red)';
    }

    // ç”»é¢ãƒ€ãƒ¡ãƒ¼ã‚¸æ¼”å‡ºï¼ˆç¬é–“çš„ã«ã‚¬ã‚¯ãƒƒã¨ã‚ºãƒ¬ã‚‹ï¼‰
    if (gameContainer) {
        let shakeCount = 0;
        const shakeInterval = setInterval(() => {
            const offsetX = (Math.random() - 0.5) * 20;
            const offsetY = (Math.random() - 0.5) * 20;
            gameContainer.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
            shakeCount++;
            if (shakeCount >= 6) {
                clearInterval(shakeInterval);
                gameContainer.style.transform = '';
            }
        }, 50);
    }

    // èµ¤ãƒ•ãƒ©ãƒƒã‚·ãƒ¥
    document.body.classList.add('damage-flash');

    // 0.5ç§’å¾Œã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’è§£é™¤
    setTimeout(() => {
        isAnswerDisabled = false;
        answersElement.classList.remove('disabled');
        document.body.classList.remove('damage-flash');

        if (enemyIcon) {
            enemyIcon.style.transform = '';
            enemyIcon.style.filter = '';
        }
    }, 500);
}

function useHelp() {
    if (helpChances > 0) {
        playSound(sounds.help);
        helpChances--;
        helpUsed = true;

        // ãƒœãƒ¼ãƒ‰ã‚’å…¨ã‚¯ãƒªã‚¢ï¼ˆæ›´åœ°ã«æˆ»ã™ï¼‰
        board = Array.from({ length: ROWS }, () => Array(COLS).fill(0));

        // æ–°ã—ã„ã‚¿ãƒ¼ãƒ³ã‚’é–‹å§‹
        newTurn();

        if (helpCount) helpCount.textContent = `(${helpChances}å›)`;
        if (helpChances === 0) helpBtn.disabled = true;
    }
}

function lockPiece() {
    currentPiece.shape.forEach((row, y) => {
        row.forEach((value, x) => {
            if (value) {
                if (currentPiece.y + y >= 0) board[currentPiece.y + y][currentPiece.x + x] = currentPiece.colorIndex;
            }
        });
    });
}

function clearLines() {
    let linesCleared = 0;
    for (let y = ROWS - 1; y >= 0; y--) {
        if (board[y].every(value => value > 0)) {
            linesCleared++;
            board.splice(y, 1);
            board.unshift(Array(COLS).fill(0));
            y++;
        }
    }
    if (linesCleared > 0) {
        playSound(sounds.lineClear);
        // æ•µã«ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼ˆ1ãƒ©ã‚¤ãƒ³ = 10ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼‰
        const damage = linesCleared * 10;
        enemyHp = Math.max(0, enemyHp - damage);
        updateEnemyDisplay();
        if (enemyHp <= 0 && !isGameCleared) {
            gameClear();
        }
    }
}

function updateEnemyDisplay() {
    const enemyIconEl = document.getElementById('enemy-icon');
    const enemyNameEl = document.getElementById('enemy-name');
    const enemyHpEl = document.getElementById('enemy-hp');
    const enemyHpBarEl = document.getElementById('enemy-hp-bar');

    if (enemyIconEl) enemyIconEl.textContent = currentEnemy.emoji;
    if (enemyNameEl) enemyNameEl.textContent = currentEnemy.name;
    if (enemyHpEl) enemyHpEl.textContent = `${enemyHp} / ${enemyMaxHp}`;
    if (enemyHpBarEl) {
        const hpPercent = (enemyHp / enemyMaxHp) * 100;
        enemyHpBarEl.style.width = `${hpPercent}%`;
        // ãƒ¬ãƒˆãƒ­RPGé¢¨ï¼ˆç·‘â†’é»„â†’èµ¤ï¼‰
        if (hpPercent > 50) {
            enemyHpBarEl.style.background = '#00ff00';
        } else if (hpPercent > 25) {
            enemyHpBarEl.style.background = '#ffff00';
        } else {
            enemyHpBarEl.style.background = '#ff0000';
        }
    }
}

function gameClear() {
    isGameCleared = true;
    sounds.bgm.pause();
    sounds.bgm.currentTime = 0;
    cancelAnimationFrame(animationFrameId);
    animationFrameId = null;
    playSound(sounds.clear);
    setTimeout(() => playSound(sounds.congrats), 1500);
    // ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°BGMå†ç”Ÿ
    sounds.ending.currentTime = 0;
    if (!isMuted) sounds.ending.play().catch(() => {});

    // IQè¨ˆç®—
    const iq = calculateIQ();
    const comment = getIQComment(iq);

    // ç”»é¢å…¨ä½“ã‚’é»’ã§è¦†ã†ï¼ˆãƒ‰ãƒ©ã‚¯ã‚¨é¢¨ï¼‰
    ctx.fillStyle = '#000';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;

    ctx.textAlign = 'center';

    // å‹åˆ©ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    ctx.fillStyle = '#ff0';
    ctx.font = '20px "DotGothic16"';
    ctx.fillText('â˜… VICTORY! â˜…', centerX, centerY - 160);

    ctx.fillStyle = '#fff';
    ctx.font = '16px "DotGothic16"';
    ctx.fillText(`${currentEnemy.name}ã‚’ãŸãŠã—ãŸï¼`, centerX, centerY - 120);

    // IQã‚»ã‚¯ã‚·ãƒ§ãƒ³
    ctx.font = '14px "DotGothic16"';
    ctx.fillStyle = '#fff';
    ctx.fillText('ã‚ãªãŸã®IQã¯...', centerX, centerY - 70);

    // IQæ•°å€¤ã‚’å¤§ããè¡¨ç¤º
    ctx.font = '60px "DotGothic16"';
    ctx.fillStyle = '#ff0';
    ctx.fillText(iq, centerX, centerY + 20);

    // ã‚³ãƒ¡ãƒ³ãƒˆ
    ctx.font = '12px "DotGothic16"';
    ctx.fillStyle = '#fff';
    ctx.fillText(comment, centerX, centerY + 70);

    // çµ±è¨ˆæƒ…å ±
    ctx.font = '11px "DotGothic16"';
    ctx.fillStyle = '#fff';
    const accuracy = totalQuizCount > 0 ? Math.round((correctAnswerCount / totalQuizCount) * 100) : 0;
    ctx.fillText(`æ­£è§£ç‡: ${accuracy}%  é–“é•ã„: ${wrongAnswerCount}å›`, centerX, centerY + 110);

    ctx.font = '12px "DotGothic16"';
    ctx.fillStyle = '#fff';
    ctx.fillText('ã‚¿ãƒƒãƒ—ã§ã‚¿ã‚¤ãƒˆãƒ«ã¸', centerX, centerY + 160);
}

function gameOver() {
    isGameOver = true;
    sounds.bgm.pause();
    sounds.bgm.currentTime = 0;
    cancelAnimationFrame(animationFrameId);
    animationFrameId = null;
    // ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°BGMå†ç”Ÿ
    sounds.ending.currentTime = 0;
    if (!isMuted) sounds.ending.play().catch(() => {});

    // IQè¨ˆç®—ï¼ˆã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã§ã‚‚è¡¨ç¤ºï¼‰
    const iq = calculateIQ();
    const comment = getIQComment(iq);
    const remainingHpPercent = Math.round((enemyHp / enemyMaxHp) * 100);

    // ç”»é¢å…¨ä½“ã‚’é»’ã§è¦†ã†ï¼ˆãƒ‰ãƒ©ã‚¯ã‚¨é¢¨ï¼‰
    ctx.fillStyle = '#000';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;

    ctx.textAlign = 'center';

    // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
    ctx.fillStyle = '#f00';
    ctx.font = '22px "DotGothic16"';
    ctx.fillText('â˜… GAME OVER â˜…', centerX, centerY - 160);

    ctx.fillStyle = '#fff';
    ctx.font = '14px "DotGothic16"';
    ctx.fillText(`${currentEnemy.name}ã«æ•—åŒ—...`, centerX, centerY - 120);

    ctx.fillStyle = '#fff';
    ctx.font = '12px "DotGothic16"';
    ctx.fillText(`æ•µHP: ${remainingHpPercent}% æ®‹ã‚Š`, centerX, centerY - 95);

    // IQã‚»ã‚¯ã‚·ãƒ§ãƒ³
    ctx.fillStyle = '#fff';
    ctx.font = '14px "DotGothic16"';
    ctx.fillText('ã‚ãªãŸã®IQ', centerX, centerY - 50);

    // IQæ•°å€¤
    ctx.font = '55px "DotGothic16"';
    ctx.fillStyle = '#fff';
    ctx.fillText(iq, centerX, centerY + 25);

    // ã‚³ãƒ¡ãƒ³ãƒˆ
    ctx.font = '12px "DotGothic16"';
    ctx.fillStyle = '#fff';
    ctx.fillText(comment, centerX, centerY + 70);

    // çµ±è¨ˆæƒ…å ±
    ctx.font = '11px "DotGothic16"';
    ctx.fillStyle = '#fff';
    const accuracy = totalQuizCount > 0 ? Math.round((correctAnswerCount / totalQuizCount) * 100) : 0;
    ctx.fillText(`æ­£è§£ç‡: ${accuracy}%  é–“é•ã„: ${wrongAnswerCount}å›`, centerX, centerY + 110);

    ctx.font = '12px "DotGothic16"';
    ctx.fillStyle = '#fff';
    ctx.fillText('ã‚¿ãƒƒãƒ—ã§ã‚¿ã‚¤ãƒˆãƒ«ã¸', centerX, centerY + 155);
}

function playSound(sound) {
    if (!sound || isMuted) return;
    sound.currentTime = 0;
    sound.play().catch(error => {
        console.error(`Audio playback failed: ${error.message}`);
    });
}

// ãƒŸãƒ¥ãƒ¼ãƒˆãƒˆã‚°ãƒ«æ©Ÿèƒ½
function toggleMute() {
    isMuted = !isMuted;
    const muteBtn = document.getElementById('mute-btn');

    if (isMuted) {
        // å…¨ã¦ã®éŸ³å£°ã‚’åœæ­¢
        Object.values(sounds).forEach(sound => {
            sound.pause();
        });
        muteBtn.textContent = 'ğŸ”‡';
        muteBtn.classList.add('muted');
    } else {
        muteBtn.textContent = 'ğŸ”Š';
        muteBtn.classList.remove('muted');
        // ç¾åœ¨ã®ç”»é¢ã«å¿œã˜ã¦BGMã‚’å†ç”Ÿ
        if (!titleScreen.classList.contains('hidden')) {
            sounds.opening.play().catch(() => {});
        } else if (!gameWrapper.classList.contains('hidden') && !isGameOver && !isGameCleared) {
            sounds.bgm.play().catch(() => {});
        } else if (isGameOver || isGameCleared) {
            sounds.ending.play().catch(() => {});
        }
    }
}

// 7. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ“ä½œã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
document.addEventListener('keydown', e => {
    if (!canControl || isGameOver || isGameCleared) return;
    if (e.key === 'ArrowLeft') playerMove(-1);
    else if (e.key === 'ArrowRight') playerMove(1);
    else if (e.key === 'ArrowDown') playerDrop();
    else if (e.key === 'ArrowUp') playerRotate();
});
canvas.addEventListener('click', () => { if (isGameOver || isGameCleared) showTitleScreen(); });
helpBtn.addEventListener('click', useHelp);

// ã‚¹ãƒ¯ã‚¤ãƒ—ãƒ»ã‚¿ãƒƒãƒ—æ“ä½œï¼ˆã‚¹ãƒãƒ›ç”¨ï¼‰
let touchStartX = 0;
let touchStartY = 0;
let touchStartTime = 0;
let longPressTimeout = null;
let isLongPressing = false;
const SWIPE_THRESHOLD = 15; // ã‚¹ãƒ¯ã‚¤ãƒ—åˆ¤å®šã®æœ€å°è·é›¢ï¼ˆå°ã•ã=æ•æ„Ÿã«ï¼‰
const TAP_THRESHOLD = 8;    // ã‚¿ãƒƒãƒ—åˆ¤å®šã®æœ€å¤§ç§»å‹•è·é›¢
const LONG_PRESS_DELAY = 350; // é•·æŠ¼ã—åˆ¤å®šæ™‚é–“ï¼ˆmsï¼‰
const MOVE_PER_PIXEL = 25;  // ä½•pxæ¨ªã‚¹ãƒ¯ã‚¤ãƒ—ã§1ãƒã‚¹ç§»å‹•
const DROP_PER_PIXEL = 20;  // ä½•pxä¸‹ã‚¹ãƒ¯ã‚¤ãƒ—ã§1ãƒã‚¹è½ä¸‹

function handleTouchControl(action) {
    if (!canControl || isGameOver || isGameCleared) return;
    action();
}

// ã‚½ãƒ•ãƒˆãƒ‰ãƒ­ãƒƒãƒ—ï¼ˆé«˜é€Ÿè½ä¸‹ï¼šè¤‡æ•°ãƒã‚¹ï¼‰
function softDrop() {
    for (let i = 0; i < 3; i++) { // 3ãƒã‚¹è½ä¸‹
        if (!isColliding(currentPiece, 0, 1)) {
            currentPiece.y++;
        } else {
            break;
        }
    }
    dropCounter = 0;
}

// ç”»é¢å…¨ä½“ã§ã‚¿ãƒƒãƒæ“ä½œã‚’å—ã‘ä»˜ã‘ã‚‹
const touchArea = gameWrapper;

touchArea.addEventListener('touchstart', (e) => {
    // ã‚¯ã‚¤ã‚ºãƒœã‚¿ãƒ³ã‚„UIãƒœã‚¿ãƒ³ã¯ã‚¹ã‚­ãƒƒãƒ—
    if (e.target.closest('.answer-btn, #help-btn, #back-to-title-btn')) return;

    e.preventDefault();
    const touch = e.touches[0];
    touchStartX = touch.clientX;
    touchStartY = touch.clientY;
    touchStartTime = Date.now();
    isLongPressing = false;

    // é•·æŠ¼ã—æ¤œå‡ºã‚¿ã‚¤ãƒãƒ¼é–‹å§‹ï¼ˆé•·æŠ¼ã—ã§å³è½ä¸‹ï¼‰
    longPressTimeout = setTimeout(() => {
        isLongPressing = true;
        handleTouchControl(() => hardDrop());
    }, LONG_PRESS_DELAY);
}, { passive: false });

touchArea.addEventListener('touchend', (e) => {
    // ã‚¯ã‚¤ã‚ºãƒœã‚¿ãƒ³ã‚„UIãƒœã‚¿ãƒ³ã¯ã‚¹ã‚­ãƒƒãƒ—
    if (e.target.closest('.answer-btn, #help-btn, #back-to-title-btn')) return;

    e.preventDefault();

    // é•·æŠ¼ã—ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
    if (longPressTimeout) {
        clearTimeout(longPressTimeout);
        longPressTimeout = null;
    }

    // é•·æŠ¼ã—ä¸­ã ã£ãŸå ´åˆã¯ã‚¿ãƒƒãƒ—å‡¦ç†ã—ãªã„
    if (isLongPressing) {
        isLongPressing = false;
        return;
    }

    if (isGameOver || isGameCleared) {
        showTitleScreen();
        return;
    }

    const touch = e.changedTouches[0];
    const deltaX = touch.clientX - touchStartX;
    const deltaY = touch.clientY - touchStartY;

    const absX = Math.abs(deltaX);
    const absY = Math.abs(deltaY);

    // ã‚¿ãƒƒãƒ—åˆ¤å®šï¼ˆç§»å‹•è·é›¢ãŒå°ã•ã„å ´åˆï¼‰â†’ å³åº§ã«å›è»¢
    if (absX < TAP_THRESHOLD && absY < TAP_THRESHOLD) {
        handleTouchControl(() => playerRotate());
        return;
    }

    // æ¨ªã‚¹ãƒ¯ã‚¤ãƒ—åˆ¤å®šï¼ˆtouchmoveã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†ã•ã‚Œã‚‹ãŒã€å¿µã®ãŸã‚ï¼‰
    // ä¸‹ã‚¹ãƒ¯ã‚¤ãƒ—ã¯touchmoveã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†æ¸ˆã¿
}, { passive: false });

// ãƒãƒ¼ãƒ‰ãƒ‰ãƒ­ãƒƒãƒ—ï¼ˆå³åº§ã«ç€åœ°ï¼‰
function hardDrop() {
    while (!isColliding(currentPiece, 0, 1)) {
        currentPiece.y++;
    }
    lockPiece();
    clearLines();
    if (!isGameCleared) newTurn();
    dropCounter = 0;
}

// é€£ç¶šã‚¹ãƒ¯ã‚¤ãƒ—å¯¾å¿œï¼ˆæŒ‡ã‚’å‹•ã‹ã—ãªãŒã‚‰ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ“ä½œï¼‰
let lastMoveX = 0;
let lastMoveY = 0;
touchArea.addEventListener('touchmove', (e) => {
    // ã‚¯ã‚¤ã‚ºãƒœã‚¿ãƒ³ã‚„UIãƒœã‚¿ãƒ³ã¯ã‚¹ã‚­ãƒƒãƒ—
    if (e.target.closest('.answer-btn, #help-btn, #back-to-title-btn')) return;

    e.preventDefault();

    const touch = e.touches[0];
    const deltaX = touch.clientX - touchStartX;
    const deltaY = touch.clientY - touchStartY;

    // ä¸€å®šè·é›¢ä»¥ä¸Šå‹•ã„ãŸã‚‰é•·æŠ¼ã—ã‚­ãƒ£ãƒ³ã‚»ãƒ«
    if (Math.abs(deltaX) > TAP_THRESHOLD || Math.abs(deltaY) > TAP_THRESHOLD) {
        if (longPressTimeout) {
            clearTimeout(longPressTimeout);
            longPressTimeout = null;
        }
        isLongPressing = false;
    }

    if (!canControl || isGameOver || isGameCleared) return;

    // å·¦å³ç§»å‹•ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
    const moveStepX = Math.floor(deltaX / MOVE_PER_PIXEL);
    if (moveStepX !== lastMoveX) {
        const diff = moveStepX - lastMoveX;
        if (diff > 0) {
            handleTouchControl(() => playerMove(1));
        } else if (diff < 0) {
            handleTouchControl(() => playerMove(-1));
        }
        lastMoveX = moveStepX;
    }

    // ä¸‹è½ä¸‹ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
    const moveStepY = Math.floor(deltaY / DROP_PER_PIXEL);
    if (moveStepY > lastMoveY) {
        const dropCount = moveStepY - lastMoveY;
        handleTouchControl(() => {
            for (let i = 0; i < dropCount; i++) {
                if (!isColliding(currentPiece, 0, 1)) {
                    currentPiece.y++;
                } else {
                    break;
                }
            }
            dropCounter = 0;
        });
        lastMoveY = moveStepY;
    }
}, { passive: false });

touchArea.addEventListener('touchstart', () => { lastMoveX = 0; lastMoveY = 0; }, { passive: true });

// ã‚¿ãƒƒãƒãƒœã‚¿ãƒ³æ“ä½œï¼ˆã‚¹ãƒãƒ›ç”¨ï¼‰
const btnLeft = document.getElementById('btn-left');
const btnRight = document.getElementById('btn-right');
const btnDown = document.getElementById('btn-down');
const btnRotate = document.getElementById('btn-rotate');

if (btnLeft) {
    btnLeft.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if (canControl && !isGameOver && !isGameCleared) playerMove(-1);
    }, { passive: false });
}
if (btnRight) {
    btnRight.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if (canControl && !isGameOver && !isGameCleared) playerMove(1);
    }, { passive: false });
}
if (btnDown) {
    btnDown.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if (canControl && !isGameOver && !isGameCleared) playerDrop();
    }, { passive: false });
}
if (btnRotate) {
    btnRotate.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if (canControl && !isGameOver && !isGameCleared) playerRotate();
    }, { passive: false });
}

function playerMove(offset) {
    if (!isColliding(currentPiece, offset, 0)) currentPiece.x += offset;
}

function playerDrop() {
    if (!isColliding(currentPiece, 0, 1)) {
        currentPiece.y++;
    } else {
        lockPiece();
        clearLines();
        if (!isGameCleared) newTurn();
    }
    dropCounter = 0;
}

function hardDrop() {
    while (!isColliding(currentPiece, 0, 1)) {
        currentPiece.y++;
    }
    lockPiece();
    clearLines();
    if (!isGameCleared) newTurn();
    dropCounter = 0;
}

function playerRotate() {
    const shape = currentPiece.shape;
    const newShape = shape[0].map((_, colIndex) => shape.map(row => row[colIndex]).reverse());
    if (!isColliding({ ...currentPiece, shape: newShape }, 0, 0)) currentPiece.shape = newShape;
}

// 8. å½“ãŸã‚Šåˆ¤å®š
function isColliding(piece, offsetX = 0, offsetY = 0) {
    const shape = piece.shape || piece;
    for (let y = 0; y < shape.length; y++) {
        for (let x = 0; x < shape[y].length; x++) {
            if (shape[y][x]) {
                const newX = piece.x + x + offsetX;
                const newY = piece.y + y + offsetY;
                if (newX < 0 || newX >= COLS || newY >= ROWS || (newY >= 0 && board[newY][newX])) return true;
            }
        }
    }
    return false;
}

// 9. æç”»
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // å¯æ„›ã„ã‚°ãƒªãƒƒãƒ‰ç·šï¼ˆè–„ã„ãƒ”ãƒ³ã‚¯ï¼‰
    ctx.strokeStyle = 'rgba(255, 182, 193, 0.3)';
    ctx.lineWidth = 1;
    for (let x = 0; x < COLS; x++) {
        for (let y = 0; y < ROWS; y++) {
            ctx.strokeRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
        }
    }
    drawBoard();
    if (!isGameOver && !isGameCleared) drawPiece();
}

function drawBoard() {
    board.forEach((row, y) => {
        row.forEach((value, x) => {
            if (value > 0) {
                // å¯æ„›ã„ãƒ–ãƒ­ãƒƒã‚¯æç”»ï¼ˆä¸¸ã¿ã®ã‚ã‚‹æ„Ÿã˜ï¼‰
                ctx.fillStyle = COLORS[value];
                ctx.fillRect(x * BLOCK_SIZE + 2, y * BLOCK_SIZE + 2, BLOCK_SIZE - 4, BLOCK_SIZE - 4);
                ctx.strokeStyle = 'rgba(255, 105, 180, 0.5)';
                ctx.lineWidth = 1;
                ctx.strokeRect(x * BLOCK_SIZE + 1, y * BLOCK_SIZE + 1, BLOCK_SIZE - 2, BLOCK_SIZE - 2);
            }
        });
    });
}

function drawPiece() {
    if (!currentPiece) return;
    ctx.fillStyle = currentPiece.color;
    currentPiece.shape.forEach((row, y) => {
        row.forEach((value, x) => {
            if (value) {
                const pieceX = currentPiece.x + x;
                const pieceY = currentPiece.y + y;
                // å¯æ„›ã„ãƒ–ãƒ­ãƒƒã‚¯æç”»
                ctx.fillRect(pieceX * BLOCK_SIZE + 2, pieceY * BLOCK_SIZE + 2, BLOCK_SIZE - 4, BLOCK_SIZE - 4);
                ctx.strokeStyle = 'rgba(255, 105, 180, 0.5)';
                ctx.lineWidth = 1;
                ctx.strokeRect(pieceX * BLOCK_SIZE + 1, pieceY * BLOCK_SIZE + 1, BLOCK_SIZE - 2, BLOCK_SIZE - 2);
            }
        });
    });
}

// 10. ã‚²ãƒ¼ãƒ èµ·å‹•
document.addEventListener('DOMContentLoaded', init);